- en: Persistent Compilation Cache
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[`jax.readthedocs.io/en/latest/persistent_compilation_cache.html`](https://jax.readthedocs.io/en/latest/persistent_compilation_cache.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: JAX has an optional disk cache for compiled programs. If enabled, JAX will store
    copies of compiled programs on disk, which can save recompilation time when running
    the same or similar tasks repeatedly.
  prefs: []
  type: TYPE_NORMAL
- en: Usage
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The compilation cache is enabled when the [cache-location](https://github.com/google/jax/blob/jax-v0.4.26/jax/_src/config.py#L1206)
    is set. This should be done prior to the first compilation. Set the location as
    follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: See the sections below for more detail on `cache-location`.
  prefs: []
  type: TYPE_NORMAL
- en: '[`set_cache_dir()`](https://github.com/google/jax/blob/jax-v0.4.26/jax/experimental/compilation_cache/compilation_cache.py#L18)
    is an alternate way of setting `cache-location`.'
  prefs: []
  type: TYPE_NORMAL
- en: Local filesystem
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '`cache-location` can be a directory on the local filesystem. For example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Note: the cache does not have an eviction mechanism implemented. If the cache-location
    is a directory in the local filesystem, its size will continue to grow unless
    files are manually deleted.'
  prefs: []
  type: TYPE_NORMAL
- en: Google Cloud
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'When running on Google Cloud, the compilation cache can be placed on a Google
    Cloud Storage (GCS) bucket. We recommend the following configuration:'
  prefs: []
  type: TYPE_NORMAL
- en: Create the bucket in the same region as where the workload will run.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Create the bucket in the same project as the workload’s VM(s). Ensure that permissions
    are set so that the VM(s) can write to the bucket.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: There is no need for replication for smaller workloads. Larger workloads could
    benefit from replication.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use “Standard” for the default storage class for the bucket.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Set the soft delete policy to its shortest: 7 days.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Set the object lifecycle to the expected duration of the workload run. For example,
    if the workload is expected to run for 10 days, set the object lifecycle to 10
    days. That should cover restarts that occur during the entire run. Use `age` for
    the lifecycle condition and `Delete` for the action. See [Object Lifecycle Management](https://cloud.google.com/storage/docs/lifecycle)
    for details. If the object lifecycle is not set, the cache will continue to grow
    since there is no eviction mechanism implemented.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: All encryption policies are supported.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Assuming that `gs://jax-cache` is the GCS bucket, set `cache-location` as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
