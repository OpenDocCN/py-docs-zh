- en: OCR - Optical Character Recognition
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pymupdf.readthedocs.io/en/latest/recipes-ocr.html](https://pymupdf.readthedocs.io/en/latest/recipes-ocr.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: PyMuPDF has integrated support for OCR (Optical Character Recognition). It is
    possible to use OCR for both, images (via the [Pixmap](pixmap.html#pixmap) class)
    and for document pages.
  prefs: []
  type: TYPE_NORMAL
- en: The feature is currently based on Tesseract-OCR which must be installed as a
    separate application – see the installation chapter.
  prefs: []
  type: TYPE_NORMAL
- en: How to OCR an Image
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A supported image must first be converted to a [Pixmap](pixmap.html#pixmap).
    The Pixmap can then be saved to a 1-page PDF. This page will look like the original
    image with the same width and height. It will contain a layer of text as recognized
    by Tesseract.
  prefs: []
  type: TYPE_NORMAL
- en: The PDF can be generated via one of the methods [`Pixmap.pdfocr_save()`](pixmap.html#Pixmap.pdfocr_save
    "Pixmap.pdfocr_save") or [`Pixmap.pdfocr_tobytes()`](pixmap.html#Pixmap.pdfocr_tobytes
    "Pixmap.pdfocr_tobytes"), as a file on disk or as a PDF in memory.
  prefs: []
  type: TYPE_NORMAL
- en: 'The text can be extracted and searched with the usual text extraction and search
    methods ([`Page.get_text()`](page.html#Page.get_text "Page.get_text"), [`Page.search_for()`](page.html#Page.search_for
    "Page.search_for"), etc.). Please also note the following important facts and
    prerequisites:'
  prefs: []
  type: TYPE_NORMAL
- en: When converting the image to a Pixmap, please confirm that the color space is
    RGB and alpha is `False` (no transparency). Convert the original Pixmap if necessary.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: All text is written as “hidden” with Tesseract’s own `GlyphLessFont`, a mono-spaced
    font with metrics comparable to Courier.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: All text has the properties regular and black (i.e. no bold, no italic, no information
    about the original fonts).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tesseract does not recognize vector graphics (i.e. no drawings / line-art).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This approach is also recommended to OCR a complete scanned PDF:'
  prefs: []
  type: TYPE_NORMAL
- en: Render each page to a [Pixmap](pixmap.html#pixmap) with desired resolution
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Append the resulting 1-page PDF to the output PDF
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to OCR a Document Page
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Any supported document page can be OCR-ed – either the complete page or only
    the image areas on it.
  prefs: []
  type: TYPE_NORMAL
- en: Because optical character recognition is about one thousand times slower than
    standard text extraction, we make sure to do OCR only once per page and store
    the result in a [TextPage](textpage.html#textpage). Using this TextPage for all
    subsequent extractions and text searches will then happen with PyMuPDF’s usual
    top speed.
  prefs: []
  type: TYPE_NORMAL
- en: 'To OCR a document page, follow this approach:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Determine whether OCR is needed / beneficial at all. A number of criteria can
    be used for this decision, like:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: page is completely covered by an image
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: no text exists on the page
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: thousands of small vector graphics (indicating *simulated* text)
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: OCR the page and store result in a [TextPage](textpage.html#textpage) object
    using an instruction like `tp = page.get_textpage_ocr(...)`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Refer to the produced [TextPage](textpage.html#textpage) in all subsequent text
    extractions and searches via the `textpage=tp` parameter.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Do you have any feedback on this page?
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: This software is provided AS-IS with no warranty, either express or implied.
    This software is distributed under license and may not be copied, modified or
    distributed except as expressly authorized under the terms of that license. Refer
    to licensing information at [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA
    94129, United States for further information.
  prefs: []
  type: TYPE_NORMAL
- en: This documentation covers all versions up to 1.24.4.
  prefs: []
  type: TYPE_NORMAL
- en: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
  prefs: []
  type: TYPE_NORMAL
- en: How to OCR an Image
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A supported image must first be converted to a [Pixmap](pixmap.html#pixmap).
    The Pixmap can then be saved to a 1-page PDF. This page will look like the original
    image with the same width and height. It will contain a layer of text as recognized
    by Tesseract.
  prefs: []
  type: TYPE_NORMAL
- en: The PDF can be generated via one of the methods [`Pixmap.pdfocr_save()`](pixmap.html#Pixmap.pdfocr_save
    "Pixmap.pdfocr_save") or [`Pixmap.pdfocr_tobytes()`](pixmap.html#Pixmap.pdfocr_tobytes
    "Pixmap.pdfocr_tobytes"), as a file on disk or as a PDF in memory.
  prefs: []
  type: TYPE_NORMAL
- en: 'The text can be extracted and searched with the usual text extraction and search
    methods ([`Page.get_text()`](page.html#Page.get_text "Page.get_text"), [`Page.search_for()`](page.html#Page.search_for
    "Page.search_for"), etc.). Please also note the following important facts and
    prerequisites:'
  prefs: []
  type: TYPE_NORMAL
- en: When converting the image to a Pixmap, please confirm that the color space is
    RGB and alpha is `False` (no transparency). Convert the original Pixmap if necessary.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: All text is written as “hidden” with Tesseract’s own `GlyphLessFont`, a mono-spaced
    font with metrics comparable to Courier.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: All text has the properties regular and black (i.e. no bold, no italic, no information
    about the original fonts).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tesseract does not recognize vector graphics (i.e. no drawings / line-art).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This approach is also recommended to OCR a complete scanned PDF:'
  prefs: []
  type: TYPE_NORMAL
- en: Render each page to a [Pixmap](pixmap.html#pixmap) with desired resolution
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Append the resulting 1-page PDF to the output PDF
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to OCR a Document Page
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Any supported document page can be OCR-ed – either the complete page or only
    the image areas on it.
  prefs: []
  type: TYPE_NORMAL
- en: Because optical character recognition is about one thousand times slower than
    standard text extraction, we make sure to do OCR only once per page and store
    the result in a [TextPage](textpage.html#textpage). Using this TextPage for all
    subsequent extractions and text searches will then happen with PyMuPDF’s usual
    top speed.
  prefs: []
  type: TYPE_NORMAL
- en: 'To OCR a document page, follow this approach:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Determine whether OCR is needed / beneficial at all. A number of criteria can
    be used for this decision, like:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: page is completely covered by an image
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: no text exists on the page
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: thousands of small vector graphics (indicating *simulated* text)
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: OCR the page and store result in a [TextPage](textpage.html#textpage) object
    using an instruction like `tp = page.get_textpage_ocr(...)`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Refer to the produced [TextPage](textpage.html#textpage) in all subsequent text
    extractions and searches via the `textpage=tp` parameter.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Do you have any feedback on this page?
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: This software is provided AS-IS with no warranty, either express or implied.
    This software is distributed under license and may not be copied, modified or
    distributed except as expressly authorized under the terms of that license. Refer
    to licensing information at [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA
    94129, United States for further information.
  prefs: []
  type: TYPE_NORMAL
- en: This documentation covers all versions up to 1.24.4.
  prefs: []
  type: TYPE_NORMAL
- en: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
  prefs: []
  type: TYPE_NORMAL
