- en: Change Log
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 变更日志
- en: 原文：[https://pymupdf.readthedocs.io/en/latest/changes.html](https://pymupdf.readthedocs.io/en/latest/changes.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://pymupdf.readthedocs.io/en/latest/changes.html](https://pymupdf.readthedocs.io/en/latest/changes.html)
- en: '**Changes in version 1.24.4 (2024-05-16)**'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.24.4版本变更（2024-05-16）**'
- en: '**Fixed** [3418](https://github.com/pymupdf/PyMuPDF/issues/3418): Re-introduced
    bug, text align add_redact_annot'
  id: totrans-3
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3418](https://github.com/pymupdf/PyMuPDF/issues/3418)：重新引入的错误，文本对齐添加了redact注释。'
- en: ''
  id: totrans-4
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-5
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Fixed** [3472](https://github.com/pymupdf/PyMuPDF/issues/3472): insert_pdf
    gives SystemError'
  id: totrans-6
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3472](https://github.com/pymupdf/PyMuPDF/issues/3472)：insert_pdf给出SystemError。'
- en: 'Other:'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Fixed sysinstall test failing to remove all of prior installation before new
    install.
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了sysinstall测试在新安装之前未能删除所有先前安装的失败。
- en: Fixed `utils.do_links()` crash.
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`utils.do_links()`崩溃问题。
- en: Correct [TextPage](textpage.html#textpage) creation Code.
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更正了[TextPage](textpage.html#textpage)创建代码。
- en: Unified various diagnostics.
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 统一各种诊断。
- en: Fix bug in `page_merge()`.
  id: totrans-12
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`page_merge()`中的错误。
- en: '**Changes in version 1.24.3 (2024-05-09)**'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.24.3版本变更（2024-05-09）**'
- en: The Python module is now called `pymupdf`. `fitz` is still supported for backwards
    compatibility.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在Python模块称为`pymupdf`。`fitz`仍支持向后兼容。
- en: Use MuPDF-1.24.2.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用MuPDF-1.24.2。
- en: 'Fixed issues:'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复的问题：
- en: '**Fixed** [3357](https://github.com/pymupdf/PyMuPDF/issues/3357): PyMuPDF==1.24.0
    will hanging when using page.get_text(“text”)'
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3357](https://github.com/pymupdf/PyMuPDF/issues/3357)：使用page.get_text(“text”)时PyMuPDF==1.24.0会卡住。'
- en: '**Fixed** [3376](https://github.com/pymupdf/PyMuPDF/issues/3376): Redacting
    results are not as expected in 1.24.x.'
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3376](https://github.com/pymupdf/PyMuPDF/issues/3376)：1.24.x中消除的结果不如预期。'
- en: '**Fixed** [3379](https://github.com/pymupdf/PyMuPDF/issues/3379): Documentation
    mismatch for get_text_blocks return value order.'
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3379](https://github.com/pymupdf/PyMuPDF/issues/3379)：get_text_blocks返回值顺序与文档不匹配。'
- en: '**Fixed** [3381](https://github.com/pymupdf/PyMuPDF/issues/3381): Contents
    stream contains floats in scientific notation'
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3381](https://github.com/pymupdf/PyMuPDF/issues/3381)：内容流包含科学计数法中的浮点数。'
- en: '**Fixed** [3402](https://github.com/pymupdf/PyMuPDF/issues/3402): Cannot add
    Widgets containing inter-field-calculation JavaScript'
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3402](https://github.com/pymupdf/PyMuPDF/issues/3402)：无法添加包含字段间计算JavaScript的小部件。'
- en: '**Fixed** [3414](https://github.com/pymupdf/PyMuPDF/issues/3414): missing attribute
    set_dpi()'
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3414](https://github.com/pymupdf/PyMuPDF/issues/3414)：缺少属性set_dpi()。'
- en: '**Fixed** [3430](https://github.com/pymupdf/PyMuPDF/issues/3430): page.get_text()
    cause process freeze with certain pdf on v1.24.2'
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3430](https://github.com/pymupdf/PyMuPDF/issues/3430)：page.get_text()在v1.24.2上与某些PDF文件导致进程冻结。'
- en: 'Other:'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'New/modified methods:'
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新/修改的方法：
- en: '[`Page.remove_rotation()`](page.html#Page.remove_rotation "Page.remove_rotation"):
    new, set page rotation to zero while keeping appearance.'
  id: totrans-26
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Page.remove_rotation()`](page.html#Page.remove_rotation "Page.remove_rotation")：新功能，将页面旋转设置为零但保持外观。'
- en: Fixed some problems when checking for PDF properties.
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了检查PDF属性时的一些问题。
- en: 'Fixed pip builds from sdist (see discussion [3360](https://github.com/pymupdf/PyMuPDF/discussions/3360):
    Alpine linux docker build failing “No matching distribution found for pymupdfb==1.24.1”).'
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了从sdist构建的pip构建（参见讨论[3360](https://github.com/pymupdf/PyMuPDF/discussions/3360)：Alpine
    Linux Docker构建失败“找不到匹配的分发版本pymupdfb==1.24.1”）。
- en: '**Changes in version 1.24.2 (2024-04-17)**'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.24.2版本变更（2024-04-17）**'
- en: Removed obsolete classic implementation from releases (previously available
    as module `fitz_old`).
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从版本中删除了过时的经典实现（先前作为模块`fitz_old`可用）。
- en: 'Fixed issues:'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复的问题：
- en: '**Fixed** [3331](https://github.com/pymupdf/PyMuPDF/issues/3331): Document.pages()
    is incorrectly type-hinted'
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3331](https://github.com/pymupdf/PyMuPDF/issues/3331)：Document.pages()的类型提示错误。'
- en: '**Fixed** [3354](https://github.com/pymupdf/PyMuPDF/issues/3354): PyMuPDF==1.24.1:
    AttributeError: property ‘metadata’ of ‘Document’ object has no setter'
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3354](https://github.com/pymupdf/PyMuPDF/issues/3354)：PyMuPDF==1.24.1：属性错误：‘Document’对象的属性‘metadata’没有setter。'
- en: 'Other:'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'New/modified methods:'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新/修改的方法：
- en: '[`Document.bake()`](document.html#Document.bake "Document.bake"): new, make
    annotations / fields permanent content.'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Document.bake()`](document.html#Document.bake "Document.bake")：新功能，使注释/字段内容永久化。'
- en: '[`Page.cluster_drawings()`](page.html#Page.cluster_drawings "Page.cluster_drawings"):
    new, identifies drawing items (i.e. vector graphics or line-art) that belong together
    based on their geometrical vicinity.'
  id: totrans-37
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Page.cluster_drawings()`](page.html#Page.cluster_drawings "Page.cluster_drawings")：新功能，根据它们的几何接近性识别彼此属于的绘图项目（即矢量图形或线条艺术）。'
- en: '[`Page.apply_redactions()`](page.html#Page.apply_redactions "Page.apply_redactions"):
    added new parameter [`text`](xml-class.html#Xml.text "Xml.text").'
  id: totrans-38
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Page.apply_redactions()`](page.html#Page.apply_redactions "Page.apply_redactions")：添加了新参数[`text`](xml-class.html#Xml.text
    "Xml.text")。'
- en: '[`Document.subset_fonts()`](document.html#Document.subset_fonts "Document.subset_fonts"):
    use MuPDF’s `pdf_subset_fonts()` instead of PyMuPDF code.'
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Document.subset_fonts()`](document.html#Document.subset_fonts "Document.subset_fonts")：使用
    MuPDF 的 `pdf_subset_fonts()` 替代 PyMuPDF 的代码。'
- en: The [Document](document.html#document) class now supports page numbers specified
    as slices.
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Document](document.html#document) 类现在支持以切片形式指定的页码。'
- en: Avoid causing MuPDF warnings.
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免引起 MuPDF 的警告。
- en: '**Changes in version 1.24.1 (2024-04-02)**'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.24.1 版本（2024-04-02）的变更**'
- en: 'Fixed issues:'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复问题：
- en: '**Fixed** [3278](https://github.com/pymupdf/PyMuPDF/issues/3278): apply_redactions
    moves some unredacted text'
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3278](https://github.com/pymupdf/PyMuPDF/issues/3278)：`apply_redactions`
    移动了一些未遮盖的文本。'
- en: '**Fixed** [3301](https://github.com/pymupdf/PyMuPDF/issues/3301): Be more permissive
    when classifying links as kind LINK_URI'
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3301](https://github.com/pymupdf/PyMuPDF/issues/3301)：在分类链接为 LINK_URI
    类型时更宽松。'
- en: '**Fixed** [3306](https://github.com/pymupdf/PyMuPDF/issues/3306): Text containing
    capital ‘ET’ not appearing as annotation'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3306](https://github.com/pymupdf/PyMuPDF/issues/3306)：包含大写‘ET’的文本未显示为注释。'
- en: 'Other:'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Use MuPDF-1.24.1.
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MuPDF-1.24.1。
- en: Support ObjStm Compression. Methods [`Document.save()`](document.html#Document.save
    "Document.save"), [`Document.ez_save()`](document.html#Document.ez_save "Document.ez_save")
    and `Document.write()` now support new parameters `use_objstm`, compression_effort`
    and `preserve_metadata`.
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持 ObjStm 压缩。方法 [`Document.save()`](document.html#Document.save "Document.save"),
    [`Document.ez_save()`](document.html#Document.ez_save "Document.ez_save") 和 `Document.write()`
    现在支持新参数 `use_objstm`, `compression_effort` 和 `preserve_metadata`。
- en: '**Changes in version 1.24.0 (2024-03-21)**'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.24.0 版本（2024-03-21）的变更**'
- en: 'Fixed issues:'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复问题：
- en: '**Fixed** [3281](https://github.com/pymupdf/PyMuPDF/issues/3281): Preparing
    metadata (pyproject.toml) did not run successfully'
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3281](https://github.com/pymupdf/PyMuPDF/issues/3281)：准备元数据（pyproject.toml）未成功运行。'
- en: '**Fixed** [3279](https://github.com/pymupdf/PyMuPDF/issues/3279): PyMuPDF no
    longer builds in Alpine Linux'
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3279](https://github.com/pymupdf/PyMuPDF/issues/3279)：PyMuPDF 不再在 Alpine
    Linux 中构建。'
- en: '**Fixed** [3257](https://github.com/pymupdf/PyMuPDF/issues/3257): apply_redactions()
    deleting text outside of annoted box'
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3257](https://github.com/pymupdf/PyMuPDF/issues/3257)：`apply_redactions()`
    删除了注释框外的文本。'
- en: '**Fixed** [3216](https://github.com/pymupdf/PyMuPDF/issues/3216): AttributeError:
    ‘Annot’ object has no attribute ‘__del__’'
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3216](https://github.com/pymupdf/PyMuPDF/issues/3216)：AttributeError：‘Annot’
    对象没有 ‘__del__’ 属性。'
- en: '**Fixed** [3207](https://github.com/pymupdf/PyMuPDF/issues/3207): get_drawings’s
    items is missing line from h path operator'
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3207](https://github.com/pymupdf/PyMuPDF/issues/3207)：`get_drawings`
    的项缺少 h 路径操作符的行。'
- en: '**Fixed** [3201](https://github.com/pymupdf/PyMuPDF/issues/3201): Memory leaks
    when merging PDFs'
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3201](https://github.com/pymupdf/PyMuPDF/issues/3201)：合并 PDF 时存在内存泄漏。'
- en: '**Fixed** [3197](https://github.com/pymupdf/PyMuPDF/issues/3197): page.get_text()
    returns hexadecimal text for some characters'
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3197](https://github.com/pymupdf/PyMuPDF/issues/3197)：`page.get_text()`
    对一些字符返回十六进制文本。'
- en: '**Fixed** [3196](https://github.com/pymupdf/PyMuPDF/issues/3196): Remove text
    not working in 1.23.25 version vs 1.20.2'
  id: totrans-59
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3196](https://github.com/pymupdf/PyMuPDF/issues/3196)：在 1.23.25 版本与
    1.20.2 版本中移除文本不起作用。'
- en: '**Fixed** [3172](https://github.com/pymupdf/PyMuPDF/issues/3172): PDF’s 45º
    lines dissapearing in png conversion'
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3172](https://github.com/pymupdf/PyMuPDF/issues/3172)：PDF 的 45º 线条在
    PNG 转换中消失。'
- en: '**Fixed** [3135](https://github.com/pymupdf/PyMuPDF/issues/3135): Do not log
    warnings to stdout'
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3135](https://github.com/pymupdf/PyMuPDF/issues/3135)：不要将警告记录到标准输出。'
- en: '**Fixed** [3125](https://github.com/pymupdf/PyMuPDF/issues/3125): get_pixmap
    method stuck on one page and runs forever'
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3125](https://github.com/pymupdf/PyMuPDF/issues/3125)：`get_pixmap`
    方法在一页上卡住且永远运行。'
- en: '**Fixed** [2964](https://github.com/pymupdf/PyMuPDF/issues/2964): There is
    an issue with the image generated by the page.get_pixmap() function'
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2964](https://github.com/pymupdf/PyMuPDF/issues/2964)：页面生成的图像存在问题。'
- en: 'Other:'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Use MuPDF-1.24.0.
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MuPDF-1.24.0。
- en: Add support for redacting vector graphics.
  id: totrans-66
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加对遮盖矢量图形的支持。
- en: Several fixes for table module
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对表模块进行了几处修复。
- en: Add new method for outputting the table as a markdown string.
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加将表输出为 Markdown 字符串的新方法。
- en: 'Address errors in computing the table header object:'
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解决计算表头对象中的错误：
- en: We now allow None as the cell value, because this will be resolved where needed
    (e.g. in the pandas DataFrame).
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在我们允许空值作为单元格值，因为这将在需要时解决（例如在 pandas DataFrame 中）。
- en: We previously tried to enforce rect-like tuples in all header cell bboxes, however
    this fails for tables with all-None columns. This fix enables this and constructs
    an empty string in the corresponding cell string.
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们之前试图强制在所有标题单元格 bboxes 中使用 rect-like 元组，然而对于所有空列的表格来说，这是失败的。此修复使其生效，并在对应单元格字符串中构造空字符串。
- en: We now correctly include start / stop points of lines in the bbox of the clustered
    graphic. We previously joined the line’s rectangle - which had no effect because
    this is always empty.
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在在聚类图形的 bbox 中正确包括线条的起始 / 终止点。我们之前连接了线条的矩形 - 这没有效果，因为它总是空的。
- en: Improved exception text if we fail to open document.
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们无法打开文档，则改进异常文本。
- en: Fixed build with new libclang 18.
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用新的 libclang 18 构建修复。
- en: '**Changes in version 1.23.26 (2024-02-29)**'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.26（2024-02-29）中的更改**'
- en: 'Fixed issues:'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复问题：
- en: '**Fixed** [3199](https://github.com/pymupdf/PyMuPDF/issues/3199): Add entry_points
    to setuptools configuration to provide command-line console scripts'
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3199](https://github.com/pymupdf/PyMuPDF/issues/3199)：将 entry_points
    添加到 setuptools 配置以提供命令行控制台脚本'
- en: '**Fixed** [3209](https://github.com/pymupdf/PyMuPDF/issues/3209): Empty vertices
    in ink annotation'
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3209](https://github.com/pymupdf/PyMuPDF/issues/3209)：墨迹注释中的空顶点'
- en: 'Other:'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'Improvements to table detection:'
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进表格检测：
- en: Improved check for empty tables, fixes bugs when determining table headers.
  id: totrans-81
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进检查空表格，修复确定表格标题时的错误。
- en: Improved computation of enveloping vector graphic rectangles.
  id: totrans-82
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进包围矢量图形矩形的计算。
- en: Ignore more meaningless “pseudo” tables
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 忽略更多无意义的“伪”表格
- en: Install command-line ‘pymupdf’ command that runs fitz/__main__.py.
  id: totrans-84
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装命令行 'pymupdf' 命令，运行 fitz/__main__.py。
- en: Don’t overwrite MuPDF’s config.h when building on non-Windows.
  id: totrans-85
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在非 Windows 系统上构建时，不要覆盖 MuPDF 的 config.h。
- en: Fix [Story](story-class.html#story) constructor’s [Archive](archive-class.html#archive)
    arg to match docs - now accepts a single [Archive](archive-class.html#archive)
    constructor arg.
  id: totrans-86
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复 [Story](story-class.html#story) 构造函数的 [Archive](archive-class.html#archive)
    参数以匹配文档 - 现在接受单个 [Archive](archive-class.html#archive) 构造函数参数。
- en: Do not include MuPDF source in sdist; will be downloaded automatically when
    building.
  id: totrans-87
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在构建时不包括 MuPDF 源代码；将在构建时自动下载。
- en: '**Changes in version 1.23.25 (2024-02-20)**'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.25（2024-02-20）中的更改**'
- en: 'Fixed issues:'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复问题：
- en: '**Fixed** [3182](https://github.com/pymupdf/PyMuPDF/issues/3182): Pixmap.invert_irect
    argument type error'
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3182](https://github.com/pymupdf/PyMuPDF/issues/3182)：Pixmap.invert_irect
    参数类型错误'
- en: '**Fixed** [3186](https://github.com/pymupdf/PyMuPDF/issues/3186): extractText()
    extracts broken text from pdf'
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3186](https://github.com/pymupdf/PyMuPDF/issues/3186)：extractText()
    从 pdf 中提取的文本损坏'
- en: '**Fixed** [3191](https://github.com/pymupdf/PyMuPDF/issues/3191): Error on
    .find_tables()'
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3191](https://github.com/pymupdf/PyMuPDF/issues/3191)：.find_tables()
    出现错误'
- en: 'Other:'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: When building, be able to specify python-config directly, with environment variable
    `PIPCL_PYTHON_CONFIG`.
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在构建时，能够直接指定 python-config，使用环境变量 `PIPCL_PYTHON_CONFIG`。
- en: '**Changes in version 1.23.24 (2024-02-19)**'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.24（2024-02-19）中的更改**'
- en: 'Fixed issues:'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复问题：
- en: '**Fixed** [3148](https://github.com/pymupdf/PyMuPDF/issues/3148): Table extraction
    - vertical text not handled correctly'
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3148](https://github.com/pymupdf/PyMuPDF/issues/3148)：表格提取 - 垂直文本处理不正确'
- en: '**Fixed** [3179](https://github.com/pymupdf/PyMuPDF/issues/3179): Table Detection:
    Incorrect Separation of Vector Graphics Clusters'
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3179](https://github.com/pymupdf/PyMuPDF/issues/3179)：表格检测：矢量图形簇分离不正确'
- en: '**Fixed** [3180](https://github.com/pymupdf/PyMuPDF/issues/3180): Cannot show
    optional content group: AttributeError: module ‘fitz.mupdf’ has no attribute ‘pdf_array_push_drop’'
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3180](https://github.com/pymupdf/PyMuPDF/issues/3180)：无法显示可选内容组：AttributeError:
    模块 ''fitz.mupdf'' 没有属性 ''pdf_array_push_drop'''
- en: 'Other:'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Be able to test system install using `sudo pip install` instead of a venv.
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 能够使用 `sudo pip install` 而不是 venv 测试系统安装。
- en: '**Changes in version 1.23.23 (2024-02-18)**'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.23（2024-02-18）中的更改**'
- en: 'Fixed issues:'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复问题：
- en: '**Fixed** [3126](https://github.com/pymupdf/PyMuPDF/issues/3126): Initialising
    Archive with a pathlib.Path fails.'
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3126](https://github.com/pymupdf/PyMuPDF/issues/3126)：使用 pathlib.Path
    初始化存档失败。'
- en: '**Fixed** [3131](https://github.com/pymupdf/PyMuPDF/issues/3131): Calling the
    next attribute of an Annot raises a “No attribute .parent” warning'
  id: totrans-105
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3131](https://github.com/pymupdf/PyMuPDF/issues/3131)：调用注释的下一个属性会引发“没有属性
    .parent”警告'
- en: '**Fixed** [3134](https://github.com/pymupdf/PyMuPDF/issues/3134): Using an
    IRect as clip parameter in Page.get_pixmap no longer works since 1.23.9'
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3134](https://github.com/pymupdf/PyMuPDF/issues/3134)：在 Page.get_pixmap
    中使用 IRect 作为剪辑参数自 1.23.9 以来不再工作'
- en: '**Fixed** [3140](https://github.com/pymupdf/PyMuPDF/issues/3140): PDF document
    stays in use after closing'
  id: totrans-107
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3140](https://github.com/pymupdf/PyMuPDF/issues/3140)：关闭文档后 PDF 文档仍在使用中。'
- en: '**Fixed** [3150](https://github.com/pymupdf/PyMuPDF/issues/3150): doc.select()
    hangs on this doc.'
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3150](https://github.com/pymupdf/PyMuPDF/issues/3150)：doc.select()
    在此文档上挂起。'
- en: '**Fixed** [3163](https://github.com/pymupdf/PyMuPDF/issues/3163): AssertionError
    on using fitz.IRect'
  id: totrans-109
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3163](https://github.com/pymupdf/PyMuPDF/issues/3163)：使用 fitz.IRect
    时出现 AssertionError。'
- en: '**Fixed** [3177](https://github.com/pymupdf/PyMuPDF/issues/3177): fitz.Pixmap(None,
    pix) Unrecognised args for constructing Pixmap'
  id: totrans-110
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3177](https://github.com/pymupdf/PyMuPDF/issues/3177)：构造 Pixmap 时 Unrecognised
    args for Pixmap。'
- en: 'Other:'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Improved ``Document.select() by using new MuPDF function `pdf_rearrange_pages()``.
    This is a more complete (and faster) implementation of what needs to be done here
    in that not only pages will be rearranged, but also consequential changes will
    be made to the table of contents, links to removed pages and affected entries
    in the Optional Content definitions.
  id: totrans-112
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用新的 MuPDF 函数 `pdf_rearrange_pages()` 改进了 `Document.select()`。这是对所需操作更完整（且更快速）的实现，不仅会重新排列页面，还会对目录、链接到已删除页面的链接以及可选内容定义中受影响的条目进行相关更改。
- en: '[`TextWriter.appendv()`](textwriter.html#TextWriter.appendv "TextWriter.appendv"):
    added `small_caps` arg.'
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`TextWriter.appendv()`](textwriter.html#TextWriter.appendv "TextWriter.appendv")：添加了
    `small_caps` 参数。'
- en: Fixed some valgrind errors with MuPDF master.
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过 MuPDF 主版本修复了一些 valgrind 错误。
- en: Fixed `Document.insert_image()` when build with MuPDF master.
  id: totrans-115
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了使用 MuPDF 主版本构建时的 `Document.insert_image()`。
- en: '**Changes in version 1.23.22 (2024-02-12)**'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.22（2024-02-12）中的更改**'
- en: 'Fixed issues:'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复的问题：
- en: '**Fixed** [3143](https://github.com/pymupdf/PyMuPDF/issues/3143): Difference
    in decoding of OCGs names between doc.get_ocgs() and page.get_drawings()'
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3143](https://github.com/pymupdf/PyMuPDF/issues/3143)：doc.get_ocgs()
    和 page.get_drawings() 之间 OCGs 名称解码差异。'
- en: '**Fixed** [3139](https://github.com/pymupdf/PyMuPDF/issues/3139): Pixmap resizing
    needs positional arg “clip” - even if None.'
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3139](https://github.com/pymupdf/PyMuPDF/issues/3139)：Pixmap 调整大小需要位置参数“clip”
    - 即使为 None。'
- en: 'Other:'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Removed the use of MuPDF function `fz_image_size()` from PyMuPDF.
  id: totrans-121
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了 PyMuPDF 中对 MuPDF 函数 `fz_image_size()` 的使用。
- en: '**Changes in version 1.23.21 (2024-02-01)**'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.21（2024-02-01）中的更改**'
- en: 'Fixed issues:'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复的问题：
- en: 'Other:'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'Fixed bug in set_xml_metadata(), PR [`3112 https://github.com/pymupdf/PyMuPDF/pull/3112>`_](#id352):
    Fix pdf_add_stream metadata error'
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 set_xml_metadata() 中修复了错误，PR [`3112 https://github.com/pymupdf/PyMuPDF/pull/3112>`_](#id352)：修复
    pdf_add_stream 元数据错误。
- en: Fixed lack of `.parent` member in [TextPage](textpage.html#textpage) from `Annot.get_textpage()`.
  id: totrans-126
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 [`TextPage`](textpage.html#textpage) 中缺少 `.parent` 成员的问题，从 `Annot.get_textpage()`
    中。
- en: Fixed bug in [`Page.add_widget()`](page.html#Page.add_widget "Page.add_widget").
  id: totrans-127
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 [`Page.add_widget()`](page.html#Page.add_widget "Page.add_widget") 中的错误。
- en: '**Changes in version 1.23.20 (2024-01-29)**'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.20（2024-01-29）中的更改**'
- en: 'Bug fixes:'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3100](https://github.com/pymupdf/PyMuPDF/issues/3100): Wrong internal
    property accessed in get_xml_metadata'
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3100](https://github.com/pymupdf/PyMuPDF/issues/3100)：在 get_xml_metadata
    中访问错误的内部属性。'
- en: 'Other:'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Significantly improved speed of [`Document.get_toc()`](document.html#Document.get_toc
    "Document.get_toc").
  id: totrans-132
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显著提高了 [`Document.get_toc()`](document.html#Document.get_toc "Document.get_toc")
    的速度。
- en: '**Changes in version 1.23.19 (2024-01-25)**'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.19（2024-01-25）中的更改**'
- en: 'Bug fixes:'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3087](https://github.com/pymupdf/PyMuPDF/issues/3087): Exception
    in insert_image with mask specified'
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3087](https://github.com/pymupdf/PyMuPDF/issues/3087)：在指定掩码时插入图像时出现异常。'
- en: '**Fixed** [3094](https://github.com/pymupdf/PyMuPDF/issues/3094): TypeError:
    ‘<’ not supported between instances of ‘FzLocation’ and ‘int’ in doc.delete_pages'
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3094](https://github.com/pymupdf/PyMuPDF/issues/3094)：在 doc.delete_pages
    中访问到错误的内部属性 TypeError: ‘<’ not supported between instances of ‘FzLocation’ and
    ‘int’。'
- en: 'Other:'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'When finding tables:'
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在查找表格时：
- en: Allow addition of user-defined “virtual” vector graphics when finding tables.
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在查找表格时添加用户定义的“虚拟”矢量图形。
- en: Confirm that the enveloping bboxes of vector graphics are inside the clip rectangle.
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确认矢量图形的包围框是否在剪切矩形内。
- en: Avoid slow finding of rectangle intersections.
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免缓慢的矩形相交查找。
- en: Added [`Font.bbox`](font.html#Font.bbox "Font.bbox") property.
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 [`Font.bbox`](font.html#Font.bbox "Font.bbox") 属性。
- en: '**Changes in version 1.23.18 (2024-01-23)**'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.18（2024-01-23）中的更改**'
- en: 'Bug fixes:'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3081](https://github.com/pymupdf/PyMuPDF/issues/3081): doc.close()
    not closing the document'
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3081](https://github.com/pymupdf/PyMuPDF/issues/3081)：doc.close() 未关闭文档。'
- en: 'Other:'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Reduced size of sdist to fit on pypi.org (by reducing size of two test files).
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减小了 sdist 的大小，以适应 pypi.org（通过减小两个测试文件的大小）。
- en: Fix [`Annot.file_info()`](annot.html#Annot.file_info "Annot.file_info") if no
    `Desc` item.
  id: totrans-148
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 [`Annot.file_info()`](annot.html#Annot.file_info "Annot.file_info") 如果没有
    `Desc` 项的问题。
- en: '**Changes in version 1.23.17 (2024-01-22)**'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.17（2024-01-22）的变更**'
- en: 'Bug fixes:'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3062](https://github.com/pymupdf/PyMuPDF/issues/3062): page_rotation_reset
    does not return page to original rotation'
  id: totrans-151
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3062](https://github.com/pymupdf/PyMuPDF/issues/3062)：`page_rotation_reset`
    不会将页面返回到原始旋转。'
- en: '**Fixed** [3070](https://github.com/pymupdf/PyMuPDF/issues/3070): update_link():
    AttributeError: ‘Page’ object has no attribute ‘super’'
  id: totrans-152
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3070](https://github.com/pymupdf/PyMuPDF/issues/3070)：`update_link()`：AttributeError：''Page''
    对象没有 ''super'' 属性。'
- en: 'Other:'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'Fixed bug in [`Page.links()`](page.html#Page.links "Page.links") (PR #3075).'
  id: totrans-154
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '修复了 [`Page.links()`](page.html#Page.links "Page.links") 中的 bug（PR #3075）。'
- en: Fixed bug in [`Page.get_bboxlog()`](functions.html#Page.get_bboxlog "Page.get_bboxlog")
    with layers.
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 [`Page.get_bboxlog()`](functions.html#Page.get_bboxlog "Page.get_bboxlog")
    在使用层时的 bug。
- en: Add support for timeouts in scripts/ and tests/run_compound.py.
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在脚本和测试中增加对超时的支持，例如 `scripts/` 和 `tests/run_compound.py`。
- en: '**Changes in version 1.23.16 (2024-01-18)**'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.16（2024-01-18）的变更**'
- en: 'Bug fixes:'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3058](https://github.com/pymupdf/PyMuPDF/issues/3058): Pixmap created
    from CMYK JPEG delivers RGB format'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3058](https://github.com/pymupdf/PyMuPDF/issues/3058)：从 CMYK JPEG 创建的
    Pixmap 提供 RGB 格式。'
- en: 'Other:'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: In table detection strategy “lines_strict”, exclude fill-only vector graphics.
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在表检测策略“lines_strict”中排除仅填充的矢量图形。
- en: Fixed sysinstall test failure.
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 sysinstall 测试失败的问题。
- en: In documentation, update feature matrix with item about text writing.
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在文档中，更新特征矩阵，增加有关文本编写的项目。
- en: '**Changes in version 1.23.15 (2024-01-16)**'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.15（2024-01-16）的变更**'
- en: 'Bug fixes:'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3050](https://github.com/pymupdf/PyMuPDF/issues/3050): python3.9
    pix.set_pixel has something wrong in c.append( ord(i))'
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3050](https://github.com/pymupdf/PyMuPDF/issues/3050)：python3.9 中 `pix.set_pixel`
    在 `c.append( ord(i))` 方面存在问题。'
- en: 'Other:'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Improved docs for Page.find_tables().
  id: totrans-168
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了 `Page.find_tables()` 的文档。
- en: '**Changes in version 1.23.14 (2024-01-15)**'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.14（2024-01-15）的变更**'
- en: 'Bug fixes:'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3038](https://github.com/pymupdf/PyMuPDF/issues/3038): JM_pixmap_from_display_list
    > Assertion Error : Checking for wrong type'
  id: totrans-171
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3038](https://github.com/pymupdf/PyMuPDF/issues/3038)：JM_pixmap_from_display_list
    > 断言错误：检查错误类型。'
- en: '**Fixed** [3039](https://github.com/pymupdf/PyMuPDF/issues/3039): Issue with
    doc.close() not closing the document in PyMuPDF'
  id: totrans-172
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3039](https://github.com/pymupdf/PyMuPDF/issues/3039)：在 PyMuPDF 中 `doc.close()`
    不关闭文档的问题。'
- en: 'Other:'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Ensure valid “re” rectangles in [`Page.get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings") with derotated pages.
  id: totrans-174
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保在 [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")
    中的“derotated pages” 中有效的 “re” 矩形。
- en: '**Changes in version 1.23.13 (2024-01-15)**'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.13（2024-01-15）的变更**'
- en: 'Bug fixes:'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [2979](https://github.com/pymupdf/PyMuPDF/issues/2979): list index
    out of range in to_pandas()'
  id: totrans-177
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2979](https://github.com/pymupdf/PyMuPDF/issues/2979)：在 `to_pandas()`
    中出现列表索引超出范围。'
- en: '**Fixed** [3001](https://github.com/pymupdf/PyMuPDF/issues/3001): Calling find_tables()
    on one document alters the bounding boxes of a subsequent document'
  id: totrans-178
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3001](https://github.com/pymupdf/PyMuPDF/issues/3001)：在一个文档上调用 `find_tables()`
    会改变后续文档的边界框。'
- en: 'Other:'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Fixed [`Rect.height`](rect.html#Rect.height "Rect.height") and [`Rect.width`](rect.html#Rect.width
    "Rect.width") to never return negative values.
  id: totrans-180
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 [`Rect.height`](rect.html#Rect.height "Rect.height") 和 [`Rect.width`](rect.html#Rect.width
    "Rect.width") 以确保不返回负值。
- en: Fixed `TextPage.extractIMGINFO()`’s returned `dictkey_yres` value.
  id: totrans-181
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 `TextPage.extractIMGINFO()` 返回的 `dictkey_yres` 值。
- en: '**Changes in version 1.23.12 (2024-01-12)**'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.12（2024-01-12）的变更**'
- en: '**Fixed** [3027](https://github.com/pymupdf/PyMuPDF/issues/3027): Page.get_text
    throws Attribute Error for ‘parent’'
  id: totrans-183
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3027](https://github.com/pymupdf/PyMuPDF/issues/3027)：`Page.get_text`
    对于 ‘parent’ 抛出属性错误。'
- en: '**Changes in version 1.23.11 (2024-01-12)**'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.11（2024-01-12）的变更**'
- en: Fixed some Pixmap construction bugs.
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一些 Pixmap 构建错误。
- en: Fixed Pixmap.yres().
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 `Pixmap.yres()`。
- en: '**Changes in version 1.23.10 (2024-01-12)**'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.10（2024-01-12）的变更**'
- en: 'Bug fixes:'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [3020](https://github.com/pymupdf/PyMuPDF/issues/3020): Can’t resize
    a PixMap'
  id: totrans-189
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [3020](https://github.com/pymupdf/PyMuPDF/issues/3020)：无法调整 PixMap 的大小。'
- en: 'Other:'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Fixed Page.delete_image().
  id: totrans-191
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 `Page.delete_image()`。
- en: '**Changes in version 1.23.9 (2024-01-11)**'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.9（2024-01-11）的变更**'
- en: Default to new “rebased” implementation.
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认使用新的 “rebased” 实现。
- en: The old “classic” implementation is available with `import fitz_old as fitz`.
  id: totrans-194
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以通过 `import fitz_old as fitz` 使用旧的“经典”实现。
- en: 'For more information about why we are changing to the rebased implementation,
    see: [https://github.com/pymupdf/PyMuPDF/discussions/2680](https://github.com/pymupdf/PyMuPDF/discussions/2680)'
  id: totrans-195
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 欲了解更多有关我们为何转向基于 rebase 的实现，请参阅：[https://github.com/pymupdf/PyMuPDF/discussions/2680](https://github.com/pymupdf/PyMuPDF/discussions/2680)
- en: Use MuPDF-1.23.9.
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MuPDF-1.23.9。
- en: 'Bug fixes (rebased implementation only):'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Bug fixes (rebased implementation only):'
- en: '**Fixed** [2911](https://github.com/pymupdf/PyMuPDF/issues/2911): Page.derotation_matrix
    returns a tuple instead of a Matrix with rebased implementation'
  id: totrans-198
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2911](https://github.com/pymupdf/PyMuPDF/issues/2911): `Page.derotation_matrix`
    返回元组而非 Matrix，基于 rebase 的实现'
- en: '**Fixed** [2919](https://github.com/pymupdf/PyMuPDF/issues/2919): Rebased version:
    KeyError in resolve_names when merging pdfs'
  id: totrans-199
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2919](https://github.com/pymupdf/PyMuPDF/issues/2919): Rebase 版本：在合并
    PDF 时 resolve_names 中的 KeyError'
- en: '**Fixed** [2922](https://github.com/pymupdf/PyMuPDF/issues/2922): New feature
    that allows inserting named-destination links doesn’t work'
  id: totrans-200
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2922](https://github.com/pymupdf/PyMuPDF/issues/2922): 允许插入命名目标链接的新功能未生效'
- en: '**Fixed** [2943](https://github.com/pymupdf/PyMuPDF/issues/2943): ZeroDivisionError:
    float division by zero when use apply_redactions()'
  id: totrans-201
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2943](https://github.com/pymupdf/PyMuPDF/issues/2943): 在使用 `apply_redactions()`
    时出现的 ZeroDivisionError: float division by zero'
- en: '**Fixed** [2950](https://github.com/pymupdf/PyMuPDF/issues/2950): Shelling
    out to pip during tests is problematic'
  id: totrans-202
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2950](https://github.com/pymupdf/PyMuPDF/issues/2950): 在测试期间使用 pip
    调用出现问题'
- en: '**Fixed** [2954](https://github.com/pymupdf/PyMuPDF/issues/2954): Replacement
    unicode character in text extraction'
  id: totrans-203
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2954](https://github.com/pymupdf/PyMuPDF/issues/2954): 文本提取中替换的 Unicode
    字符'
- en: '**Fixed** [2957](https://github.com/pymupdf/PyMuPDF/issues/2957): apply_redactions()
    moving text'
  id: totrans-204
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2957](https://github.com/pymupdf/PyMuPDF/issues/2957): `apply_redactions()`
    移动文本'
- en: '**Fixed** [2961](https://github.com/pymupdf/PyMuPDF/issues/2961): Passing a
    string as a page number raises IndexError instead of TypeError.'
  id: totrans-205
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2961](https://github.com/pymupdf/PyMuPDF/issues/2961): 将字符串作为页码传递时引发
    IndexError 而非 TypeError。'
- en: '**Fixed** [2969](https://github.com/pymupdf/PyMuPDF/issues/2969): annot.next
    throws AttributeError'
  id: totrans-206
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2969](https://github.com/pymupdf/PyMuPDF/issues/2969): `annot.next`
    抛出 AttributeError'
- en: '**Fixed** [2978](https://github.com/pymupdf/PyMuPDF/issues/2978): 1.23.9rc1:
    module ‘fitz.mupdf’ has no attribute ‘fz_copy_pixmap_rect’'
  id: totrans-207
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2978](https://github.com/pymupdf/PyMuPDF/issues/2978): 1.23.9rc1: 模块
    ‘fitz.mupdf’ 没有属性 ‘fz_copy_pixmap_rect’'
- en: '**Fixed** [2907](https://github.com/pymupdf/PyMuPDF/issues/2907): segfault
    trying to call clean_contents on certain pdfs with python 3.12'
  id: totrans-208
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2907](https://github.com/pymupdf/PyMuPDF/issues/2907): 在某些 PDF 中使用
    Python 3.12 调用 `clean_contents` 时发生段错误'
- en: '**Fixed** [2905](https://github.com/pymupdf/PyMuPDF/issues/2905): SystemError:
    <built-in function TextPage_extractIMGINFO> returned a result with an exception
    set'
  id: totrans-209
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2905](https://github.com/pymupdf/PyMuPDF/issues/2905): SystemError:
    <built-in function TextPage_extractIMGINFO> 返回了一个带有异常的结果'
- en: '**Fixed** [2742](https://github.com/pymupdf/PyMuPDF/issues/2742): Segmentation
    Fault when inserting three (but not two) copies of the same source page into one
    destination page'
  id: totrans-210
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2742](https://github.com/pymupdf/PyMuPDF/issues/2742): 将同一源页面的三个副本插入一个目标页面时发生的段错误'
- en: 'Other:'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Add optional setting of opacity to [`Page.insert_htmlbox()`](page.html#Page.insert_htmlbox
    "Page.insert_htmlbox").
  id: totrans-212
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可选设置透明度到 [`Page.insert_htmlbox()`](page.html#Page.insert_htmlbox "Page.insert_htmlbox")。
- en: 'Fixed issue with add_redact_annot() mentioned in #2934.'
  id: totrans-213
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '修复在 #2934 中提到的 `add_redact_annot()` 问题。'
- en: Fixed [`Page.rotation()`](page.html#Page.rotation "Page.rotation") to return
    0 for non-PDF documents instead of raising an exception.
  id: totrans-214
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复 [`Page.rotation()`](page.html#Page.rotation "Page.rotation") 在非 PDF 文档中返回
    0 而非抛出异常。
- en: Fixed internal quad detection to cope with any Python sequence.
  id: totrans-215
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复内部四边形检测以应对任何 Python 序列。
- en: Fixed rebased `fitz.pymupdf_version_tuple` - was previously set to mupdf version.
  id: totrans-216
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复重置的 `fitz.pymupdf_version_tuple` - 之前设置为 mupdf 版本。
- en: Improved support for Linux system installs, including adding regular testing
    on Github.
  id: totrans-217
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进对 Linux 系统安装的支持，包括在 Github 上定期进行测试。
- en: Add missing `flake8` to `scripts/gh_release.py:test_packages`.
  id: totrans-218
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 `flake8` 添加到 `scripts/gh_release.py:test_packages` 中。
- en: Use newly public functions in MuPDF-1.23.8.
  id: totrans-219
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MuPDF-1.23.8 中的新公共函数。
- en: Improved `scripts/test.py` to help investigation of MuPDF issues.
  id: totrans-220
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进 `scripts/test.py` 以帮助调查 MuPDF 问题。
- en: '**Changes in version 1.23.8 (2023-12-19)**'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.23.8 版本变更（2023-12-19）**'
- en: 'Bug fixes (rebased implementation only):'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Bug fixes (rebased implementation only):'
- en: '**Fixed** [2634](https://github.com/pymupdf/PyMuPDF/issues/2634): get_toc and
    set_toc do not behave consistently for rotated pages'
  id: totrans-223
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2634](https://github.com/pymupdf/PyMuPDF/issues/2634): 对于旋转页面，`get_toc`
    和 `set_toc` 的行为不一致'
- en: '**Fixed** [2861](https://github.com/pymupdf/PyMuPDF/issues/2861): AttributeError
    in getLinkDict during PDF Merge'
  id: totrans-224
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2861](https://github.com/pymupdf/PyMuPDF/issues/2861)：在 PDF 合并期间的 getLinkDict
    中出现 AttributeError。'
- en: '**Fixed** [2871](https://github.com/pymupdf/PyMuPDF/issues/2871): KeyError
    in getLinkDict during PDF merge'
  id: totrans-225
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2871](https://github.com/pymupdf/PyMuPDF/issues/2871)：在 PDF 合并期间 getLinkDict
    中出现 KeyError。'
- en: '**Fixed** [2886](https://github.com/pymupdf/PyMuPDF/issues/2886): Error in
    Skeleton for Named Link Destinations'
  id: totrans-226
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2886](https://github.com/pymupdf/PyMuPDF/issues/2886)：在命名链接目标的 Skeleton
    中出现错误。'
- en: 'Bug fixes (rebased and classic implementations):'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复（重定位和经典实现）：
- en: '**Fixed** [2885](https://github.com/pymupdf/PyMuPDF/issues/2885): pymupdf find
    tables too slow'
  id: totrans-228
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2885](https://github.com/pymupdf/PyMuPDF/issues/2885)：pymupdf 查找表太慢。'
- en: 'Other:'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'Rebased implementation:'
  id: totrans-230
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重定位实现：
- en: '[`Page.insert_htmlbox()`](page.html#Page.insert_htmlbox "Page.insert_htmlbox"):
    new, much more powerful alternative to [`Page.insert_textbox()`](page.html#Page.insert_textbox
    "Page.insert_textbox") or [`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox"), using [Story](story-class.html#story).'
  id: totrans-231
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Page.insert_htmlbox()`](page.html#Page.insert_htmlbox "Page.insert_htmlbox")：使用[Story](story-class.html#story)的新的、更强大的替代[`Page.insert_textbox()`](page.html#Page.insert_textbox
    "Page.insert_textbox")或[`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox")，新增。'
- en: '`Story.fit*()`: new methods for fitting a Story into an expanded rect.'
  id: totrans-232
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Story.fit*()`：用于将 Story 安装到扩展的矩形中的新方法。'
- en: '[`Story.write_with_links()`](story-class.html#Story.write_with_links "Story.write_with_links"):
    add support for external links.'
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Story.write_with_links()`](story-class.html#Story.write_with_links "Story.write_with_links")：新增对外部链接的支持。'
- en: '`Document.language()`: fixed to use MuPDF’s new `mupdf.fz_string_from_text_language2()`.'
  id: totrans-234
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Document.language()`：修复为使用 MuPDF 的新`mupdf.fz_string_from_text_language2()`。'
- en: '[`Document.subset_fonts()`](document.html#Document.subset_fonts "Document.subset_fonts")
    - fixed.'
  id: totrans-235
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Document.subset_fonts()`](document.html#Document.subset_fonts "Document.subset_fonts")
    - 修复。'
- en: Fixed internal `Archive._add_treeitem()` method.
  id: totrans-236
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了内部的`Archive._add_treeitem()`方法。
- en: Fixed `fitz_new.__doc__` to contain PyMuPDF and Python version information,
    and OS name.
  id: totrans-237
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`fitz_new.__doc__`，内容包含了 PyMuPDF 和 Python 版本信息，以及操作系统名称。
- en: Removed use of `(*args, **kwargs)` in API, we now specify keyword args explicitly.
  id: totrans-238
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不再使用`(*args, **kwargs)`在 API 中，现在明确指定关键字参数。
- en: Work with new MuPDF Python exception classes.
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用新的 MuPDF Python 异常类。
- en: Fixed bug where [`button_states()`](widget.html#Widget.button_states "Widget.button_states")
    returns None when `/AP` points to an indirect object.
  id: totrans-240
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了当[`button_states()`](widget.html#Widget.button_states "Widget.button_states")指向间接对象时返回
    None 的错误。
- en: Fixed pillow test to not ignore all errors, and install pillow when testing.
  id: totrans-241
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 pillow 测试不再忽略所有错误，并在测试时安装 pillow。
- en: Added test for `fitz.css_for_pymupdf_font()` (uses package `pymupdf-fonts`).
  id: totrans-242
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对`fitz.css_for_pymupdf_font()`的测试（使用包`pymupdf-fonts`）。
- en: Simplified Github Actions test specifications.
  id: totrans-243
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简化了 Github Actions 的测试规范。
- en: Updated `tests/README.md`.
  id: totrans-244
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了`tests/README.md`。
- en: '**Changes in version 1.23.7 (2023-11-30)**'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.7 (2023-11-30) 中的更改**：'
- en: 'Bug fixes in rebased implementation, not fixed in classic implementation:'
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重定位实现中的 Bug 修复，在经典实现中未修复的。
- en: '**Fixed** [2232](https://github.com/pymupdf/PyMuPDF/issues/2232): Geometry
    helper classes should support keyword arguments'
  id: totrans-247
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2232](https://github.com/pymupdf/PyMuPDF/issues/2232)：几何辅助类应支持关键字参数。'
- en: '**Fixed** [2788](https://github.com/pymupdf/PyMuPDF/issues/2788): Problem with
    get_toc in pymupdf 1.23.6'
  id: totrans-248
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2788](https://github.com/pymupdf/PyMuPDF/issues/2788)：在 pymupdf 1.23.6
    中 get_toc 的问题。'
- en: '**Fixed** [2791](https://github.com/pymupdf/PyMuPDF/issues/2791): Experiencing
    small memory leak in save()'
  id: totrans-249
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2791](https://github.com/pymupdf/PyMuPDF/issues/2791)：在 save() 中出现了小内存泄漏。'
- en: 'Bug fixes (rebased and classic implementations):'
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复（重定位和经典实现）：
- en: '**Fixed** [2736](https://github.com/pymupdf/PyMuPDF/issues/2736): Failure when
    set cropbox with mediabox negative value'
  id: totrans-251
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2736](https://github.com/pymupdf/PyMuPDF/issues/2736)：使用负值 mediabox
    设置 cropbox 时失败。'
- en: '**Fixed** [2749](https://github.com/pymupdf/PyMuPDF/issues/2749): RuntimeError:
    cycle in structure tree'
  id: totrans-252
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2749](https://github.com/pymupdf/PyMuPDF/issues/2749)：RuntimeError:
    结构树中的循环。'
- en: '**Fixed** [2753](https://github.com/pymupdf/PyMuPDF/issues/2753): Story.write_with_links
    will ignore everything after the first “page break” in the HTML.'
  id: totrans-253
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2753](https://github.com/pymupdf/PyMuPDF/issues/2753)：Story.write_with_links
    将在 HTML 中的第一个“分页符”之后忽略所有内容。'
- en: '**Fixed** [2812](https://github.com/pymupdf/PyMuPDF/issues/2812): find_tables
    on landscape page generates reversed text'
  id: totrans-254
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2812](https://github.com/pymupdf/PyMuPDF/issues/2812)：横向页面上的 find_tables
    生成了反向文本。'
- en: '**Fixed** [2829](https://github.com/pymupdf/PyMuPDF/issues/2829): [cannot create
    /Annot for kind] is still printed despite #2345 is closed.'
  id: totrans-255
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2829](https://github.com/pymupdf/PyMuPDF/issues/2829): 尽管 #2345 已关闭，但仍打印
    [cannot create /Annot for kind]'
- en: '**Fixed** [2841](https://github.com/pymupdf/PyMuPDF/issues/2841): Unexpected
    KeyError when using scrub with fitz_new'
  id: totrans-256
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2841](https://github.com/pymupdf/PyMuPDF/issues/2841): 使用 scrub 时出现意外的
    KeyError'
- en: Use MuPDF-1.23.7.
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MuPDF-1.23.7。
- en: 'Other:'
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: 'Rebased implementation:'
  id: totrans-259
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: rebase 实现：
- en: Added flake8 code checking to test suite, and made various fixes.
  id: totrans-260
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 flake8 代码检查添加到测试套件，并进行了各种修复。
- en: Disable diagnostics during Document constructor to match classic implementation.
  id: totrans-261
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Document 构造函数期间禁用诊断，以匹配经典实现。
- en: 'Additional fix to [2553](https://github.com/pymupdf/PyMuPDF/issues/2553): Invalid
    characters in versions >= 1.22'
  id: totrans-262
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于 [2553](https://github.com/pymupdf/PyMuPDF/issues/2553) 的额外修复：版本 >= 1.22 中的无效字符
- en: 'Fixed [MuPDF Bug 707324](https://bugs.ghostscript.com/show_bug.cgi?id=707324):
    Story: HTML table row background color repeated incorrectly'
  id: totrans-263
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '修复 [MuPDF Bug 707324](https://bugs.ghostscript.com/show_bug.cgi?id=707324):
    故事：HTML 表格行背景色重复打印错误'
- en: Added `scripts/test.py`, for simple build+test of PyMuPDF git checkout.
  id: totrans-264
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 `scripts/test.py`，用于 PyMuPDF git 检出的简单构建+测试。
- en: Added `fitz.pymupdf_version_tuple`, e.g. `(1, 23, 6)`.
  id: totrans-265
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 `fitz.pymupdf_version_tuple`，例如 `(1, 23, 6)`。
- en: 'Restored mistakenly-reverted fix for [2345](https://github.com/pymupdf/PyMuPDF/issues/2345):
    Turn off print statements in utils.py'
  id: totrans-266
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 恢复了误删除的对 [2345](https://github.com/pymupdf/PyMuPDF/issues/2345) 的修复：关闭 utils.py
    中的打印语句
- en: Include any trailing `... repeated <N> times...` text in warnings returned by
    [`mupdf_warnings()`](tools.html#Tools.mupdf_warnings "Tools.mupdf_warnings") (rebased
    only).
  id: totrans-267
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 [`mupdf_warnings()`](tools.html#Tools.mupdf_warnings "Tools.mupdf_warnings")
    返回的警告中包含任何尾随的 `... 重复 <N> 次...` 文本（仅 rebase）。
- en: '**Changes in version 1.23.6 (2023-11-06)**'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.23.6 版本变更（2023-11-06）**'
- en: 'Bug fixes:'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [2553](https://github.com/pymupdf/PyMuPDF/issues/2553): Invalid characters
    in versions >= 1.22'
  id: totrans-270
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2553](https://github.com/pymupdf/PyMuPDF/issues/2553): 版本 >= 1.22 中的无效字符'
- en: '**Fixed** [2608](https://github.com/pymupdf/PyMuPDF/issues/2608): Incorrect
    utf32 text extraction (high & low surrogates are split)'
  id: totrans-271
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2608](https://github.com/pymupdf/PyMuPDF/issues/2608): 不正确的 utf32 文本提取（高低代理项被分割）'
- en: '**Fixed** [2710](https://github.com/pymupdf/PyMuPDF/issues/2710): page.rect
    and text location wrong / differing from older version'
  id: totrans-272
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2710](https://github.com/pymupdf/PyMuPDF/issues/2710): page.rect 和文本位置错误
    / 与旧版本不同'
- en: '**Fixed** [2774](https://github.com/pymupdf/PyMuPDF/issues/2774): wrong encoding
    for “?” character when sort=True'
  id: totrans-273
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2774](https://github.com/pymupdf/PyMuPDF/issues/2774): 排序为 True 时，对
    “?” 字符的错误编码'
- en: '**Fixed** [2775](https://github.com/pymupdf/PyMuPDF/issues/2775): fitz_new
    does not work with python3.10 or earlier'
  id: totrans-274
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2775](https://github.com/pymupdf/PyMuPDF/issues/2775): fitz_new 与 python3.10
    或更早版本不兼容'
- en: '**Fixed** [2777](https://github.com/pymupdf/PyMuPDF/issues/2777): With fitz_new,
    wrong type for Page.mediabox'
  id: totrans-275
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2777](https://github.com/pymupdf/PyMuPDF/issues/2777): 使用 fitz_new
    时，Page.mediabox 的类型错误'
- en: 'Other:'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Use MuPDF-1.23.5.
  id: totrans-277
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MuPDF-1.23.5。
- en: Added Document.resolve_names() (rebased implementation only).
  id: totrans-278
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 Document.resolve_names()（仅 rebase 实现）。
- en: '**Changes in version 1.23.5 (2023-10-11)**'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.23.5 版本变更（2023-10-11）**'
- en: 'Bug fixes:'
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [2341](https://github.com/pymupdf/PyMuPDF/issues/2341): Handling
    negative values in the zoom section for LINK_GOTO in linkDest'
  id: totrans-281
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2341](https://github.com/pymupdf/PyMuPDF/issues/2341): 处理 LINK_GOTO
    中缩放部分的负值'
- en: '**Fixed** [2522](https://github.com/pymupdf/PyMuPDF/issues/2522): Typo in set_layer()
    - NameError: name ‘f’ is not defined'
  id: totrans-282
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2522](https://github.com/pymupdf/PyMuPDF/issues/2522): set_layer()
    中的拼写错误 - NameError: name ‘f’ is not defined'
- en: '**Fixed** [2548](https://github.com/pymupdf/PyMuPDF/issues/2548): Fitz freezes
    on some PDFs when calling the fitz.Page.get_text_blocks method.'
  id: totrans-283
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2548](https://github.com/pymupdf/PyMuPDF/issues/2548): 在调用 fitz.Page.get_text_blocks
    方法时，某些 PDF 中 Fitz 卡死'
- en: '**Fixed** [2596](https://github.com/pymupdf/PyMuPDF/issues/2596): save(garbage=3)
    breaks get_pixmap() with side effect'
  id: totrans-284
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2596](https://github.com/pymupdf/PyMuPDF/issues/2596): save(garbage=3)
    破坏了 get_pixmap() 的副作用'
- en: '**Fixed** [2635](https://github.com/pymupdf/PyMuPDF/issues/2635): “clean=True”
    makes objects invisible in the pdf'
  id: totrans-285
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2635](https://github.com/pymupdf/PyMuPDF/issues/2635): “clean=True”
    使 PDF 中的对象不可见'
- en: '**Fixed** [2637](https://github.com/pymupdf/PyMuPDF/issues/2637): Page.insert_textbox
    incorrectly handles the last word if it starts a new line'
  id: totrans-286
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2637](https://github.com/pymupdf/PyMuPDF/issues/2637): Page.insert_textbox
    在处理新行的最后一个词时出现错误'
- en: '**Fixed** [2699](https://github.com/pymupdf/PyMuPDF/issues/2699): extract paragraph
    with below table'
  id: totrans-287
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2699](https://github.com/pymupdf/PyMuPDF/issues/2699): 提取段落时与表格下方的问题'
- en: '**Fixed** [2703](https://github.com/pymupdf/PyMuPDF/issues/2703): Wrong fontsize
    calculation in corner cases (“page.get_texttrace()”)'
  id: totrans-288
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2703](https://github.com/pymupdf/PyMuPDF/issues/2703)：角落情况下错误的字体大小计算（“page.get_texttrace()”）'
- en: '**Fixed** [2710](https://github.com/pymupdf/PyMuPDF/issues/2710): page.rect
    and text location wrong / differing from older version'
  id: totrans-289
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2710](https://github.com/pymupdf/PyMuPDF/issues/2710)：page.rect 和文本位置错误
    / 与旧版本不同'
- en: '**Fixed** [2723](https://github.com/pymupdf/PyMuPDF/issues/2723): When will
    a Python 3.12 wheel be available?'
  id: totrans-290
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2723](https://github.com/pymupdf/PyMuPDF/issues/2723)：Python 3.12 wheel
    何时可用？'
- en: '**Fixed** [2730](https://github.com/pymupdf/PyMuPDF/issues/2730): persistent
    get_text() formatting'
  id: totrans-291
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2730](https://github.com/pymupdf/PyMuPDF/issues/2730)：持久的 get_text()
    格式化'
- en: 'Other:'
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Use MuPDF-1.23.4.
  id: totrans-293
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MuPDF-1.23.4。
- en: Fix optimisation flags with system installs.
  id: totrans-294
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了系统安装中的优化标志。
- en: Fixed the problem that the clip parameter does not take effect during table
    recognition
  id: totrans-295
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了表格识别期间 clip 参数不起作用的问题
- en: Support Pillow mode “RGBa”
  id: totrans-296
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持 Pillow 模式“RGBa”
- en: Support extra word delimiters
  id: totrans-297
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持额外的单词分隔符
- en: Support checking valid PDF name objects
  id: totrans-298
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持检查有效的 PDF 名称对象
- en: '**Changes in version 1.23.4 (2023-09-26)**'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.4（2023-09-26）中的更改**'
- en: Improved build instructions.
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进的构建说明。
- en: Fixed Tesseract in rebased implementation.
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 rebased 实现中的 Tesseract。
- en: Improvements to build/install with system MuPDF.
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了使用系统 MuPDF 的构建/安装。
- en: Fixed Pyodide builds.
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 Pyodide 构建。
- en: Fixed rebased bug in _insert_image().
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 _insert_image() 中的 rebased bug。
- en: 'Bug fixes:'
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [2556](https://github.com/pymupdf/PyMuPDF/issues/2556): Segmentation
    fault at caling get_cdrawings(extended=True)'
  id: totrans-306
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2556](https://github.com/pymupdf/PyMuPDF/issues/2556)：调用 get_cdrawings(extended=True)
    时出现分段错误'
- en: '**Fixed** [2637](https://github.com/pymupdf/PyMuPDF/issues/2637): Page.insert_textbox
    incorrectly handles the last word if it starts a new line'
  id: totrans-307
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2637](https://github.com/pymupdf/PyMuPDF/issues/2637)：Page.insert_textbox
    错误地处理最后一个字，如果它开始一个新行'
- en: '**Fixed** [2683](https://github.com/pymupdf/PyMuPDF/issues/2683): Windows sdist
    build failure - non-quoting of path and using UNIX which command'
  id: totrans-308
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2683](https://github.com/pymupdf/PyMuPDF/issues/2683)：Windows sdist
    构建失败 - 路径未加引号并使用 UNIX 的 which 命令'
- en: '**Fixed** [2691](https://github.com/pymupdf/PyMuPDF/issues/2691): Page.get_textpage_ocr()
    bug in rebased fitz_new version'
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2691](https://github.com/pymupdf/PyMuPDF/issues/2691)：Page.get_textpage_ocr()
    在 rebased fitz_new 版本中的 bug'
- en: '**Fixed** [2692](https://github.com/pymupdf/PyMuPDF/issues/2692): Page.get_pixmap(clip=Rect())
    bug in rebased fitz_new version'
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [2692](https://github.com/pymupdf/PyMuPDF/issues/2692)：Page.get_pixmap(clip=Rect())
    在 rebased fitz_new 版本中的 bug'
- en: '**Changes in version 1.23.3 (2023-08-31)**'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.3（2023-08-31）中的更改**'
- en: Fixed use of Tesseract for OCR.
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 OCR 的 Tesseract 使用。
- en: '**Changes in version 1.23.2 (2023-08-28)**'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.2（2023-08-28）中的更改**'
- en: '**Fixed** [#2613](https://github.com/pymupdf/PyMuPDF/issues/2613): release
    1.23.0 not MacOS-arm64 compatible'
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2613](https://github.com/pymupdf/PyMuPDF/issues/2613)：发布 1.23.0 不兼容
    MacOS-arm64'
- en: '**Changes in version 1.23.1 (2023-08-24)**'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.1（2023-08-24）中的更改**'
- en: Updated README and package summary description.
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了 README 和包摘要描述。
- en: 'Fixed a problem on some Linux installations with Python-3.10 (and possibly
    earlier versions) where `import fitz` failed with `ImportError: libcrypt.so.2:
    cannot open shared object file: No such file or directory`.'
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '修复了一些 Linux 安装上的问题，Python-3.10（以及可能的早期版本）中`import fitz`失败，出现`ImportError: libcrypt.so.2:
    cannot open shared object file: No such file or directory`。'
- en: Fixed `incompatible architecture` error on MacOS arm64.
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 MacOS arm64 上的`incompatible architecture`错误。
- en: Fixed installation warning from Poetry about missing entry in wheels’ RECORD
    files.
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 Poetry 关于缺少 wheels’ RECORD 文件中条目的安装警告。
- en: '**Changes in version 1.23.0 (2023-08-22)**'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.23.0（2023-08-22）中的更改**'
- en: Add method [`find_tables()`](page.html#Page.find_tables "Page.find_tables")
    to the [Page](page.html#page) object.
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加方法[`find_tables()`](page.html#Page.find_tables "Page.find_tables")到 [Page](page.html#page)
    对象。
- en: This allows locating tables on any supported document page, and extracting table
    content by cell.
  id: totrans-322
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这允许在任何支持的文档页面上定位表格，并通过单元格提取表格内容。
- en: New “rebased” implementation of PyMuPDF.
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PyMuPDF 的新的“rebased”实现。
- en: The rebased implementation is available as Python module `fitz_new`. It can
    be used as a drop-in replacement with `import fitz_new as fitz`.
  id: totrans-324
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: rebased 实现可用作 Python 模块`fitz_new`。它可以用作`import fitz_new as fitz`的直接替换。
- en: Python-independent MuPDF libraries are now in a second wheel called `PyMuPDFb`
    that will be automatically installed by pip.
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 独立的 MuPDF 库现在在第二个名为`PyMuPDFb`的 wheel 中，pip 将自动安装它。
- en: This is to save space on pypi.org - a full release only needs one `PyMuPDFb`
    wheel for each OS.
  id: totrans-326
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这是为了节省空间在 pypi.org 上 - 一个完整的发布只需要一个`PyMuPDFb` wheel 对于每个操作系统。
- en: 'Bug fixes:'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [#2542](https://github.com/pymupdf/PyMuPDF/issues/2542): fitz.utils.scrub
    AttributeError Annot object has no attribute fileUpd inside'
  id: totrans-328
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2542](https://github.com/pymupdf/PyMuPDF/issues/2542)：`fitz.utils.scrub`
    属性错误，`Annot` 对象内没有 `fileUpd` 属性。'
- en: '**Fixed** [#2533](https://github.com/pymupdf/PyMuPDF/issues/2533): get_texttrace
    returned a incorrect character bbox'
  id: totrans-329
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2533](https://github.com/pymupdf/PyMuPDF/issues/2533)：`get_texttrace`
    返回了一个不正确的字符边界框。'
- en: '**Fixed** [#2537](https://github.com/pymupdf/PyMuPDF/issues/2537): Validation
    when setting a grouped RadioButton throws a RuntimeError: path to ‘V’ has indirects'
  id: totrans-330
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2537](https://github.com/pymupdf/PyMuPDF/issues/2537)：在设置分组 RadioButton
    时验证会抛出 RuntimeError：路径到 ‘V’ 具有间接引用。'
- en: 'Other changes:'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他变更：
- en: Dropped support for Python-3.7.
  id: totrans-332
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不再支持 Python-3.7。
- en: Fix for wrong page / annot `/Contents` cleaning.
  id: totrans-333
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了错误的页面 / 注释 `/Contents` 清理。
- en: We need to set `pdf_filter_options::no_update` to zero.
  id: totrans-334
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们需要将 `pdf_filter_options::no_update` 设置为零。
- en: Added new function get_tessdata().
  id: totrans-335
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的函数 `get_tessdata()`。
- en: Cope with problem `/Annot` arrays.
  id: totrans-336
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理问题 `/Annot` 数组。
- en: When copying page annotations in method Document.insert_pdf we previously did
    not check the validity of members of the `/Annots` array. For faulty members (like
    null or non-dictionary items) this could cause unnecessary exceptions. This fix
    implements more checks and skips such array items.
  id: totrans-337
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在方法 `Document.insert_pdf` 中复制页面注释时，我们之前未检查 `/Annots` 数组成员的有效性。对于故障成员（如 null
    或非字典项），这可能导致不必要的异常。此修复实现了更多的检查并跳过这些数组项。
- en: Additional annotation type checks.
  id: totrans-338
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了额外的注释类型检查。
- en: We did not previously check for annotation type when getting / setting annotation
    border properties. This is now checked in accordance with MuPDF.
  id: totrans-339
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们之前在获取/设置注释边框属性时未检查注释类型。现在根据 MuPDF 进行检查。
- en: Increase fault tolerance.
  id: totrans-340
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了容错能力。
- en: Avoid exceptions in method [`insert_pdf()`](document.html#Document.insert_pdf
    "Document.insert_pdf") when source pages contains invalid items in the `/Annots`
    array.
  id: totrans-341
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在源页面包含无效项 `/Annots` 数组时，避免方法 [`insert_pdf()`](document.html#Document.insert_pdf
    "Document.insert_pdf") 中的异常。
- en: Return empty border dict for applicable annots.
  id: totrans-342
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对适用的注释返回空边框字典。
- en: We previously were returning a non-empty border dictionary even for non-applicable
    annotation types. We now return the empty dictionary `{}` in these cases. This
    requires some corresponding changes in the annotation `.update()` method, namely
    for dashes and border width.
  id: totrans-343
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们之前即使对于不适用的注释类型也返回了非空边框字典。现在在这些情况下返回空字典 `{}`。这要求注释 `.update()` 方法做出相应的更改，特别是对于虚线和边框宽度。
- en: Restrict [`set_rect`](annot.html#Annot.set_rect "Annot.set_rect") to applicable
    annot types.
  id: totrans-344
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 [`set_rect`](annot.html#Annot.set_rect "Annot.set_rect") 限制为适用的注释类型。
- en: We were insufficiently excluding non-applicable annotation types from [`set_rect()`](annot.html#Annot.set_rect
    "Annot.set_rect") method. We now let MuPDF catch unsupported annotations and return
    `False` in these cases.
  id: totrans-345
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们之前在 [`set_rect()`](annot.html#Annot.set_rect "Annot.set_rect") 方法中未能充分排除不适用的注释类型。现在让
    MuPDF 捕获不支持的注释，并在这些情况下返回 `False`。
- en: Wrong fontsize computation in `page.get_texttrace()`.
  id: totrans-346
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `page.get_texttrace()` 中错误地计算了字体大小。
- en: When computing the font size we were using the final text transformation matrix,
    where we should have taken `span->trm` instead. This is corrected here.
  id: totrans-347
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 计算字体大小时我们使用了最终文本转换矩阵，而应该使用 `span->trm`。这里进行了修正。
- en: Updates to cope with changes to latest MuPDF.
  id: totrans-348
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新以适应最新的 MuPDF 变更。
- en: '`pdf_lookup_anchor()` has been removed.'
  id: totrans-349
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`pdf_lookup_anchor()` 已移除。'
- en: Update fill_textbox to better respect rect.width
  id: totrans-350
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新 `fill_textbox` 以更好地尊重 `rect.width`。
- en: The function norm_words in fill_textbox had a bug in its last loop, appending
    n+1 characters when actually measuring width of n characters. It led to a bug
    in fill_texbox when you tried to write a single word mostly composed of “wide”
    letters (M,m, W, w…), causing the written text to exceed the given rect.
  id: totrans-351
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`fill_textbox` 中的 `norm_words` 函数在其最后一个循环中存在 bug，当实际测量 n 个字符的宽度时，会附加 n+1 个字符。这导致当您尝试写入一个主要由“宽”字母（M，m，W，w…）组成的单词时，会导致写入的文本超出给定的矩形框。'
- en: The fix was just to replace n+1 by n.
  id: totrans-352
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 修复仅仅将 n+1 替换为 n 的问题。
- en: Add [`script_focus`](widget.html#Widget.script_focus "Widget.script_focus")
    and [`script_blur`](widget.html#Widget.script_blur "Widget.script_blur") options
    to widget.
  id: totrans-353
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在小部件中添加了 [`script_focus`](widget.html#Widget.script_focus "Widget.script_focus")
    和 [`script_blur`](widget.html#Widget.script_blur "Widget.script_blur") 选项。
- en: '**Changes in version 1.22.5 (2023-06-21)**'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.22.5 版本变更 (2023-06-21)**：'
- en: This release uses `MuPDF-1.22.2`.
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本版本使用 `MuPDF-1.22.2`。
- en: 'Bug fixes:'
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误修复：
- en: '**Fixed** [#2365](https://github.com/pymupdf/PyMuPDF/issues/2365): Incorrect
    dictionary values for type “fs” drawings.'
  id: totrans-357
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2365](https://github.com/pymupdf/PyMuPDF/issues/2365)：类型为“fs”绘图的字典值不正确。'
- en: '**Fixed** [#2391](https://github.com/pymupdf/PyMuPDF/issues/2391): Check box
    automatically uncheck when we update same checkbox more than 1 times.'
  id: totrans-358
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2391](https://github.com/pymupdf/PyMuPDF/issues/2391)：更新同一复选框超过1次会自动取消选中。'
- en: '**Fixed** [#2400](https://github.com/pymupdf/PyMuPDF/issues/2400): Gaps within
    text of same line not filled with spaces.'
  id: totrans-359
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2400](https://github.com/pymupdf/PyMuPDF/issues/2400)：同一行文本中的间隙未填充空格。'
- en: '**Fixed** [#2404](https://github.com/pymupdf/PyMuPDF/issues/2404): Blacklining
    an image in PDF won’t remove underlying content in version 1.22.X.'
  id: totrans-360
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2404](https://github.com/pymupdf/PyMuPDF/issues/2404)：在版本1.22.X中，PDF中的图像不会被覆盖。'
- en: '**Fixed** [#2430](https://github.com/pymupdf/PyMuPDF/issues/2430): Incorrectly
    reducing ref count of Py_None.'
  id: totrans-361
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2430](https://github.com/pymupdf/PyMuPDF/issues/2430)：错误地减少了Py_None的引用计数。'
- en: '**Fixed** [#2450](https://github.com/pymupdf/PyMuPDF/issues/2450): Empty fill
    color and fill opacity for paths with fill and stroke operations with 1.22.*'
  id: totrans-362
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2450](https://github.com/pymupdf/PyMuPDF/issues/2450)：带有填充和描边操作的路径的空填充颜色和填充不透明度在版本1.22.*中为空。'
- en: '**Fixed** [#2462](https://github.com/pymupdf/PyMuPDF/issues/2462): Error at
    “get_drawing(extended=True )”'
  id: totrans-363
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2462](https://github.com/pymupdf/PyMuPDF/issues/2462)：在“get_drawing(extended=True
    )”处出现错误。'
- en: '**Fixed** [#2468](https://github.com/pymupdf/PyMuPDF/issues/2468): Decode error
    when trying to get drawings'
  id: totrans-364
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2468](https://github.com/pymupdf/PyMuPDF/issues/2468)：尝试获取绘图时的解码错误。'
- en: '**Fixed** [#2710](https://github.com/pymupdf/PyMuPDF/issues/2710): page.rect
    and text location wrong / differing from older version'
  id: totrans-365
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2710](https://github.com/pymupdf/PyMuPDF/issues/2710)：页面矩形和文本位置与旧版本不同。'
- en: '**Fixed** [#2723](https://github.com/pymupdf/PyMuPDF/issues/2723): When will
    a Python 3.12 wheel be available?'
  id: totrans-366
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2723](https://github.com/pymupdf/PyMuPDF/issues/2723)：Python 3.12的wheel何时可用？'
- en: 'New features:'
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新功能：
- en: '**Changed** Annotations now support “cloudy” borders. The [`Annot.border`](annot.html#Annot.border
    "Annot.border") property has the new item `clouds`, and method [`Annot.set_border()`](annot.html#Annot.set_border
    "Annot.set_border") supports the corresponding `clouds` argument.'
  id: totrans-368
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**：现在注释支持“云”边框。[`Annot.border`](annot.html#Annot.border "Annot.border")属性新增了`clouds`项，方法[`Annot.set_border()`](annot.html#Annot.set_border
    "Annot.set_border")支持相应的`clouds`参数。'
- en: '**Changed** Radio button widgets in the same RB group are now consistently
    updated **if the group is defined in the standard way**.'
  id: totrans-369
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**：现在，同一单选按钮组中的单选按钮小部件在标准定义的情况下始终会被一致更新。'
- en: '**Added** Support for the `/Locked` key in PDF Optional Content. This array
    inside the catalog entry `/OCProperties` can now be extracted and set.'
  id: totrans-370
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**：在PDF可选内容中支持`/Locked`关键字。现在可以提取和设置`/OCProperties`内部的数组。'
- en: '**Added** Support for new parameter `tessdata` in OCR functions. New function
    [`get_tessdata()`](functions.html#get_tessdata "get_tessdata") locates the language
    support folder if Tesseract is installed.'
  id: totrans-371
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**：在OCR功能中新增参数`tessdata`的支持。新函数[`get_tessdata()`](functions.html#get_tessdata
    "get_tessdata")可以定位语言支持文件夹，如果安装了Tesseract。'
- en: '**Changes in version 1.22.3 (2023-05-10)**'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.22.3（2023-05-10）中的更改**'
- en: This release uses `MuPDF-1.22.0`.
  id: totrans-373
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此版本使用`MuPDF-1.22.0`。
- en: 'Bug fixes:'
  id: totrans-374
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺陷修复：
- en: '**Fixed** [#2333](https://github.com/pymupdf/PyMuPDF/issues/2333): Unable to
    set any of button radio group in form'
  id: totrans-375
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2333](https://github.com/pymupdf/PyMuPDF/issues/2333)：无法在表单中设置任何单选按钮组。'
- en: '**Changes in version 1.22.2 (2023-04-26)**'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.22.2（2023-04-26）中的更改**'
- en: This release uses `MuPDF-1.22.0`.
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此版本使用`MuPDF-1.22.0`。
- en: 'Bug fixes:'
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺陷修复：
- en: '**Fixed** [#2369](https://github.com/pymupdf/PyMuPDF/issues/2369): Image extraction
    bugs with newer versions'
  id: totrans-379
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2369](https://github.com/pymupdf/PyMuPDF/issues/2369)：在新版本中提取图像的错误。'
- en: '**Changes in version 1.22.1 (2023-04-18)**'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.22.1（2023-04-18）中的更改**'
- en: This release uses `MuPDF-1.22.0`.
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此版本使用`MuPDF-1.22.0`。
- en: 'Bug fixes:'
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺陷修复：
- en: '**Fixed** [#2345](https://github.com/pymupdf/PyMuPDF/issues/2345): Turn off
    print statements in utils.py'
  id: totrans-383
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2345](https://github.com/pymupdf/PyMuPDF/issues/2345)：关闭utils.py中的打印语句。'
- en: '**Fixed** [#2348](https://github.com/pymupdf/PyMuPDF/issues/2348): extract_image
    returns an extension “flate” instead of “png”'
  id: totrans-384
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2348](https://github.com/pymupdf/PyMuPDF/issues/2348)：提取图像返回扩展名“flate”而不是“png”。'
- en: '**Fixed** [#2350](https://github.com/pymupdf/PyMuPDF/issues/2350): Can not
    make widget (checkbox) to read-only by adding flags PDF_FIELD_IS_READ_ONLY'
  id: totrans-385
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2350](https://github.com/pymupdf/PyMuPDF/issues/2350)：无法通过添加标志PDF_FIELD_IS_READ_ONLY使小部件（复选框）只读。'
- en: '**Fixed** [#2355](https://github.com/pymupdf/PyMuPDF/issues/2355): 1.22.0 error
    when using get_toc (AttributeError: ‘SwigPyObject’ object has no attribute)'
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2355](https://github.com/pymupdf/PyMuPDF/issues/2355)：使用 get_toc
    时出现 1.22.0 错误（AttributeError: ‘SwigPyObject’ 对象没有属性）'
- en: '**Changes in version 1.22.0 (2023-04-14)**'
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.22.0 中的变更 (2023-04-14)**'
- en: This release uses `MuPDF-1.22.0`.
  id: totrans-388
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此版本使用 `MuPDF-1.22.0`。
- en: 'Behavioural changes:'
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 行为变更：
- en: Text extraction now includes glyphs that overlap with clip rect; previously
    they were included only if they were entirely contained within the clip rect.
  id: totrans-390
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在文本提取包括与剪辑矩形重叠的字形；以前仅当它们完全包含在剪辑矩形内时才包括它们。
- en: 'Bug fixes:'
  id: totrans-391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bug 修复：
- en: '**Fixed** [#1763](https://github.com/pymupdf/PyMuPDF/issues/1763): Interactive(smartform)
    form PDF calculation not working in pymupdf'
  id: totrans-392
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#1763](https://github.com/pymupdf/PyMuPDF/issues/1763)：交互（智能表单）形式的
    PDF 计算在 pymupdf 中无效'
- en: '**Fixed** [#1995](https://github.com/pymupdf/PyMuPDF/issues/1995): RuntimeError:
    image is too high for a long paged pdf file when trying'
  id: totrans-393
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#1995](https://github.com/pymupdf/PyMuPDF/issues/1995)：在尝试时，长页 pdf
    文件中的图像太高而导致 RuntimeError'
- en: '**Fixed** [#2093](https://github.com/pymupdf/PyMuPDF/issues/2093): Image in
    pdf changes color after applying redactions'
  id: totrans-394
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2093](https://github.com/pymupdf/PyMuPDF/issues/2093)：在应用消隐后，pdf
    中的图像颜色变化'
- en: '**Fixed** [#2108](https://github.com/pymupdf/PyMuPDF/issues/2108): Redaction
    removing more text than expected'
  id: totrans-395
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2108](https://github.com/pymupdf/PyMuPDF/issues/2108)：消隐删除的文本比预期的多'
- en: '**Fixed** [#2141](https://github.com/pymupdf/PyMuPDF/issues/2141): Failed to
    read JPX header when trying to get blocks'
  id: totrans-396
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2141](https://github.com/pymupdf/PyMuPDF/issues/2141)：尝试获取块时，读取 JPX
    标头失败'
- en: '**Fixed** [#2144](https://github.com/pymupdf/PyMuPDF/issues/2144): Replace
    image throws an error'
  id: totrans-397
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2144](https://github.com/pymupdf/PyMuPDF/issues/2144)：替换图像引发错误'
- en: '**Fixed** [#2146](https://github.com/pymupdf/PyMuPDF/issues/2146): Wrong Handling
    of Reference Count of “None” Object'
  id: totrans-398
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2146](https://github.com/pymupdf/PyMuPDF/issues/2146)：错误处理“None”对象的引用计数'
- en: '**Fixed** [#2161](https://github.com/pymupdf/PyMuPDF/issues/2161): Support
    adding images as pages directly'
  id: totrans-399
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2161](https://github.com/pymupdf/PyMuPDF/issues/2161)：支持直接添加图像作为页面'
- en: '**Fixed** [#2168](https://github.com/pymupdf/PyMuPDF/issues/2168): `page.add_highlight_annot(start=pointa,
    stop=pointb)` not working'
  id: totrans-400
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2168](https://github.com/pymupdf/PyMuPDF/issues/2168)：`page.add_highlight_annot(start=pointa,
    stop=pointb)` 无效'
- en: '**Fixed** [#2173](https://github.com/pymupdf/PyMuPDF/issues/2173): Double free
    of `Colorspace` used in `Pixmap`'
  id: totrans-401
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2173](https://github.com/pymupdf/PyMuPDF/issues/2173)：在 Pixmap 中使用的
    Colorspace 被双重释放'
- en: '**Fixed** [#2179](https://github.com/pymupdf/PyMuPDF/issues/2179): Incorrect
    documentation for `pixmap.tint_with()`'
  id: totrans-402
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2179](https://github.com/pymupdf/PyMuPDF/issues/2179)：`pixmap.tint_with()`
    的文档错误'
- en: '**Fixed** [#2208](https://github.com/pymupdf/PyMuPDF/issues/2208): Pushbutton
    widget appears as check box'
  id: totrans-403
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2208](https://github.com/pymupdf/PyMuPDF/issues/2208)：推动按钮小部件显示为复选框'
- en: '**Fixed** [#2210](https://github.com/pymupdf/PyMuPDF/issues/2210): `apply_redactions()`
    move pdf text to right after redaction'
  id: totrans-404
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2210](https://github.com/pymupdf/PyMuPDF/issues/2210)：`apply_redactions()`
    将 pdf 文本移动到删除后'
- en: '**Fixed** [#2220](https://github.com/pymupdf/PyMuPDF/issues/2220): `Page.delete_image()`
    | object has no attribute `is_image`'
  id: totrans-405
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2220](https://github.com/pymupdf/PyMuPDF/issues/2220)：`Page.delete_image()`
    | 对象没有属性 `is_image`'
- en: '**Fixed** [#2228](https://github.com/pymupdf/PyMuPDF/issues/2228): open some
    pdf cost too much time'
  id: totrans-406
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2228](https://github.com/pymupdf/PyMuPDF/issues/2228)：打开某些 pdf 花费太多时间'
- en: '**Fixed** [#2238](https://github.com/pymupdf/PyMuPDF/issues/2238): Bug - can
    not extract data from file in the newest version 1.21.1'
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2238](https://github.com/pymupdf/PyMuPDF/issues/2238)：Bug - 无法从最新版本
    1.21.1 中提取数据'
- en: '**Fixed** [#2242](https://github.com/pymupdf/PyMuPDF/issues/2242): Python quits
    silently in `Story.element_positions()` if callback function prototype is wrong'
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2242](https://github.com/pymupdf/PyMuPDF/issues/2242)：如果回调函数原型错误，Python
    在 `Story.element_positions()` 中会静默退出'
- en: '**Fixed** [#2246](https://github.com/pymupdf/PyMuPDF/issues/2246): TextWriter
    write text in a wrong position'
  id: totrans-409
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2246](https://github.com/pymupdf/PyMuPDF/issues/2246)：TextWriter
    在错误的位置写入文本'
- en: '**Fixed** [#2248](https://github.com/pymupdf/PyMuPDF/issues/2248): After redacting
    the content, the position of the remaining text changes'
  id: totrans-410
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2248](https://github.com/pymupdf/PyMuPDF/issues/2248)：消隐内容后，剩余文本的位置发生变化'
- en: '**Fixed** [#2250](https://github.com/pymupdf/PyMuPDF/issues/2250): docs: unclear
    or broken link in page.rst'
  id: totrans-411
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2250](https://github.com/pymupdf/PyMuPDF/issues/2250)：文档：页面.rst 中的链接不明确或损坏'
- en: '**Fixed** [#2251](https://github.com/pymupdf/PyMuPDF/issues/2251): mupdf_display_errors
    does not apply to Pixmap when loading broken image'
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** [#2251](https://github.com/pymupdf/PyMuPDF/issues/2251)：在加载损坏的图像时，`mupdf_display_errors`
    不适用于 Pixmap'
- en: '**Fixed** [#2270](https://github.com/pymupdf/PyMuPDF/issues/2270): `Annot.get_text("words")`
    - doesn’t return the first line of words'
  id: totrans-413
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2270](https://github.com/pymupdf/PyMuPDF/issues/2270)：`Annot.get_text("words")`
    - 不返回第一行单词'
- en: '**Fixed** [#2275](https://github.com/pymupdf/PyMuPDF/issues/2275): insert_image:
    document that rotations are counterclockwise'
  id: totrans-414
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2275](https://github.com/pymupdf/PyMuPDF/issues/2275)：insert_image：文档中指出旋转是逆时针方向的'
- en: '**Fixed** [#2278](https://github.com/pymupdf/PyMuPDF/issues/2278): Can not
    make widget (checkbox) to read-only by adding flags PDF_FIELD_IS_READ_ONLY'
  id: totrans-415
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2278](https://github.com/pymupdf/PyMuPDF/issues/2278)：无法通过添加标志 PDF_FIELD_IS_READ_ONLY
    将小部件（复选框）设置为只读'
- en: '**Fixed** [#2290](https://github.com/pymupdf/PyMuPDF/issues/2290): Different
    image format/data from Page.get_text(“dict”) and Fitz.get_page_images()'
  id: totrans-416
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2290](https://github.com/pymupdf/PyMuPDF/issues/2290)：`Page.get_text(“dict”)`
    和 `Fitz.get_page_images()` 返回的图像格式/数据不同'
- en: '**Fixed** [#2293](https://github.com/pymupdf/PyMuPDF/issues/2293): 68 failed
    tests when installing from sdist on my box'
  id: totrans-417
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2293](https://github.com/pymupdf/PyMuPDF/issues/2293)：在我的系统上从 sdist
    安装时出现 68 个测试失败的问题'
- en: '**Fixed** [#2300](https://github.com/pymupdf/PyMuPDF/issues/2300): Too much
    recursion in tree (parents), makes program terminate'
  id: totrans-418
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2300](https://github.com/pymupdf/PyMuPDF/issues/2300)：树中存在过多的递归（父节点），导致程序终止'
- en: '**Fixed** [#2322](https://github.com/pymupdf/PyMuPDF/issues/2322): add_highlight_annot
    using clip generates “A Number is Out of Range” error in PDF'
  id: totrans-419
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2322](https://github.com/pymupdf/PyMuPDF/issues/2322)：使用裁剪生成 add_highlight_annot
    时出现“数字超出范围”的错误'
- en: 'Other:'
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Add key “/AS (Yes)” to the underlying annot object of a selected button form
    field.
  id: totrans-421
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在所选按钮表单字段的底层注释对象中添加了键“/AS（是）”。
- en: Remove unused `Document` methods `has_xref_streams()` and `has_old_style_xrefs()`
    as MuPDF equivalents have been removed.
  id: totrans-422
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除了未使用的 `Document` 方法 `has_xref_streams()` 和 `has_old_style_xrefs()`，因为 MuPDF
    中的相应方法已被删除。
- en: Add new `Document` methods and properties for getting/setting `/PageMode`, `/PageLayout`
    and `/MarkInfo`.
  id: totrans-423
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的 `Document` 方法和属性以获取/设置 `/PageMode`、`/PageLayout` 和 `/MarkInfo`。
- en: New `Document` property `version_count`, which contains the number of incremental
    saves plus one.
  id: totrans-424
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 `Document` 属性 `version_count`，其中包含增量保存的次数加一。
- en: New `Document` property `is_fast_webaccess` which tells whether the document
    is linearized.
  id: totrans-425
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 `Document` 属性 `is_fast_webaccess`，用于指示文档是否是线性化的。
- en: '`DocumentWriter` is now a context manager.'
  id: totrans-426
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DocumentWriter` 现在是一个上下文管理器。'
- en: Add support for `Pixmap` JPEG output.
  id: totrans-427
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对 `Pixmap` JPEG 输出的支持。
- en: Add support for drawing rectangles with rounded corners.
  id: totrans-428
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了支持绘制带圆角矩形的功能。
- en: '`get_drawings()`: added optional `extended` arg.'
  id: totrans-429
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_drawings()`: 添加了可选的 `extended` 参数。'
- en: Fixed issue where trace devices’ state was not being initialised correctly;
    data returned from things like `fitz.Page.get_texttrace()` might be slightly altered,
    e.g. `linewidth` values.
  id: totrans-430
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了跟踪设备状态未正确初始化的问题；来自诸如 `fitz.Page.get_texttrace()` 等的数据可能会稍微更改，例如 `linewidth`
    值。
- en: Output warning to `stderr` if it looks like we are being used with current directory
    containing an invalid `fitz/` directory, because this can break import of `fitz`
    module. For example this happens if one attempts to use `fitz` when current directory
    is a PyMuPDF checkout.
  id: totrans-431
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果看起来我们正在使用包含无效的 `fitz/` 目录的当前目录，则向 `stderr` 输出警告，因为这可能会破坏对 `fitz` 模块的导入。例如，如果尝试在当前目录是
    PyMuPDF 检出时使用 `fitz`，就会发生这种情况。
- en: 'Documentation:'
  id: totrans-432
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档：
- en: 'General rework:'
  id: totrans-433
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总体重构：
- en: Introduces a new home page and new table of contents.
  id: totrans-434
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 引入了新的主页和新的目录。
- en: Structural update to include new About section.
  id: totrans-435
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结构更新以包括新的关于部分。
- en: Comparison & performance graphing.
  id: totrans-436
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比较和性能图表。
- en: Includes performance methodology in appendix.
  id: totrans-437
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在附录中包含了性能方法。
- en: Updates conf.py to understand single back-ticks as code.
  id: totrans-438
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了 conf.py 以理解单个反引号作为代码。
- en: Converts double back-ticks to single back-ticks.
  id: totrans-439
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将双反引号转换为单反引号。
- en: Removes redundant files.
  id: totrans-440
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除了多余的文件。
- en: Improve `insert_file()` documentation.
  id: totrans-441
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了 `insert_file()` 文档。
- en: '`get_bboxlog()`: aded optional `layers` to `get_bboxlog()`.'
  id: totrans-442
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_bboxlog()`: 向 `get_bboxlog()` 添加了可选的 `layers`。'
- en: '`Page.get_texttrace()`: add new dictionary key `layer`, name of Optional Content
    Group.'
  id: totrans-443
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Page.get_texttrace()`: 添加了新的字典键 `layer`，表示可选内容组的名称。'
- en: Mention use of Python venv in installation documentation.
  id: totrans-444
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在安装文档中提及了 Python venv 的使用。
- en: 'Added missing fix for #2057 to release 1.21.1’s changelog.'
  id: totrans-445
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '添加了对版本 1.21.1 的发行说明的遗漏修复 #2057。'
- en: Fixes many links to the PyMuPDF-Utilities repo scripts.
  id: totrans-446
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了许多指向 PyMuPDF-Utilities 存储库脚本的链接。
- en: Avoid duplication of `changes.txt` and `docs/changes.rst`.
  id: totrans-447
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免了 `changes.txt` 和 `docs/changes.rst` 的重复。
- en: Build
  id: totrans-448
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建：
- en: Added `pyproject.toml` file to improve builds using pip etc.
  id: totrans-449
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 `pyproject.toml` 文件以改善使用 pip 等构建的过程。
- en: '**Changes in Version 1.21.1 (2022-12-13)**'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.21.1 中的更改（2022-12-13）**'
- en: This release uses `MuPDF-1.21.1`.
  id: totrans-451
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本版本使用了`MuPDF-1.21.1`。
- en: 'Bug fixes:'
  id: totrans-452
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误修复：
- en: '**Fixed** [#2110](https://github.com/pymupdf/PyMuPDF/issues/2110): Fully embedded
    font is extracted only partially if it occupies more than one object'
  id: totrans-453
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2110](https://github.com/pymupdf/PyMuPDF/issues/2110): 如果占用多个对象，完全嵌入的字体仅部分提取'
- en: '**Fixed** [#2094](https://github.com/pymupdf/PyMuPDF/issues/2094): Rectangle
    Detection Logic'
  id: totrans-454
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2094](https://github.com/pymupdf/PyMuPDF/issues/2094): 矩形检测逻辑'
- en: '**Fixed** [#2088](https://github.com/pymupdf/PyMuPDF/issues/2088): Destination
    point not set for named links in toc'
  id: totrans-455
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2088](https://github.com/pymupdf/PyMuPDF/issues/2088): 目标点未在 toc 中的命名链接中设置'
- en: '**Fixed** [#2087](https://github.com/pymupdf/PyMuPDF/issues/2087): Image with
    Filter “[/FlateDecode/JPXDecode]” not extracted'
  id: totrans-456
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2087](https://github.com/pymupdf/PyMuPDF/issues/2087): 提取带有过滤器“[/FlateDecode/JPXDecode]”的图像'
- en: '**Fixed** [#2086](https://github.com/pymupdf/PyMuPDF/issues/2086): Document.save()
    owner_pw & user_pw has buffer overflow bug'
  id: totrans-457
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2086](https://github.com/pymupdf/PyMuPDF/issues/2086): `Document.save()`
    的 `owner_pw` 和 `user_pw` 存在缓冲区溢出漏洞'
- en: '**Fixed** [#2076](https://github.com/pymupdf/PyMuPDF/issues/2076): Segfault
    in fitz.py'
  id: totrans-458
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2076](https://github.com/pymupdf/PyMuPDF/issues/2076): `fitz.py` 中的段错误'
- en: '**Fixed** [#2057](https://github.com/pymupdf/PyMuPDF/issues/2057): Document.save
    garbage parameter not working in PyMuPDF 1.21.0'
  id: totrans-459
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2057](https://github.com/pymupdf/PyMuPDF/issues/2057): `PyMuPDF 1.21.0`
    中 `Document.save` 的垃圾参数不起作用'
- en: '**Fixed** [#2051](https://github.com/pymupdf/PyMuPDF/issues/2051): Missing
    DPI Parameter'
  id: totrans-460
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2051](https://github.com/pymupdf/PyMuPDF/issues/2051): 缺少 DPI 参数'
- en: '**Fixed** [#2048](https://github.com/pymupdf/PyMuPDF/issues/2048): Invalid
    size of TextPage and bbox with newest version 1.21.0'
  id: totrans-461
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2048](https://github.com/pymupdf/PyMuPDF/issues/2048): TextPage 和
    bbox 在最新版本 `1.21.0` 中的无效大小'
- en: '**Fixed** [#2045](https://github.com/pymupdf/PyMuPDF/issues/2045): SystemError:
    <built-in function Page_get_texttrace> returned a result with an error set'
  id: totrans-462
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2045](https://github.com/pymupdf/PyMuPDF/issues/2045): `SystemError:
    <built-in function Page_get_texttrace>` 返回带有错误设置的结果。'
- en: '**Fixed** [#2039](https://github.com/pymupdf/PyMuPDF/issues/2039): 1.21.0 fails
    to build against system libmupdf'
  id: totrans-463
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2039](https://github.com/pymupdf/PyMuPDF/issues/2039): `1.21.0` 无法构建到系统
    `libmupdf` 的问题'
- en: '**Fixed** [#2036](https://github.com/pymupdf/PyMuPDF/issues/2036): Archive::Archive
    defined twice'
  id: totrans-464
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2036](https://github.com/pymupdf/PyMuPDF/issues/2036): `Archive::Archive`
    定义两次'
- en: Other
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他
- en: Swallow “&zoom=nan” in link uri strings.
  id: totrans-466
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在链接的URI字符串中忽略“&zoom=nan”。
- en: Add new Page utility methods `Page.replace_image()` and `Page.delete_image()`.
  id: totrans-467
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的页面工具方法 `Page.replace_image()` 和 `Page.delete_image()`。
- en: 'Documentation:'
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档：
- en: '[#2040](https://github.com/pymupdf/PyMuPDF/issues/2040): Added note about test
    failure with non-default build of MuPDF, to `tests/README.md`.'
  id: totrans-469
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[#2040](https://github.com/pymupdf/PyMuPDF/issues/2040): 在 `tests/README.md`
    中添加了关于使用非默认构建的 MuPDF 的测试失败的说明。'
- en: '[#2037](https://github.com/pymupdf/PyMuPDF/issues/2037): In `docs/installation.rst`,
    mention incompatibility with chocolatey.org on Windows.'
  id: totrans-470
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[#2037](https://github.com/pymupdf/PyMuPDF/issues/2037): 在 `docs/installation.rst`
    中提到在 Windows 上与 `chocolatey.org` 的不兼容性。'
- en: '[#2061](https://github.com/pymupdf/PyMuPDF/issues/2061): Fixed description
    of `Annot.file_info`.'
  id: totrans-471
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[#2061](https://github.com/pymupdf/PyMuPDF/issues/2061): 修正了`Annot.file_info`的描述。'
- en: '[#2065](https://github.com/pymupdf/PyMuPDF/issues/2065): Show how to insert
    internal PDF link.'
  id: totrans-472
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[#2065](https://github.com/pymupdf/PyMuPDF/issues/2065): 显示如何插入内部 PDF 链接。'
- en: Improved description of building from source without an sdist.
  id: totrans-473
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了在没有 `sdist` 的情况下从源代码构建的描述。
- en: Added information about running tests.
  id: totrans-474
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了关于运行测试的信息。
- en: '[#2084](https://github.com/pymupdf/PyMuPDF/issues/2084): Fixed broken link
    to PyMuPDF-Utilities.'
  id: totrans-475
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[#2084](https://github.com/pymupdf/PyMuPDF/issues/2084): 修复了指向 `PyMuPDF-Utilities`
    的损坏链接。'
- en: '**Changes in Version 1.21.0 (2022-11-8)**'
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.21.0 版本变更（2022-11-8）**'
- en: This release uses `MuPDF-1.21.0`.
  id: totrans-477
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本版本使用了`MuPDF-1.21.0`。
- en: 'New feature: Stories.'
  id: totrans-478
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新功能：Stories。
- en: Added wheels for Python-3.11.
  id: totrans-479
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 Python-3.11 添加了 wheels。
- en: 'Bug fixes:'
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误修复：
- en: '**Fixed** [#1701](https://github.com/pymupdf/PyMuPDF/issues/1701): Broken custom
    image insertion.'
  id: totrans-481
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1701](https://github.com/pymupdf/PyMuPDF/issues/1701): 破损的自定义图像插入。'
- en: '**Fixed** [#1854](https://github.com/pymupdf/PyMuPDF/issues/1854): [`Document.delete_pages()`](document.html#Document.delete_pages
    "Document.delete_pages") declines keyword arguments.'
  id: totrans-482
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1854](https://github.com/pymupdf/PyMuPDF/issues/1854): [`Document.delete_pages()`](document.html#Document.delete_pages
    "Document.delete_pages") 拒绝关键字参数。'
- en: '**Fixed** [#1868](https://github.com/pymupdf/PyMuPDF/issues/1868): Access Violation
    Error at `page.apply_redactions()`.'
  id: totrans-483
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1868](https://github.com/pymupdf/PyMuPDF/issues/1868): 在 `page.apply_redactions()`
    中的访问冲突错误。'
- en: '**Fixed** [#1909](https://github.com/pymupdf/PyMuPDF/issues/1909): Adding text
    with `fontname="Helvetica"` can silently fail.'
  id: totrans-484
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1909](https://github.com/pymupdf/PyMuPDF/issues/1909): 使用 `fontname="Helvetica"`
    添加文本可能会静默失败。'
- en: '**Fixed** [#1913](https://github.com/pymupdf/PyMuPDF/issues/1913): [`draw_rect()`](page.html#Page.draw_rect
    "Page.draw_rect"): does not respect width if color is not specified.'
  id: totrans-485
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1913](https://github.com/pymupdf/PyMuPDF/issues/1913)：[`draw_rect()`](page.html#Page.draw_rect
    "Page.draw_rect")：如果未指定颜色，则不会遵守宽度。'
- en: '**Fixed** [#1917](https://github.com/pymupdf/PyMuPDF/issues/1917): [`subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts"): make it possible to silence the stdout.'
  id: totrans-486
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1917](https://github.com/pymupdf/PyMuPDF/issues/1917)：[`subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts")：现在可以静音输出。'
- en: '**Fixed** [#1936](https://github.com/pymupdf/PyMuPDF/issues/1936): Rectangle
    detection can be incorrect producing wrong output.'
  id: totrans-487
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1936](https://github.com/pymupdf/PyMuPDF/issues/1936)：矩形检测可能不正确，导致输出错误。'
- en: '**Fixed** [#1945](https://github.com/pymupdf/PyMuPDF/issues/1945): Segmentation
    fault when saving with `clean=True`.'
  id: totrans-488
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1945](https://github.com/pymupdf/PyMuPDF/issues/1945)：在使用`clean=True`保存时出现分段错误。'
- en: '**Fixed** [#1965](https://github.com/pymupdf/PyMuPDF/issues/1965): [`pdfocr_save()`](pixmap.html#Pixmap.pdfocr_save
    "Pixmap.pdfocr_save") Hard Crash.'
  id: totrans-489
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1965](https://github.com/pymupdf/PyMuPDF/issues/1965)：[`pdfocr_save()`](pixmap.html#Pixmap.pdfocr_save
    "Pixmap.pdfocr_save") 硬崩溃。'
- en: '**Fixed** [#1971](https://github.com/pymupdf/PyMuPDF/issues/1971): Segmentation
    fault when using [`get_drawings()`](page.html#Page.get_drawings "Page.get_drawings").'
  id: totrans-490
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1971](https://github.com/pymupdf/PyMuPDF/issues/1971)：在使用[`get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings")时发生分段错误。'
- en: '**Fixed** [#1946](https://github.com/pymupdf/PyMuPDF/issues/1946): `block_no`
    and `block_type` switched in [`get_text()`](annot.html#Annot.get_text "Annot.get_text")
    docs.'
  id: totrans-491
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1946](https://github.com/pymupdf/PyMuPDF/issues/1946)：在[`get_text()`](annot.html#Annot.get_text
    "Annot.get_text")文档中，`block_no`和`block_type`被错误地交换。'
- en: '**Fixed** [#2013](https://github.com/pymupdf/PyMuPDF/issues/2013): AttributeError:
    ‘Widget’ object has no attribute ‘_annot’ in delete widget.'
  id: totrans-492
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#2013](https://github.com/pymupdf/PyMuPDF/issues/2013)：在删除小部件时出现 AttributeError:
    ‘Widget’ object has no attribute ‘_annot’。'
- en: 'Misc changes to core code:'
  id: totrans-493
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 核心代码的其他更改：
- en: Fixed various compiler warnings and a sequence-point bug.
  id: totrans-494
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了各种编译器警告和序列点错误。
- en: Added support for Memento builds.
  id: totrans-495
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对Memento构建的支持。
- en: Fixed leaks detected by Memento in test suite.
  id: totrans-496
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了Memento在测试套件中检测到的内存泄漏问题。
- en: Fixed handling of exceptions in set_name() and set_rect().
  id: totrans-497
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在`set_name()`和`set_rect()`中处理异常的问题。
- en: Allow build with latest MuPDF, for regular testing of PyMuPDF master.
  id: totrans-498
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许使用最新的MuPDF进行构建，用于PyMuPDF主分支的定期测试。
- en: Cope with new MuPDF exceptions when setting rect for some Annot types.
  id: totrans-499
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适应了设置某些注释类型的矩形时出现新的MuPDF异常。
- en: Reduced cosmetic differences between MuPDF’s config.h and PyMuPDF’s _config.h.
  id: totrans-500
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少了MuPDF的config.h与PyMuPDF的_config.h之间的外观差异。
- en: Cope with various changes to MuPDF API.
  id: totrans-501
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适应了MuPDF API的各种更改。
- en: 'Other:'
  id: totrans-502
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他：
- en: Fixed various broken links and typos in docs.
  id: totrans-503
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了文档中各种失效链接和拼写错误。
- en: 'Mention install of `swig-python` on MacOS for #875.'
  id: totrans-504
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提到在MacOS上安装`swig-python`以解决＃875。
- en: Added (untested) wheels for macos-arm64.
  id: totrans-505
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了（未经测试的）macos-arm64的wheel。
- en: '**Changes in Version 1.20.2**'
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.20.2 中的变更**'
- en: This release uses `MuPDF-1.20.3`.
  id: totrans-507
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此版本使用了`MuPDF-1.20.3`。
- en: '**Fixed** [#1787](https://github.com/pymupdf/PyMuPDF/issues/1787). Fix linking
    issues on Unix systems.'
  id: totrans-508
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1787](https://github.com/pymupdf/PyMuPDF/issues/1787)。修复了Unix系统上的链接问题。'
- en: '**Fixed** [#1824](https://github.com/pymupdf/PyMuPDF/issues/1824). SegFault
    when applying redactions overlapping a transparent image. (Fixed in `MuPDF-1.20.3`.)'
  id: totrans-509
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1824](https://github.com/pymupdf/PyMuPDF/issues/1824)。在应用重叠透明图像的修正时导致SegFault。（在`MuPDF-1.20.3`中已修复。）'
- en: 'Improvements to documentation:'
  id: totrans-510
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档改进：
- en: Improved information about building from source in `docs/installation.rst`.
  id: totrans-511
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`docs/installation.rst`中改进了有关从源代码构建的信息。
- en: Clarified memory allocation setting [PRE0].
  id: totrans-512
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 澄清了内存分配设置 [PRE0]。
- en: Fixed link to PDF Reference manual in `docs/app3.rst`.
  id: totrans-513
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在`docs/app3.rst`中对PDF参考手册的链接。
- en: Fixed building of html documentation on OpenBSD.
  id: totrans-514
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在OpenBSD上修复了HTML文档的构建问题。
- en: Moved old `docs/faq.rst` into separate `docs/recipes-*` files.
  id: totrans-515
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将旧的`docs/faq.rst`移动到单独的`docs/recipes-*`文件中。
- en: 'Removed some unused files and directories:'
  id: totrans-516
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了一些未使用的文件和目录。
- en: '`installation/`'
  id: totrans-517
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`installation/`'
- en: '`docs/wheelnames.txt`'
  id: totrans-518
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`docs/wheelnames.txt`'
- en: '**Changes in Version 1.20.1**'
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.20.1 中的变更**'
- en: '**Fixed** [#1724](https://github.com/pymupdf/PyMuPDF/issues/1724). Fix for
    building on FreeBSD.'
  id: totrans-520
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1724](https://github.com/pymupdf/PyMuPDF/issues/1724)。修复了在FreeBSD上的构建问题。'
- en: '**Fixed** [#1771](https://github.com/pymupdf/PyMuPDF/issues/1771). [`linkDest()`](linkdest.html#linkDest
    "linkDest") had a broken call to `re.match()`, introduced in 1.20.0.'
  id: totrans-521
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1771](https://github.com/pymupdf/PyMuPDF/issues/1771)。[`linkDest()`](linkdest.html#linkDest
    "linkDest") 中对`re.match()`的调用存在问题，这在1.20.0中引入。'
- en: '**Fixed** [#1751](https://github.com/pymupdf/PyMuPDF/issues/1751). [`get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings") and [`get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings")
    previously always returned with `closePath=False`.'
  id: totrans-522
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1751](https://github.com/pymupdf/PyMuPDF/issues/1751)。[`get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings")和[`get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings")之前总是以`closePath=False`返回。'
- en: '**Fixed** [#1645](https://github.com/pymupdf/PyMuPDF/issues/1645). Default
    FreeText annotation text color is now black.'
  id: totrans-523
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1645](https://github.com/pymupdf/PyMuPDF/issues/1645)。默认的自由文本注释文本颜色现在是黑色。'
- en: 'Improvements to sphinx-generated documentation:'
  id: totrans-524
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了sphinx生成的文档：
- en: Use readthedocs theme with enhancements.
  id: totrans-525
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用增强的readthedocs主题。
- en: Renamed the `.txt` files to have `.rst` suffixes.
  id: totrans-526
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`.txt`文件重命名为`.rst`后缀。
- en: '* * *'
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.20.0**'
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.20.0 版本变更**'
- en: This release uses `MuPDF-1.20.0`, released 2022-06-15.
  id: totrans-529
  prefs: []
  type: TYPE_NORMAL
  zh: 本次发布使用了`MuPDF-1.20.0`，发布日期为2022-06-15。
- en: Cope with new MuPDF link uri format, changed from `#<int>,<int>,<int>` to `#page=<int>&zoom=<float>,<float>,<float>`.
  id: totrans-530
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适应了新的MuPDF链接URI格式，从`#<int>,<int>,<int>`更改为`#page=<int>&zoom=<float>,<float>,<float>`。
- en: In `tests/test_insertpdf.py`, use new reference output `joined-1.20.pdf`. We
    also check that new output values are approximately the same as the old ones.
  id: totrans-531
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`tests/test_insertpdf.py`中，使用新的参考输出`joined-1.20.pdf`。我们还检查新的输出值是否与旧的大致相同。
- en: '**Fixed** [#1738](https://github.com/pymupdf/PyMuPDF/issues/1738). Leak of
    `pdf_graft_map`. Also fixed a SEGV issue that this seemed to expose, caused by
    incorrect freeing of underlying fz_document.'
  id: totrans-532
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1738](https://github.com/pymupdf/PyMuPDF/issues/1738)。`pdf_graft_map`泄漏问题。还修复了一个由于不正确释放底层fz_document而导致的SEGV问题。'
- en: '**Fixed** [#1733](https://github.com/pymupdf/PyMuPDF/issues/1733). Fixed ownership
    of `Annotation.get_pixmap()`.'
  id: totrans-533
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1733](https://github.com/pymupdf/PyMuPDF/issues/1733)。修复了`Annotation.get_pixmap()`的所有权。'
- en: 'Changes to build/release process:'
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: 构建/发布流程的变更：
- en: If pip builds from source because an appropriate wheel is not available, we
    no longer require MuPDF to be pre-installed. Instead the required MuPDF source
    is embedded in the sdist and automatically built into PyMuPDF.
  id: totrans-535
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果pip从源代码构建，因为没有合适的轮子可用，我们不再要求预先安装MuPDF。相反，所需的MuPDF源代码已嵌入sdist，并自动构建为PyMuPDF。
- en: Various changes to `setup.py` to download the required MuPDF release as required.
    See comments at start of setup.py for details.
  id: totrans-536
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对`setup.py`进行了各种更改，以根据需要下载所需的MuPDF发布版。有关详细信息，请参阅setup.py开头的注释。
- en: Added `.github/workflows/build_wheels.yml` to control building of wheels on
    Github.
  id: totrans-537
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`.github/workflows/build_wheels.yml`来控制在Github上构建轮子。
- en: '* * *'
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.19.6**'
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.19.6 版本变更**'
- en: '**Fixed** [#1620](https://github.com/pymupdf/PyMuPDF/issues/1620). The [TextPage](textpage.html#textpage)
    created by [`Page.get_textpage()`](page.html#Page.get_textpage "Page.get_textpage")
    will now be freed correctly (removed memory leak).'
  id: totrans-540
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1620](https://github.com/pymupdf/PyMuPDF/issues/1620)。由[`Page.get_textpage()`](page.html#Page.get_textpage
    "Page.get_textpage")创建的[TextPage](textpage.html#textpage)现在将正确释放（去除内存泄漏）。'
- en: '**Fixed** [#1601](https://github.com/pymupdf/PyMuPDF/issues/1601). Document
    open errors should now be more concise and easier to interpret. In the course
    of this, two PyMuPDF-specific Python exceptions have been **added:**'
  id: totrans-541
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1601](https://github.com/pymupdf/PyMuPDF/issues/1601)。现在应更简洁和易于解释地报告文档打开错误。在此过程中，添加了两个PyMuPDF特定的Python异常：'
- en: '`EmptyFileError` – raised when trying to create a [Document](document.html#document)
    (`fitz.open()`) from an empty file or zero-length memory.'
  id: totrans-542
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`EmptyFileError` - 当尝试从空文件或零长度内存创建[文档](document.html#document) (`fitz.open()`)
    时引发。'
- en: ''
  id: totrans-543
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-544
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`FileDataError` – raised when MuPDF encounters irrecoverable document structure
    issues.'
  id: totrans-545
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FileDataError` - 当MuPDF遇到不可恢复的文档结构问题时引发。'
- en: '**Added** [`Page.load_widget()`](page.html#Page.load_widget "Page.load_widget")
    given a PDF field’s xref.'
  id: totrans-546
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** [`Page.load_widget()`](page.html#Page.load_widget "Page.load_widget")，给定PDF字段的xref。'
- en: '**Added** Dictionary [`pdfcolor`](functions.html#pdfcolor "pdfcolor") which
    provide the about 500 colors defined as PDF color values with the lower case color
    name as key.'
  id: totrans-547
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 词典[`pdfcolor`](functions.html#pdfcolor "pdfcolor")，其中包含约500种PDF颜色值，以小写颜色名称作为键。'
- en: '**Added** algebra functionality to the [Quad](quad.html#quad) class. These
    objects can now also be added and subtracted among themselves, and be multiplied
    by numbers and matrices.'
  id: totrans-548
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 代数功能到[Quad](quad.html#quad)类。这些对象现在也可以相互加减，并且可以乘以数字和矩阵。'
- en: '**Added** new constants defining the default text extraction flags for more
    comfortable handling. Their naming convention is like [`TEXTFLAGS_WORDS`](vars.html#TEXTFLAGS_WORDS
    "TEXTFLAGS_WORDS") for `page.get_text("words")`. See [Text Extraction Flags Defaults](app1.html#text-extraction-flags).'
  id: totrans-549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 新常量，定义更舒适处理的默认文本提取标志。它们的命名约定类似于[`TEXTFLAGS_WORDS`](vars.html#TEXTFLAGS_WORDS
    "TEXTFLAGS_WORDS")用于`page.get_text("words")`。参见[文本提取标志默认值](app1.html#text-extraction-flags)。'
- en: '**Changed** [`Page.annots()`](page.html#Page.annots "Page.annots") and [`Page.widgets()`](page.html#Page.widgets
    "Page.widgets") to detect and prevent reloading the page (illegally) inside the
    iterator loops via [`Document.reload_page()`](document.html#Document.reload_page
    "Document.reload_page"). Doing this brings down the interpretor. Documented clean
    ways to do annotation and widget mass updates within properly designed loops.'
  id: totrans-550
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Page.annots()`](page.html#Page.annots "Page.annots") 和 [`Page.widgets()`](page.html#Page.widgets
    "Page.widgets")，以检测和防止在迭代器循环中（通过[`Document.reload_page()`](document.html#Document.reload_page
    "Document.reload_page")）非法重新加载页面。这将降低解释器。记录了在适当设计的循环内进行注释和小部件大规模更新的干净方式。'
- en: '**Changed** several internal utility functions to become standalone (“SWIG
    inline”) as opposed to be part of the [Tools](tools.html#tools) class. This, among
    other things, increases the performance of geometry object creation.'
  id: totrans-551
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** 几个内部实用函数，使其成为独立的（“SWIG内联”），而不是[Tools](tools.html#tools)类的一部分。这样做，除其他外，提高了几何对象创建的性能。'
- en: '**Changed** [`Document.update_stream()`](document.html#Document.update_stream
    "Document.update_stream") to always accept stream updates - whether or not the
    dictionary object behind the xref already is a stream. Thus the former `new` parameter
    is now ignored and will be removed in v1.20.0.'
  id: totrans-552
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Document.update_stream()`](document.html#Document.update_stream "Document.update_stream")
    以始终接受流更新 - 无论xref后面的字典对象是否已经是流。因此，以前的`new`参数现在被忽略，并将在v1.20.0中删除。'
- en: '* * *'
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.19.5**'
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.19.5变更**'
- en: '**Fixed** [#1518](https://github.com/pymupdf/PyMuPDF/issues/1518). A limited
    “fix”: in some cases, rectangles and quadrupels were not correctly encoded to
    support re-drawing by [Shape](shape.html#shape).'
  id: totrans-555
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** [#1518](https://github.com/pymupdf/PyMuPDF/issues/1518)。有限“修复”：在某些情况下，矩形和四边形未正确编码以支持通过[Shape](shape.html#shape)重新绘制。'
- en: '**Fixed** [#1521](https://github.com/pymupdf/PyMuPDF/issues/1521). This had
    the same ultimate reason behind issue #1510.'
  id: totrans-556
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** [#1521](https://github.com/pymupdf/PyMuPDF/issues/1521)。这背后的最终原因与问题＃1510相同。'
- en: '**Fixed** [#1513](https://github.com/pymupdf/PyMuPDF/issues/1513). Some Optional
    Content functions did not support non-ASCII characters.'
  id: totrans-557
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** [#1513](https://github.com/pymupdf/PyMuPDF/issues/1513)。某些可选内容功能不支持非ASCII字符。'
- en: '**Fixed** [#1510](https://github.com/pymupdf/PyMuPDF/issues/1510). Support
    more soft-mask image subtypes.'
  id: totrans-558
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** [#1510](https://github.com/pymupdf/PyMuPDF/issues/1510)。支持更多软蒙版图像子类型。'
- en: '**Fixed** [#1507](https://github.com/pymupdf/PyMuPDF/issues/1507). Immunize
    against items in the outlines chain, that are `"null"` objects.'
  id: totrans-559
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** [#1507](https://github.com/pymupdf/PyMuPDF/issues/1507)。免疫大纲链中的“null”对象。'
- en: '**Fixed** re-opened [#1417](https://github.com/pymupdf/PyMuPDF/issues/1417).
    (“too many open files”). This was due to insufficient calls to MuPDF’s `fz_drop_document()`.
    This also fixes [#1550](https://github.com/pymupdf/PyMuPDF/issues/1550).'
  id: totrans-560
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** 重新打开[#1417](https://github.com/pymupdf/PyMuPDF/issues/1417)。（“打开的文件太多”）。这是由于对MuPDF的`fz_drop_document()`调用不足导致的。这也修复了[#1550](https://github.com/pymupdf/PyMuPDF/issues/1550)。'
- en: '**Fixed** several undocumented issues in relation to incorrectly setting the
    text span origin [`point_like`](glossary.html#point_like "point_like").'
  id: totrans-561
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** 在错误设置文本跨度原点[`point_like`](glossary.html#point_like "point_like")方面的几个未记录问题。'
- en: '**Fixed** undocumented error computing the character bbox in method [`Page.get_texttrace()`](functions.html#Page.get_texttrace
    "Page.get_texttrace") when text is **flipped** (as opposed to just rotated).'
  id: totrans-562
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修正** 在文本**翻转**（而不仅仅是旋转）时，方法[`Page.get_texttrace()`](functions.html#Page.get_texttrace
    "Page.get_texttrace")计算字符bbox时的未记录错误。'
- en: '**Added** items to the dictionary returned by `image_properties()`: `orientation`
    and `transform` report the natural image orientation (EXIF data).'
  id: totrans-563
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 到`image_properties()`返回的字典项：`orientation`和`transform`报告自然图像方向（EXIF数据）。'
- en: '**Added** method [`Document.xref_copy()`](document.html#Document.xref_copy
    "Document.xref_copy"). It will make a given target PDF object an exact copy of
    a source object.'
  id: totrans-564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 方法[`Document.xref_copy()`](document.html#Document.xref_copy "Document.xref_copy")。它可以使目标PDF对象成为源对象的精确副本。'
- en: '* * *'
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.19.4**'
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.19.4变更**'
- en: '**Fixed** [#1505](https://github.com/pymupdf/PyMuPDF/issues/1505). Immunize
    against circular outline items.'
  id: totrans-567
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1505](https://github.com/pymupdf/PyMuPDF/issues/1505)。免疫循环轮廓项。'
- en: '**Fixed** [#1484](https://github.com/pymupdf/PyMuPDF/issues/1484). Correct
    CropBox coordinates are now returned in all situations.'
  id: totrans-568
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1484](https://github.com/pymupdf/PyMuPDF/issues/1484)。现在在所有情况下正确返回
    CropBox 坐标。'
- en: '**Fixed** [#1479](https://github.com/pymupdf/PyMuPDF/issues/1479).'
  id: totrans-569
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1479](https://github.com/pymupdf/PyMuPDF/issues/1479)。'
- en: '**Fixed** [#1474](https://github.com/pymupdf/PyMuPDF/issues/1474). TextPage
    objects are now properly deleted again.'
  id: totrans-570
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1474](https://github.com/pymupdf/PyMuPDF/issues/1474)。现在正确删除 TextPage
    对象。'
- en: '**Added** [Page](page.html#page) methods and attributes for PDF `/ArtBox`,
    `/BleedBox`, `/TrimBox`.'
  id: totrans-571
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [Page](page.html#page) 方法和属性用于 PDF `/ArtBox`, `/BleedBox`, `/TrimBox`。'
- en: '**Added** global attribute [`TESSDATA_PREFIX`](functions.html#TESSDATA_PREFIX
    "TESSDATA_PREFIX") for easy checking of OCR support.'
  id: totrans-572
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 全局属性 [`TESSDATA_PREFIX`](functions.html#TESSDATA_PREFIX "TESSDATA_PREFIX")，用于轻松检查OCR支持。'
- en: '**Changed** [`Document.xref_set_key()`](document.html#Document.xref_set_key
    "Document.xref_set_key") such that dictionary keys will physically be removed
    if set to value `"null"`.'
  id: totrans-573
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Document.xref_set_key()`](document.html#Document.xref_set_key "Document.xref_set_key")，使字典键如果设置为值
    `"null"` 将被物理删除。'
- en: '**Changed** [`Document.extract_font()`](document.html#Document.extract_font
    "Document.extract_font") to optionally return a dictionary (instead of a tuple).'
  id: totrans-574
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Document.extract_font()`](document.html#Document.extract_font "Document.extract_font")
    可选择返回字典（而非元组）。'
- en: '* * *'
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.19.3**'
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.19.3 中的变更**'
- en: This patch version implements minor improvements for [Pixmap](pixmap.html#pixmap)
    and also some important fixes.
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: 此补丁版本对 [Pixmap](pixmap.html#pixmap) 进行了一些重要修复和一些小改进。
- en: '**Fixed** [#1351](https://github.com/pymupdf/PyMuPDF/discussions/1351). Reverted
    code that introduced the memory growth in v1.18.15.'
  id: totrans-578
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1351](https://github.com/pymupdf/PyMuPDF/discussions/1351)。回滚了在 v1.18.15
    中引入的导致内存增长的代码。'
- en: '**Fixed** [#1417](https://github.com/pymupdf/PyMuPDF/discussions/1417). Developped
    circumvention for growth of open file handles using [`Document.insert_pdf()`](document.html#Document.insert_pdf
    "Document.insert_pdf").'
  id: totrans-579
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1417](https://github.com/pymupdf/PyMuPDF/discussions/1417)。开发了一种解决使用
    [`Document.insert_pdf()`](document.html#Document.insert_pdf "Document.insert_pdf")
    时文件句柄增长问题的方法。'
- en: '**Fixed** [#1418](https://github.com/pymupdf/PyMuPDF/discussions/1418). Developped
    circumvention for memory growth using [`Document.insert_pdf()`](document.html#Document.insert_pdf
    "Document.insert_pdf").'
  id: totrans-580
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1418](https://github.com/pymupdf/PyMuPDF/discussions/1418)。开发了一种解决使用
    [`Document.insert_pdf()`](document.html#Document.insert_pdf "Document.insert_pdf")
    时内存增长问题的方法。'
- en: '**Fixed** [#1430](https://github.com/pymupdf/PyMuPDF/discussions/1430). Developped
    circumvention for mass pixmap generations of document pages.'
  id: totrans-581
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1430](https://github.com/pymupdf/PyMuPDF/discussions/1430)。开发了一种解决文档页面大量位图生成问题的方法。'
- en: '**Fixed** [#1433](https://github.com/pymupdf/PyMuPDF/discussions/1433). Solves
    a bbox error for some Type 3 font in PyMuPDF text processing.'
  id: totrans-582
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1433](https://github.com/pymupdf/PyMuPDF/discussions/1433)。解决了 PyMuPDF
    文本处理中某些 Type 3 字体的 bbox 错误。'
- en: '**Added** [`Pixmap.color_topusage()`](pixmap.html#Pixmap.color_topusage "Pixmap.color_topusage")
    to determine the share of the most frequently used color. Solves [#1397](https://github.com/pymupdf/PyMuPDF/discussions/1397).'
  id: totrans-583
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`Pixmap.color_topusage()`](pixmap.html#Pixmap.color_topusage "Pixmap.color_topusage")
    用于确定最常用颜色的份额。解决了 [#1397](https://github.com/pymupdf/PyMuPDF/discussions/1397)。'
- en: '**Added** [`Pixmap.warp()`](pixmap.html#Pixmap.warp "Pixmap.warp") which makes
    a new pixmap from a given arbitrary convex quad inside the pixmap.'
  id: totrans-584
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`Pixmap.warp()`](pixmap.html#Pixmap.warp "Pixmap.warp")，从位图内部的任意凸四边形生成新位图。'
- en: '**Added** [`Annot.irt_xref`](annot.html#Annot.irt_xref "Annot.irt_xref") and
    [`Annot.set_irt_xref()`](annot.html#Annot.set_irt_xref "Annot.set_irt_xref") to
    inquire or set the `/IRT` (“In Responde To”) property of an annotation. Implements
    [#1450](https://github.com/pymupdf/PyMuPDF/discussions/1450).'
  id: totrans-585
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`Annot.irt_xref`](annot.html#Annot.irt_xref "Annot.irt_xref") 和 [`Annot.set_irt_xref()`](annot.html#Annot.set_irt_xref
    "Annot.set_irt_xref") 用于查询或设置注释的 `/IRT`（“响应于”）属性。实现 [#1450](https://github.com/pymupdf/PyMuPDF/discussions/1450)。'
- en: '**Added** [`Rect.torect()`](rect.html#Rect.torect "Rect.torect") and [`IRect.torect()`](irect.html#IRect.torect
    "IRect.torect") which compute a matrix that transforms to a given other rectangle.'
  id: totrans-586
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`Rect.torect()`](rect.html#Rect.torect "Rect.torect") 和 [`IRect.torect()`](irect.html#IRect.torect
    "IRect.torect")，用于计算将矩形转换为给定其他矩形的矩阵。'
- en: '**Changed** [`Pixmap.color_count()`](pixmap.html#Pixmap.color_count "Pixmap.color_count")
    to also return the count of each color.'
  id: totrans-587
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Pixmap.color_count()`](pixmap.html#Pixmap.color_count "Pixmap.color_count")
    还会返回每种颜色的计数。'
- en: '**Changed** [`Page.get_texttrace()`](functions.html#Page.get_texttrace "Page.get_texttrace")
    to also return correct span and character bboxes if `span["dir"] != (1, 0)`.'
  id: totrans-588
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** [`Page.get_texttrace()`](functions.html#Page.get_texttrace "Page.get_texttrace")
    方法，以便在 `span["dir"] != (1, 0)` 时也返回正确的跨度和字符边界框。'
- en: '* * *'
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.19.2**'
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.19.2 变更**'
- en: This patch version implements minor improvements for [`Page.get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings") and also some important fixes.
  id: totrans-591
  prefs: []
  type: TYPE_NORMAL
  zh: 此补丁版本对 [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")
    进行了轻微改进，同时修复了一些重要问题。
- en: '**Fixed** [#1388](https://github.com/pymupdf/PyMuPDF/discussions/1388). Fixed
    intermittent memory corruption when insert or updating annotations.'
  id: totrans-592
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1388](https://github.com/pymupdf/PyMuPDF/discussions/1388)。修复了插入或更新注释时的间歇性内存损坏问题。'
- en: '**Fixed** [#1375](https://github.com/pymupdf/PyMuPDF/discussions/1375). Inconsistencies
    between line numbers as returned by the “words” and the “dict” options of [`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") have been corrected.'
  id: totrans-593
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1375](https://github.com/pymupdf/PyMuPDF/discussions/1375)。修正了由 [`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") 的 "words" 和 "dict" 选项返回的行号不一致的问题。'
- en: '**Fixed** [#1364](https://github.com/pymupdf/PyMuPDF/issues/1342). The check
    for being a `"rawdict"` span in [`recover_span_quad()`](functions.html#recover_span_quad
    "recover_span_quad") now works correctly.'
  id: totrans-594
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1364](https://github.com/pymupdf/PyMuPDF/issues/1342)。现在 [`recover_span_quad()`](functions.html#recover_span_quad
    "recover_span_quad") 中对 `"rawdict"` 跨度的检查已正常工作。'
- en: '**Fixed** [#1342](https://github.com/pymupdf/PyMuPDF/issues/1364). Corrected
    the check for rectangle infiniteness in [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page").'
  id: totrans-595
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1342](https://github.com/pymupdf/PyMuPDF/issues/1364)。修正了 [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page") 中矩形无限性检查的问题。'
- en: '**Changed** [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings"),
    [`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings") to
    return an indicator on the area orientation covered by a rectangle. This implements
    [#1355](https://github.com/pymupdf/PyMuPDF/issues/1355). Also, the recognition
    rate for rectangles and quads has been significantly improved.'
  id: totrans-596
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")
    和 [`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings")
    方法，以返回矩形覆盖的区域方向指示器。这实现了 [#1355](https://github.com/pymupdf/PyMuPDF/issues/1355)。此外，矩形和四边形的识别率显著提高。'
- en: '**Changed** all text search and extraction methods to set the new `flags` option
    `TEXT_MEDIABOX_CLIP` to ON by default. That bit causes the automatic suppression
    of all characters that are completely outside a page’s mediabox (in as far as
    that notion is supported for a document type). This eliminates the need for using
    `clip=page.rect` or similar for omitting text outside the visible area.'
  id: totrans-597
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** 所有文本搜索和提取方法，将新的 `flags` 选项 `TEXT_MEDIABOX_CLIP` 默认设置为打开状态。该位控制自动抑制所有完全位于页面媒体框外的字符（在文档类型支持的范围内）。这消除了需要使用
    `clip=page.rect` 或类似选项来省略可见区域外文本的需求。'
- en: '**Added** parameter `"dpi"` to [`Page.get_pixmap()`](page.html#Page.get_pixmap
    "Page.get_pixmap") and [`Annot.get_pixmap()`](annot.html#Annot.get_pixmap "Annot.get_pixmap").
    When given, parameter `"matrix"` is ignored, and a [Pixmap](pixmap.html#pixmap)
    with the desired dots per inch is created.'
  id: totrans-598
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `"dpi"` 参数到 [`Page.get_pixmap()`](page.html#Page.get_pixmap "Page.get_pixmap")
    和 [`Annot.get_pixmap()`](annot.html#Annot.get_pixmap "Annot.get_pixmap") 方法。当给定时，忽略
    `"matrix"` 参数，创建一个具有所需每英寸点数的 [Pixmap](pixmap.html#pixmap)。'
- en: '**Added** attributes [`Pixmap.is_monochrome`](pixmap.html#Pixmap.is_monochrome
    "Pixmap.is_monochrome") and [`Pixmap.is_unicolor`](pixmap.html#Pixmap.is_unicolor
    "Pixmap.is_unicolor") allowing fast checks of pixmap properties. Addresses [#1397](https://github.com/pymupdf/PyMuPDF/discussions/1397).'
  id: totrans-599
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 属性 [`Pixmap.is_monochrome`](pixmap.html#Pixmap.is_monochrome "Pixmap.is_monochrome")
    和 [`Pixmap.is_unicolor`](pixmap.html#Pixmap.is_unicolor "Pixmap.is_unicolor")，允许快速检查位图属性。解决了
    [#1397](https://github.com/pymupdf/PyMuPDF/discussions/1397) 的问题。'
- en: '**Added** method [`Pixmap.color_count()`](pixmap.html#Pixmap.color_count "Pixmap.color_count")
    to determine the unique colors in the pixmap.'
  id: totrans-600
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 方法 [`Pixmap.color_count()`](pixmap.html#Pixmap.color_count "Pixmap.color_count")
    以确定位图中唯一颜色的数量。'
- en: '**Added** boolean parameter `"compress"` to PDF document method [`Document.update_stream()`](document.html#Document.update_stream
    "Document.update_stream"). Addresses / enables solution for [#1408](https://github.com/pymupdf/PyMuPDF/discussions/1408).'
  id: totrans-601
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** PDF 文档方法 [`Document.update_stream()`](document.html#Document.update_stream
    "Document.update_stream") 的布尔参数 `"compress"`。解决了 [#1408](https://github.com/pymupdf/PyMuPDF/discussions/1408)
    的问题。'
- en: '* * *'
  id: totrans-602
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.19.1**'
  id: totrans-603
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.19.1 变更**'
- en: This is the first patch version to support MuPDF v1.19.0\. Apart from one bug
    fix, it includes important improvements for OCR support and the option to **sort
    extracted text** to the standard reading order “from top-left to bottom-right”.
  id: totrans-604
  prefs: []
  type: TYPE_NORMAL
  zh: 这是支持MuPDF v1.19.0的第一个补丁版本。除了一个bug修复外，还包括OCR支持的重要改进以及对**提取文本进行排序**到标准阅读顺序“从左上到右下”的选项。
- en: '**Fixed** [#1328](https://github.com/pymupdf/PyMuPDF/issues/1328). “words”
    text extraction again returns correct `(x0, y0)` coordinates.'
  id: totrans-605
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复了**[#1328](https://github.com/pymupdf/PyMuPDF/issues/1328)。再次返回正确的“words”文本提取的`(x0,
    y0)`坐标。'
- en: '**Changed** [`Page.get_textpage_ocr()`](page.html#Page.get_textpage_ocr "Page.get_textpage_ocr"):
    it now supports parameter `dpi` to control OCR quality. It is also possible to
    choose whether the **full page** should be OCRed or **only the images displayed**
    by the page.'
  id: totrans-606
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了**[`Page.get_textpage_ocr()`](page.html#Page.get_textpage_ocr "Page.get_textpage_ocr")：现在支持参数`dpi`来控制OCR质量。还可以选择是对**整页**进行OCR还是仅对页面显示的图像进行OCR。'
- en: '**Changed** [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")
    and [`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings")
    to automatically convert colors to RGB color tuples. Implements [#1332](https://github.com/pymupdf/PyMuPDF/discussions/1332).
    Similar change was applied to [`Page.get_texttrace()`](functions.html#Page.get_texttrace
    "Page.get_texttrace").'
  id: totrans-607
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了**[`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")和[`Page.get_cdrawings()`](page.html#Page.get_cdrawings
    "Page.get_cdrawings")，以自动将颜色转换为RGB颜色元组。实现了[#1332](https://github.com/pymupdf/PyMuPDF/discussions/1332)。类似的更改也应用于[`Page.get_texttrace()`](functions.html#Page.get_texttrace
    "Page.get_texttrace")。'
- en: '**Changed** [`Page.get_text()`](page.html#Page.get_text "Page.get_text") to
    support a parameter `sort`. If set to `True` the output is conveniently sorted.'
  id: totrans-608
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了**[`Page.get_text()`](page.html#Page.get_text "Page.get_text")以支持参数`sort`。如果设置为`True`，输出将方便地排序。'
- en: '* * *'
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.19.0**'
  id: totrans-610
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.19.0版本的变更**'
- en: This is the first version supporting MuPDF 1.19.*, published 2021-10-05\. It
    introduces many new features compared to the previous version 1.18.*.
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: 这是支持MuPDF 1.19.*的第一个版本，发布于2021-10-05。与前一个版本1.18.*相比，引入了许多新功能。
- en: PyMuPDF has now picked up integrated Tesseract OCR support, which was already
    present in MuPDF v1.18.0.
  id: totrans-612
  prefs: []
  type: TYPE_NORMAL
  zh: PyMuPDF现在已经支持了集成的Tesseract OCR支持，这在MuPDF v1.18.0中已经存在。
- en: Supported images can be OCRed via their [Pixmap](pixmap.html#pixmap) which results
    in a 1-page PDF with a text layer.
  id: totrans-613
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 受支持的图片可以通过它们的[Pixmap](pixmap.html#pixmap)进行OCR，生成带有文本层的1页PDF。
- en: All supported document pages (i.e. not only PDFs), can be OCRed using specialized
    text extraction methods. The result is a mixture of standard and OCR text (depending
    on which part of the page was deemed to require OCRing) that can be searched and
    extracted without restrictions.
  id: totrans-614
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有支持的文档页面（不仅限于PDF）都可以使用专业的文本提取方法进行OCR。结果是标准和OCR文本的混合（取决于页面的哪部分需要OCR），可以无限制地搜索和提取。
- en: All this requires an independent installation of Tesseract. MuPDF actually (only)
    needs the location of Tesseract’s `"tessdata"` folder, where its language support
    data are stored. This location must be available as environment variable `TESSDATA_PREFIX`.
  id: totrans-615
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有这些都需要独立安装Tesseract。实际上，MuPDF（仅）需要Tesseract的“tessdata”文件夹的位置，其中存储了其语言支持数据。此位置必须作为环境变量`TESSDATA_PREFIX`可用。
- en: A new MuPDF feature is **journalling PDF updates**, which is also supported
    by this PyMuPDF version. Changes may be logged, rolled back or replayed, allowing
    to implement a whole new level of control over PDF document integrity – similar
    to functions present in modern database systems.
  id: totrans-616
  prefs: []
  type: TYPE_NORMAL
  zh: 新的MuPDF功能是**记录PDF更新**，这也得到了PyMuPDF版本的支持。更改可能被记录、回滚或重播，允许实现对PDF文档完整性的全新控制级别，类似于现代数据库系统中的功能。
- en: A third feature (unrelated to the new MuPDF version) includes the ability to
    detect when page **objects cover or hide each other**. It is now e.g. possible
    to see that text is covered by a drawing or an image.
  id: totrans-617
  prefs: []
  type: TYPE_NORMAL
  zh: 第三个功能（与新MuPDF版本无关）包括检测页面对象何时**覆盖或隐藏彼此**。例如，现在可以看到文本被绘图或图像覆盖。
- en: '**Changed** terminology and meaning of important geometry concepts: Rectangles
    are now characterized as *finite*, *valid* or *empty*, while the definitions of
    these terms have also changed. Rectangles specifically are now thought of being
    “open”: not all corners and sides are considered part of the retangle. Please
    do read the [Rect](rect.html#rect) section for details.'
  id: totrans-618
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改**了重要几何概念的术语和含义：矩形现在被描述为*有限*、*有效*或*空*，同时这些术语的定义也有所变化。具体而言，矩形现在被视为“开放”：并非所有的角和边都被认为是矩形的一部分。请参阅[矩形](rect.html#rect)章节了解详情。'
- en: '**Added** new parameter `"no_new_id"` to [`Document.save()`](document.html#Document.save
    "Document.save") / [`Document.tobytes()`](document.html#Document.tobytes "Document.tobytes")
    methods. Use it to suppress updating the second item of the document `/ID` which
    in PDF indicates that the original file has been updated. If the PDF has no `/ID`
    at all yet, then no new one will be created either.'
  id: totrans-619
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了一个名为`"no_new_id"`的参数到[`Document.save()`](document.html#Document.save
    "Document.save") / [`Document.tobytes()`](document.html#Document.tobytes "Document.tobytes")
    方法中。使用它来抑制更新PDF文档的第二项`/ID`，在PDF中表示原始文件已被更新。如果PDF中还没有`/ID`，则也不会创建新的`/ID`。'
- en: '**Added** a **journalling facility** for PDF updates. This allows logging changes,
    undoing or redoing them, or saving the journal for later use. Refer to [`Document.journal_enable()`](document.html#Document.journal_enable
    "Document.journal_enable") and friends.'
  id: totrans-620
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了用于PDF更新的**日志记录功能**。这允许记录更改、撤销或重做操作，并将日志保存以供以后使用。请参阅[`Document.journal_enable()`](document.html#Document.journal_enable
    "Document.journal_enable") 及相关方法。'
- en: '**Added** new [Pixmap](pixmap.html#pixmap) methods [`Pixmap.pdfocr_save()`](pixmap.html#Pixmap.pdfocr_save
    "Pixmap.pdfocr_save") and [`Pixmap.pdfocr_tobytes()`](pixmap.html#Pixmap.pdfocr_tobytes
    "Pixmap.pdfocr_tobytes"), which generate a 1-page PDF containing the pixmap as
    PNG image with OCR text layer.'
  id: totrans-621
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了新的[Pixmap](pixmap.html#pixmap) 方法 [`Pixmap.pdfocr_save()`](pixmap.html#Pixmap.pdfocr_save
    "Pixmap.pdfocr_save") 和 [`Pixmap.pdfocr_tobytes()`](pixmap.html#Pixmap.pdfocr_tobytes
    "Pixmap.pdfocr_tobytes")，生成包含OCR文本层的PNG图像的单页PDF。'
- en: '**Added** [`Page.get_textpage_ocr()`](page.html#Page.get_textpage_ocr "Page.get_textpage_ocr")
    which executes optical character recognition for the page, then extracts the results
    and stores them together with “normal” page content in a [TextPage](textpage.html#textpage).
    Use or reuse this object in subsequent text extractions and text searches to avoid
    multiple efforts. The existing text search and text extraction methods have been
    extended to support a separately created textpage – see next item.'
  id: totrans-622
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了[`Page.get_textpage_ocr()`](page.html#Page.get_textpage_ocr "Page.get_textpage_ocr")
    方法，用于执行页面的光学字符识别，然后将结果提取并与“普通”页面内容一起存储在[TextPage](textpage.html#textpage)中。在后续的文本提取和文本搜索中使用或重复使用此对象，以避免多次努力。已扩展现有的文本搜索和文本提取方法以支持单独创建的textpage
    — 请参阅下一项。'
- en: '**Added** a new parameter `textpage` to text extraction and text search methods.
    This allows reuse of a previously created [TextPage](textpage.html#textpage) and
    thus achieves significant runtime benefits – which is especially important for
    the new OCR features. But “normal” text extractions can definitely also benefit.'
  id: totrans-623
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了一个名为`textpage`的参数到文本提取和文本搜索方法中。这允许重复使用之前创建的[TextPage](textpage.html#textpage)，从而实现显著的运行时优势——这对于新的OCR功能尤为重要。但“普通”的文本提取也能从中受益。'
- en: '**Added** [`Page.get_texttrace()`](functions.html#Page.get_texttrace "Page.get_texttrace"),
    a technical method delivering low-level text character properties. It was present
    before as a private method, but the author felt it now is mature enough to be
    officially available. It specifically includes a “sequence number” which indicates
    the page appearance build operation that painted the text.'
  id: totrans-624
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了[`Page.get_texttrace()`](functions.html#Page.get_texttrace "Page.get_texttrace")
    方法，提供低级文本字符属性的技术方法。它以前是一个私有方法，但作者认为现在它已经足够成熟，可以正式提供。它特别包括一个“序列号”，指示绘制文本的页面外观构建操作。'
- en: '**Added** [`Page.get_bboxlog()`](functions.html#Page.get_bboxlog "Page.get_bboxlog")
    which delivers the list of rectangles of page objects like text, images or drawings.
    Its significance lies in its sequence: rectangles intersecting areas with a lower
    index are covering or hiding them.'
  id: totrans-625
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了[`Page.get_bboxlog()`](functions.html#Page.get_bboxlog "Page.get_bboxlog")
    方法，提供页面对象（如文本、图像或绘图）的矩形列表。其重要性在于其顺序：索引较低的矩形覆盖或隐藏了其后的区域。'
- en: '**Changed** methods [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")
    and [`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings")
    to include a “sequence number” indicating the page appearance build operation
    that created the drawing.'
  id: totrans-626
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**方法 [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")
    和 [`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings")，现在包括一个表示页面外观构建操作创建的“序列号”。'
- en: '**Fixed** [#1311](https://github.com/pymupdf/PyMuPDF/issues/1311). Field values
    in comboboxes should now be handled correctly.'
  id: totrans-627
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1311](https://github.com/pymupdf/PyMuPDF/issues/1311)。组合框中的字段值现在应该能够正确处理。'
- en: '**Fixed** [#1290](https://github.com/pymupdf/PyMuPDF/issues/1290). Error was
    caused by incorrect rectangle emptiness check, which is fixed due to new geometry
    logic of this version.'
  id: totrans-628
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1290](https://github.com/pymupdf/PyMuPDF/issues/1290)。由于新版本的几何逻辑，由于错误的矩形空白检查而导致的错误已修复。'
- en: '**Fixed** [#1286](https://github.com/pymupdf/PyMuPDF/issues/1286). Text alignment
    for redact annotations is working again.'
  id: totrans-629
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1286](https://github.com/pymupdf/PyMuPDF/issues/1286)。红色动作注释的文本对齐问题已恢复。'
- en: '**Fixed** [#1287](https://github.com/pymupdf/PyMuPDF/issues/1287). Infinite
    loop issue for non-Windows systems when applying some redactions has been resolved.'
  id: totrans-630
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1287](https://github.com/pymupdf/PyMuPDF/issues/1287)。在非 Windows 系统上应用某些红色动作时发生的无限循环问题已解决。'
- en: '**Fixed** [#1284](https://github.com/pymupdf/PyMuPDF/issues/1284). Text layout
    destruction after applying redactions in some cases has been resolved.'
  id: totrans-631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** [#1284](https://github.com/pymupdf/PyMuPDF/issues/1284)。在某些情况下应用红色动作后文本布局破坏问题已解决。'
- en: '* * *'
  id: totrans-632
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.18 / 1.18.19**'
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.18.18 / 1.18.19 的变更**'
- en: '**Fixed** issue [#1266](https://github.com/pymupdf/PyMuPDF/issues/1266). Failure
    to set [`Pixmap.samples`](pixmap.html#Pixmap.samples "Pixmap.samples") in important
    cases, was hotfixed in a new version 1.18.19.'
  id: totrans-634
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1266](https://github.com/pymupdf/PyMuPDF/issues/1266)。在重要情况下未设置[`Pixmap.samples`](pixmap.html#Pixmap.samples
    "Pixmap.samples")的失败已在新版本 1.18.19 中进行了热修复。'
- en: '**Fixed** issue [#1257](https://github.com/pymupdf/PyMuPDF/issues/1257). Removing
    the read-only flag from PDF fields is now possible.'
  id: totrans-635
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1257](https://github.com/pymupdf/PyMuPDF/issues/1257)。现在可以解除 PDF
    字段的只读标志。'
- en: '**Fixed** issue [#1252](https://github.com/pymupdf/PyMuPDF/issues/1252). Now
    correctly specifying the `zoom` value for PDF link annotations.'
  id: totrans-636
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1252](https://github.com/pymupdf/PyMuPDF/issues/1252)。现在正确指定了 PDF
    链接注释的 `zoom` 值。'
- en: '**Fixed** issue [#1244](https://github.com/pymupdf/PyMuPDF/issues/1244). Now
    correctly computing the transform matrix in `Page.get_image__bbox()`.'
  id: totrans-637
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1244](https://github.com/pymupdf/PyMuPDF/issues/1244)。现在在 `Page.get_image__bbox()`
    方法中正确计算变换矩阵。'
- en: '**Fixed** issue [#1241](https://github.com/pymupdf/PyMuPDF/issues/1241). Prevent
    returning artifact characters in [`Page.get_textbox()`](page.html#Page.get_textbox
    "Page.get_textbox"), which happened in certain constellations.'
  id: totrans-638
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1241](https://github.com/pymupdf/PyMuPDF/issues/1241)。在某些情况下，防止在[`Page.get_textbox()`](page.html#Page.get_textbox
    "Page.get_textbox")中返回工件字符。'
- en: '**Fixed** issue [#1234](https://github.com/pymupdf/PyMuPDF/issues/1234). Avoid
    creating infinite rectangles in corner cases – [`Page.get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings"), [`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings").'
  id: totrans-639
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1234](https://github.com/pymupdf/PyMuPDF/issues/1234)。避免在边界情况下创建无限矩形
    - [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")，[`Page.get_cdrawings()`](page.html#Page.get_cdrawings
    "Page.get_cdrawings")。'
- en: '**Added** test data and test scripts to the source PyPI source distribution.'
  id: totrans-640
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了测试数据和测试脚本到 PyPI 源发行版中。'
- en: '* * *'
  id: totrans-641
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.17**'
  id: totrans-642
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.18.17 的变更**'
- en: Focus of this version are major performance improvements of selected functions.
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: 本版本的重点是对选定功能的主要性能改进。
- en: '**Fixed** issue [#1199](https://github.com/pymupdf/PyMuPDF/issues/1199). Using
    a non-existing page number in [`Document.get_page_images()`](document.html#Document.get_page_images
    "Document.get_page_images") and friends will no longer lead to segfaults.'
  id: totrans-644
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1199](https://github.com/pymupdf/PyMuPDF/issues/1199)。在[`Document.get_page_images()`](document.html#Document.get_page_images
    "Document.get_page_images")及其相关方法中使用不存在的页码不再导致段错误。'
- en: '**Changed** [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")
    to now differentiate between “stroke”, “fill” and combined paths. Paths containing
    more than one rectangle (i.e. “re” items) are now supported. Extracting “clipped”
    paths is now available as an option.'
  id: totrans-645
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings")，现在区分“描边”、“填充”和组合路径。现在支持包含多个矩形（即“re”项）的路径。提取“剪辑”路径现在作为选项可用。'
- en: '**Added** [`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings"),
    performance-optimized version of [`Page.get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings").'
  id: totrans-646
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**[`Page.get_cdrawings()`](page.html#Page.get_cdrawings "Page.get_cdrawings")，性能优化版本的[`Page.get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings")。'
- en: '**Added** [`Pixmap.samples_mv`](pixmap.html#Pixmap.samples_mv "Pixmap.samples_mv"),
    *memoryview* of a pixmap’s pixel area. Does not copy and thus always accesses
    the current state of that area.'
  id: totrans-647
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**[`Pixmap.samples_mv`](pixmap.html#Pixmap.samples_mv "Pixmap.samples_mv")，像素图像素区域的*memoryview*。不会复制，因此始终访问该区域的当前状态。'
- en: '**Added** [`Pixmap.samples_ptr`](pixmap.html#Pixmap.samples_ptr "Pixmap.samples_ptr"),
    Python “pointer” to a pixmap’s pixel area. Allows much faster creation (factor
    800+) of Qt images.'
  id: totrans-648
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**[`Pixmap.samples_ptr`](pixmap.html#Pixmap.samples_ptr "Pixmap.samples_ptr")，Python中一个指向像素图像素区域的“指针”。可以大大加快创建（速度提高800+倍）Qt图像的速度。'
- en: '* * *'
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.16**'
  id: totrans-650
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.16 版本变更**'
- en: '**Fixed** issue [#1184](https://github.com/pymupdf/PyMuPDF/issues/1184). Existing
    PDF widget fonts in a PDF are now accepted (i.e. not forcedly changed to a Base-14
    font).'
  id: totrans-651
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1184](https://github.com/pymupdf/PyMuPDF/issues/1184)。PDF中现有的小部件字体现在被接受（即不强制更改为Base-14字体）。'
- en: '**Fixed** issue [#1154](https://github.com/pymupdf/PyMuPDF/issues/1154). Text
    search hits should now be correct when `clip` is specified.'
  id: totrans-652
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1154](https://github.com/pymupdf/PyMuPDF/issues/1154)。当指定`clip`时，文本搜索结果现在应该是正确的。'
- en: '**Fixed** issue [#1152](https://github.com/pymupdf/PyMuPDF/issues/1152).'
  id: totrans-653
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1152](https://github.com/pymupdf/PyMuPDF/issues/1152)。'
- en: '**Fixed** issue [#1146](https://github.com/pymupdf/PyMuPDF/issues/1146).'
  id: totrans-654
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1146](https://github.com/pymupdf/PyMuPDF/issues/1146)。'
- en: '**Added** [`Link.flags`](link.html#Link.flags "Link.flags") and [`Link.set_flags()`](link.html#Link.set_flags
    "Link.set_flags") to the [Link](link.html#link) class. Implements enhancement
    requests [#1187](https://github.com/pymupdf/PyMuPDF/issues/1187).'
  id: totrans-655
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**[`Link.flags`](link.html#Link.flags "Link.flags")和[`Link.set_flags()`](link.html#Link.set_flags
    "Link.set_flags")到[Link](link.html#link)类。实现增强请求 [#1187](https://github.com/pymupdf/PyMuPDF/issues/1187)。'
- en: '**Added** option to *simulate* [`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox") output for predicting the number of lines, that a given
    text would occupy in the textbox.'
  id: totrans-656
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**选项，用于模拟[`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox")的输出，以预测给定文本在文本框中占据的行数。'
- en: '**Added** text output support as subcommand `gettext` to the `fitz` CLI module.
    Most importantly, original **physical text layout** reproduction is now supported.'
  id: totrans-657
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**对`fitz` CLI模块的子命令`gettext`的文本输出支持。最重要的是，现在支持原始**物理文本布局**的再现。'
- en: '* * *'
  id: totrans-658
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.15**'
  id: totrans-659
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.15 版本变更**'
- en: '**Fixed** issue [#1088](https://github.com/pymupdf/PyMuPDF/issues/1088). Removing
    an annotation’s fill color should now work again both ways, using the `fill_color=[]`
    argument in [`Annot.update()`](annot.html#Annot.update "Annot.update") as well
    as `fill=[]` in [`Annot.set_colors()`](annot.html#Annot.set_colors "Annot.set_colors").'
  id: totrans-660
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1088](https://github.com/pymupdf/PyMuPDF/issues/1088)。现在应该可以正确地移除注释的填充颜色，使用[`Annot.update()`](annot.html#Annot.update
    "Annot.update")中的`fill_color=[]`参数以及[`Annot.set_colors()`](annot.html#Annot.set_colors
    "Annot.set_colors")中的`fill=[]`。'
- en: '**Fixed** issue [#1081](https://github.com/pymupdf/PyMuPDF/issues/1081). [`Document.subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts"): fixed an error which created wrong character widths
    for some fonts.'
  id: totrans-661
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1081](https://github.com/pymupdf/PyMuPDF/issues/1081)。[`Document.subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts")：修复了某些字体的字符宽度错误的问题。'
- en: '**Fixed** issue [#1078](https://github.com/pymupdf/PyMuPDF/issues/1078). [`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") and other methods related to text extraction: changed the default
    value of the [TextPage](textpage.html#textpage) `flags` parameter. All whitespace
    and `ligatures` are now preserved.'
  id: totrans-662
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1078](https://github.com/pymupdf/PyMuPDF/issues/1078)。[`Page.get_text()`](page.html#Page.get_text
    "Page.get_text")和其他与文本提取相关的方法：更改了[TextPage](textpage.html#textpage) `flags`参数的默认值。现在保留所有空白和连字。'
- en: '**Fixed** issue [#1085](https://github.com/pymupdf/PyMuPDF/issues/1085). The
    old *snake_cased* alias of `fitz.detTextlength` is now defined correctly.'
  id: totrans-663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1085](https://github.com/pymupdf/PyMuPDF/issues/1085)。旧的*snake_cased*别名`fitz.detTextlength`现在已正确定义。'
- en: '**Changed** [`Document.subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts") will now correctly prefix font subsets with an appropriate
    six letter uppercase tag, complying with the PDF specification.'
  id: totrans-664
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**[`Document.subset_fonts()`](document.html#Document.subset_fonts "Document.subset_fonts")现在将正确地前缀字体子集，符合PDF规范的六个大写字母标签。'
- en: '**Added** new method [`Widget.button_states()`](widget.html#Widget.button_states
    "Widget.button_states") which returns the possible values that a button-type field
    can have when being set to “on” or “off”.'
  id: totrans-665
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**新方法[`Widget.button_states()`](widget.html#Widget.button_states "Widget.button_states")，返回按钮类型字段在设置为“on”或“off”时可能具有的值。'
- en: '**Added** support of text with **Small Capital** letters to the [Font](font.html#font)
    and [TextWriter](textwriter.html#textwriter) classes. This is reflected by an
    additional bool parameter `small_caps` in various of their methods.'
  id: totrans-666
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**为[Font](font.html#font)和[TextWriter](textwriter.html#textwriter)类支持具有**小型大写**字母的文本。这在它们的多个方法中通过额外的布尔参数`small_caps`反映出来。'
- en: '* * *'
  id: totrans-667
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.14**'
  id: totrans-668
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.18.14 变更**'
- en: '**Finished** implementing new, “snake_cased” names for methods and properties,
    that were “camelCased” and awkward in many aspects. At the end of this documentation,
    there is section [Deprecated Names](znames.html#deprecated) with more background
    and a mapping of old to new names.'
  id: totrans-669
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**完成**实现了新的“snake_cased”方法和属性名称，这些名称以前是“camelCased”并且在许多方面都很尴尬。文档末尾有一个名为[Deprecated
    Names](znames.html#deprecated)的部分，提供了更多背景信息和从旧名称到新名称的映射。'
- en: '**Fixed** issue [#1053](https://github.com/pymupdf/PyMuPDF/issues/1053). [`Page.insert_image()`](page.html#Page.insert_image
    "Page.insert_image"): when given, include image mask in the hash computation.'
  id: totrans-670
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1053](https://github.com/pymupdf/PyMuPDF/issues/1053)。[`Page.insert_image()`](page.html#Page.insert_image
    "Page.insert_image")：如给定，则在哈希计算中包括图像掩码。'
- en: '**Fixed** issue [#1043](https://github.com/pymupdf/PyMuPDF/issues/1043). Added
    `Pixmap.getPNGdata` to the aliases of [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes
    "Pixmap.tobytes").'
  id: totrans-671
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1043](https://github.com/pymupdf/PyMuPDF/issues/1043)。将`Pixmap.getPNGdata`添加到[`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes
    "Pixmap.tobytes")的别名中。'
- en: '**Fixed** an internal error when computing the enveloping rectangle of drawn
    paths as returned by [`Page.get_drawings()`](page.html#Page.get_drawings "Page.get_drawings").'
  id: totrans-672
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**计算绘制路径的包围矩形时出现的内部错误，该错误由[`Page.get_drawings()`](page.html#Page.get_drawings
    "Page.get_drawings")返回。'
- en: '**Fixed** an internal error occasionally causing loops when outputting text
    via [`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox "TextWriter.fill_textbox").'
  id: totrans-673
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**通过[`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox")输出文本时偶尔导致循环的内部错误。'
- en: '**Added** [`Font.char_lengths()`](font.html#Font.char_lengths "Font.char_lengths"),
    which returns a tuple of character widths of a string.'
  id: totrans-674
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**[`Font.char_lengths()`](font.html#Font.char_lengths "Font.char_lengths")，返回字符串的字符宽度元组。'
- en: '**Added** more ways to specify pages in [`Document.delete_pages()`](document.html#Document.delete_pages
    "Document.delete_pages"). Now a sequence (list, tuple or range) can be specified,
    and the Python `del` statement can be used. In the latter case, Python `slices`
    are also accepted.'
  id: totrans-675
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**更多指定页面的方法[`Document.delete_pages()`](document.html#Document.delete_pages
    "Document.delete_pages")。现在可以指定序列（列表、元组或范围），并且可以使用 Python 的`del`语句。在后一种情况下，也接受
    Python 的切片。'
- en: '**Changed** [`Document.del_toc_item()`](document.html#Document.del_toc_item
    "Document.del_toc_item"), which disables a single item of the TOC: previously,
    the title text was removed. Instead, now the complete item will be shown grayed-out
    by supporting viewers.'
  id: totrans-676
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**[`Document.del_toc_item()`](document.html#Document.del_toc_item "Document.del_toc_item")，禁用
    TOC 中的单个项目：以前是移除标题文本，现在支持视图器显示整个项目为灰色。'
- en: '* * *'
  id: totrans-677
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.13**'
  id: totrans-678
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.18.13 变更**'
- en: '**Fixed** issue [#1014](https://github.com/pymupdf/PyMuPDF/issues/1014).'
  id: totrans-679
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#1014](https://github.com/pymupdf/PyMuPDF/issues/1014)。'
- en: '**Fixed** an internal memory leak when computing image bboxes – [`Page.get_image_bbox()`](page.html#Page.get_image_bbox
    "Page.get_image_bbox").'
  id: totrans-680
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**计算图像边界框时的内存泄漏，[`Page.get_image_bbox()`](page.html#Page.get_image_bbox
    "Page.get_image_bbox")。'
- en: '**Added** support for low-level access and modification of the PDF trailer.
    Applies to [`Document.xref_get_keys()`](document.html#Document.xref_get_keys "Document.xref_get_keys"),
    [`Document.xref_get_key()`](document.html#Document.xref_get_key "Document.xref_get_key"),
    and [`Document.xref_set_key()`](document.html#Document.xref_set_key "Document.xref_set_key").'
  id: totrans-681
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**支持对 PDF 尾部进行低级访问和修改。适用于[`Document.xref_get_keys()`](document.html#Document.xref_get_keys
    "Document.xref_get_keys")，[`Document.xref_get_key()`](document.html#Document.xref_get_key
    "Document.xref_get_key")和[`Document.xref_set_key()`](document.html#Document.xref_set_key
    "Document.xref_set_key")。'
- en: '**Added** documentation for maintaining private entries in PDF metadata.'
  id: totrans-682
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**为维护 PDF 元数据中的私有条目提供文档。'
- en: '**Added** documentation for handling transparent image insertions, [`Page.insert_image()`](page.html#Page.insert_image
    "Page.insert_image").'
  id: totrans-683
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 处理透明图像插入的文档，[`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")。'
- en: '**Added** [`Page.get_image_rects()`](page.html#Page.get_image_rects "Page.get_image_rects"),
    an improved version of [`Page.get_image_bbox()`](page.html#Page.get_image_bbox
    "Page.get_image_bbox").'
  id: totrans-684
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** [`Page.get_image_rects()`](page.html#Page.get_image_rects "Page.get_image_rects")，这是
    [`Page.get_image_bbox()`](page.html#Page.get_image_bbox "Page.get_image_bbox")
    的改进版本。'
- en: '**Changed** [`Document.delete_pages()`](document.html#Document.delete_pages
    "Document.delete_pages") to support various ways of specifying pages to delete.
    Implements [#1042](https://github.com/pymupdf/PyMuPDF/issues/1042).'
  id: totrans-685
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Document.delete_pages()`](document.html#Document.delete_pages "Document.delete_pages")
    以支持多种指定要删除页面的方法。实现了 [#1042](https://github.com/pymupdf/PyMuPDF/issues/1042)。'
- en: '**Changed** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    to also accept the xref of an existing image in the file. This allows “copying”
    images between pages, and extremely fast mutiple insertions.'
  id: totrans-686
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    还接受文件中现有图像的交叉引用。这允许在页面之间“复制”图像，并且支持极快的多次插入。'
- en: '**Changed** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    to also accept the integer parameter `alpha`. To be used for performance improvements.'
  id: totrans-687
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    还接受整数参数 `alpha`。用于性能改进。'
- en: '**Changed** [`Pixmap.set_alpha()`](pixmap.html#Pixmap.set_alpha "Pixmap.set_alpha")
    to support new parameters for pre-multiplying colors with their alpha values and
    setting a specific color to fully transparent (e.g. white).'
  id: totrans-688
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Pixmap.set_alpha()`](pixmap.html#Pixmap.set_alpha "Pixmap.set_alpha")
    以支持使用其 alpha 值预乘颜色和设置特定颜色为完全透明（例如白色）。'
- en: '**Changed** [`Document.embfile_add()`](document.html#Document.embfile_add "Document.embfile_add")
    to automatically set creation and modification date-time. Correspondingly, [`Document.embfile_upd()`](document.html#Document.embfile_upd
    "Document.embfile_upd") automatically maintains modification date-time (`/ModDate`
    PDF key), and [`Document.embfile_info()`](document.html#Document.embfile_info
    "Document.embfile_info") correspondingly reports these data. In addition, the
    embedded file’s associated “collection item” is included via its [`xref`](glossary.html#xref
    "xref"). This supports the development of PDF portfolio applications.'
  id: totrans-689
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Document.embfile_add()`](document.html#Document.embfile_add "Document.embfile_add")
    自动设置创建和修改日期时间。对应地，[`Document.embfile_upd()`](document.html#Document.embfile_upd
    "Document.embfile_upd") 自动维护修改日期时间（PDF 键 `/ModDate`），并且 [`Document.embfile_info()`](document.html#Document.embfile_info
    "Document.embfile_info") 相应地报告这些数据。此外，通过其 [`xref`](glossary.html#xref "xref")，还包括了嵌入文件的相关“集合项”，这支持开发
    PDF 组合应用。'
- en: '* * *'
  id: totrans-690
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.11 / 1.18.12**'
  id: totrans-691
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.18.11 / 1.18.12 中的更改**'
- en: '**Fixed** issue [#972](https://github.com/pymupdf/PyMuPDF/issues/972). Improved
    layout of source distribution material.'
  id: totrans-692
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#972](https://github.com/pymupdf/PyMuPDF/issues/972)。改进了源分发材料的布局。'
- en: '**Fixed** issue [#962](https://github.com/pymupdf/PyMuPDF/issues/962). Stabilized
    Linux distribution detection for generating PyMuPDF from sources.'
  id: totrans-693
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#962](https://github.com/pymupdf/PyMuPDF/issues/962)。稳定了 Linux 发行版检测以生成来自源代码的
    PyMuPDF。'
- en: '**Added:** [`Page.get_xobjects()`](page.html#Page.get_xobjects "Page.get_xobjects")
    delivers the result of [`Document.get_page_xobjects()`](document.html#Document.get_page_xobjects
    "Document.get_page_xobjects").'
  id: totrans-694
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加:** [`Page.get_xobjects()`](page.html#Page.get_xobjects "Page.get_xobjects")
    提供了 [`Document.get_page_xobjects()`](document.html#Document.get_page_xobjects
    "Document.get_page_xobjects") 的结果。'
- en: '**Added:** [`Page.get_image_info()`](page.html#Page.get_image_info "Page.get_image_info")
    delivers meta information for all images shown on the page.'
  id: totrans-695
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加:** [`Page.get_image_info()`](page.html#Page.get_image_info "Page.get_image_info")
    提供了页面上所有图像的元信息。'
- en: '**Added:** `Tools.mupdf_display_warnings()` allows setting on / off the display
    of MuPDF-generated warnings. The default is off.'
  id: totrans-696
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加:** `Tools.mupdf_display_warnings()` 允许设置开启/关闭 MuPDF 生成的警告显示。默认为关闭。'
- en: '**Added:** [`Document.ez_save()`](document.html#Document.ez_save "Document.ez_save")
    convenience alias of [`Document.save()`](document.html#Document.save "Document.save")
    with some different defaults.'
  id: totrans-697
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加:** [`Document.ez_save()`](document.html#Document.ez_save "Document.ez_save")
    是 [`Document.save()`](document.html#Document.save "Document.save") 的方便别名，具有一些不同的默认设置。'
- en: '**Changed:** Image extractions of document pages now also contain the image’s
    **transformation matrix**. This concerns [`Page.get_image_bbox()`](page.html#Page.get_image_bbox
    "Page.get_image_bbox") and the DICT, JSON, RAWDICT, and RAWJSON variants of [`Page.get_text()`](page.html#Page.get_text
    "Page.get_text").'
  id: totrans-698
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改：**文档页面的图像提取现在还包含图像的**变换矩阵**。这涉及[`Page.get_image_bbox()`](page.html#Page.get_image_bbox
    "Page.get_image_bbox")和[`Page.get_text()`](page.html#Page.get_text "Page.get_text")的DICT、JSON、RAWDICT和RAWJSON变体。'
- en: '* * *'
  id: totrans-699
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.10**'
  id: totrans-700
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.10版本更改**'
- en: '**Fixed** issue [#941](https://github.com/pymupdf/PyMuPDF/issues/941). Added
    old aliases for [`DisplayList.get_pixmap()`](displaylist.html#DisplayList.get_pixmap
    "DisplayList.get_pixmap") and [`DisplayList.get_textpage()`](displaylist.html#DisplayList.get_textpage
    "DisplayList.get_textpage").'
  id: totrans-701
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#941](https://github.com/pymupdf/PyMuPDF/issues/941)。为[`DisplayList.get_pixmap()`](displaylist.html#DisplayList.get_pixmap
    "DisplayList.get_pixmap")和[`DisplayList.get_textpage()`](displaylist.html#DisplayList.get_textpage
    "DisplayList.get_textpage")添加了旧别名。'
- en: '**Fixed** issue [#929](https://github.com/pymupdf/PyMuPDF/issues/929). Stabilized
    removal of JavaScript objects with [`Document.scrub()`](document.html#Document.scrub
    "Document.scrub").'
  id: totrans-702
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#929](https://github.com/pymupdf/PyMuPDF/issues/929)。通过[`Document.scrub()`](document.html#Document.scrub
    "Document.scrub")稳定移除JavaScript对象。'
- en: '**Fixed** issue [#927](https://github.com/pymupdf/PyMuPDF/issues/927). Removed
    a loop in the reworked [`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox").'
  id: totrans-703
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#927](https://github.com/pymupdf/PyMuPDF/issues/927)。在重做的[`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox")中移除了一个循环。'
- en: '**Changed** [`Document.xref_get_keys()`](document.html#Document.xref_get_keys
    "Document.xref_get_keys") and [`Document.xref_get_key()`](document.html#Document.xref_get_key
    "Document.xref_get_key") to also allow accessing the PDF trailer dictionary. This
    can be done by using `-1` as the xref number argument.'
  id: totrans-704
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**[`Document.xref_get_keys()`](document.html#Document.xref_get_keys "Document.xref_get_keys")和[`Document.xref_get_key()`](document.html#Document.xref_get_key
    "Document.xref_get_key")，还允许访问PDF尾部字典。可以通过将xref编号参数设置为`-1`来实现。'
- en: '**Added** a number of functions for reconstructing the quads for text lines,
    spans and characters extracted by [`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") options “dict” and “rawdict”. See [`recover_quad()`](functions.html#recover_quad
    "recover_quad") and friends.'
  id: totrans-705
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了一些用于重建由[`Page.get_text()`](page.html#Page.get_text "Page.get_text")选项“dict”和“rawdict”提取的文本行、跨度和字符的四边形函数。参见[`recover_quad()`](functions.html#recover_quad
    "recover_quad")及相关函数。'
- en: '**Added** [`Tools.unset_quad_corrections()`](tools.html#Tools.unset_quad_corrections
    "Tools.unset_quad_corrections") to suppress character quad corrections (occasionally
    required for erroneous fonts).'
  id: totrans-706
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**[`Tools.unset_quad_corrections()`](tools.html#Tools.unset_quad_corrections
    "Tools.unset_quad_corrections")以抑制字符四边形校正（偶尔对错误字体需要）。'
- en: '* * *'
  id: totrans-707
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.9**'
  id: totrans-708
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.9版本更改**'
- en: '**Fixed** issue [#888](https://github.com/pymupdf/PyMuPDF/issues/888). Removed
    ambiguous statements concerning PyMuPDF’s license, which is now clearly stated
    to be GNU AGPL V3.'
  id: totrans-709
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#888](https://github.com/pymupdf/PyMuPDF/issues/888)。删除了关于PyMuPDF许可证的歧义声明，现在明确说明为GNU
    AGPL V3。'
- en: '**Fixed** issue [#895](https://github.com/pymupdf/PyMuPDF/issues/895).'
  id: totrans-710
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#895](https://github.com/pymupdf/PyMuPDF/issues/895)。'
- en: '**Fixed** issue [#896](https://github.com/pymupdf/PyMuPDF/issues/896). Since
    v1.17.6 PyMuPDF suppresses the font subset tags and only reports the base fontname
    in text extraction outputs “dict” / “json” / “rawdict” / “rawjson”. Now a new
    global parameter can request the old behaviour, [`Tools.set_subset_fontnames()`](tools.html#Tools.set_subset_fontnames
    "Tools.set_subset_fontnames").'
  id: totrans-711
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#896](https://github.com/pymupdf/PyMuPDF/issues/896)。自v1.17.6以来，PyMuPDF抑制字体子集标记，仅在文本提取输出“dict”/“json”/“rawdict”/“rawjson”中报告基本字体名称。现在，新的全局参数可以请求旧行为，[`Tools.set_subset_fontnames()`](tools.html#Tools.set_subset_fontnames
    "Tools.set_subset_fontnames")。'
- en: '**Fixed** issue [#885](https://github.com/pymupdf/PyMuPDF/issues/885). Pixmap
    creation now also works with filenames given as `pathlib.Paths`.'
  id: totrans-712
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#885](https://github.com/pymupdf/PyMuPDF/issues/885)。现在，使用`pathlib.Paths`作为文件名也可以创建位图。'
- en: '**Changed** [`Document.subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts"): Text is **not rewritten** any more and should therefore
    **retain all its origial properties** – like being hidden or being controlled
    by Optional Content mechanisms.'
  id: totrans-713
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**[`Document.subset_fonts()`](document.html#Document.subset_fonts "Document.subset_fonts")：文本**不再被重写**，因此**保留所有原始属性**，如隐藏或由可选内容机制控制。'
- en: '**Changed** [TextWriter](textwriter.html#textwriter) output to also accept
    text in right to left mode (Arabian, Hebrew): [`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox"), [`TextWriter.append()`](textwriter.html#TextWriter.append
    "TextWriter.append"). These methods now accept a new boolean parameter `right_to_left`,
    which is *False* by default. Implements [#897](https://github.com/pymupdf/PyMuPDF/issues/897).'
  id: totrans-714
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 [TextWriter](textwriter.html#textwriter) 输出，以接受右到左模式（阿拉伯语、希伯来语）的文本：[`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox")，[`TextWriter.append()`](textwriter.html#TextWriter.append
    "TextWriter.append")。这些方法现在接受一个新的布尔参数 `right_to_left`，默认为 *False*。实现了请求 [#897](https://github.com/pymupdf/issues/897)。'
- en: '**Changed** [`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox") to return all lines of text, that did not fit in the
    given rectangle. Also changed the default of the `warn` parameter to no longer
    print a warning message in overflow situations.'
  id: totrans-715
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 [`TextWriter.fill_textbox()`](textwriter.html#TextWriter.fill_textbox
    "TextWriter.fill_textbox") 以返回未适合给定矩形的所有文本行。还将 `warn` 参数的默认值更改为在溢出情况下不再打印警告消息。'
- en: '**Added** a utility function [`recover_quad()`](functions.html#recover_quad
    "recover_quad"), which computes the quadrilateral of a span. This function can
    be used for correctly marking text extracted with the “dict” or “rawdict” options
    of [`Page.get_text()`](page.html#Page.get_text "Page.get_text").'
  id: totrans-716
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了一个实用函数 [`recover_quad()`](functions.html#recover_quad "recover_quad")，用于计算跨度的四边形。这个函数可用于正确标记使用
    [`Page.get_text()`](page.html#Page.get_text "Page.get_text") 的“dict”或“rawdict”选项提取的文本。'
- en: '* * *'
  id: totrans-717
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.8**'
  id: totrans-718
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.8 版本变更**'
- en: This is a bug fix version only. We are publishing early because of the potentially
    widely used functions.
  id: totrans-719
  prefs: []
  type: TYPE_NORMAL
  zh: 这只是一个修复 bug 的版本。我们提前发布是因为这些功能可能被广泛使用。
- en: '**Fixed** issue [#881](https://github.com/pymupdf/PyMuPDF/issues/881). Fixed
    a memory leak in [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    when inserting images from files or memory.'
  id: totrans-720
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 [#881](https://github.com/pymupdf/PyMuPDF/issues/881)。修复了在从文件或内存插入图像时
    [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image") 中的内存泄漏。'
- en: '**Fixed** issue [#878](https://github.com/pymupdf/PyMuPDF/issues/878). `pathlib.Path`
    objects should now correctly handle file path hierarchies.'
  id: totrans-721
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 [#878](https://github.com/pymupdf/PyMuPDF/issues/878)。`pathlib.Path`
    对象现在应正确处理文件路径层次结构。'
- en: '* * *'
  id: totrans-722
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.7**'
  id: totrans-723
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.7 版本变更**'
- en: '**Added** an experimental [`Document.subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts") which reduces the size of eligible fonts based on their
    use by text in the PDF. Implements [#855](https://github.com/pymupdf/PyMuPDF/discussions/855).'
  id: totrans-724
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了一个实验性功能 [`Document.subset_fonts()`](document.html#Document.subset_fonts
    "Document.subset_fonts")，根据 PDF 中文本使用情况减小合格字体的大小。实现了请求 [#855](https://github.com/pymupdf/PyMuPDF/discussions/855)。'
- en: '**Implemented** request [#870](https://github.com/pymupdf/PyMuPDF/pull/870):
    [`Document.convert_to_pdf()`](document.html#Document.convert_to_pdf "Document.convert_to_pdf")
    now also supports PDF documents.'
  id: totrans-725
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实现**了请求 [#870](https://github.com/pymupdf/PyMuPDF/pull/870)：[`Document.convert_to_pdf()`](document.html#Document.convert_to_pdf
    "Document.convert_to_pdf") 现在还支持 PDF 文档。'
- en: '**Renamed** `Document.write` to [`Document.tobytes()`](document.html#Document.tobytes
    "Document.tobytes") for greater clarity. But the deprecated name remains available
    for some time.'
  id: totrans-726
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**将** `Document.write` 重命名为 [`Document.tobytes()`](document.html#Document.tobytes
    "Document.tobytes") 以增强清晰度。但废弃的名称仍然可用一段时间。'
- en: '**Implemented** request [#843](https://github.com/pymupdf/PyMuPDF/Discussions/843):
    [`Document.tobytes()`](document.html#Document.tobytes "Document.tobytes") now
    supports linearized PDF output. [`Document.save()`](document.html#Document.save
    "Document.save") now also supports writing to Python **file objects**. In addition,
    the open function now also supports Python file objects.'
  id: totrans-727
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实现**了请求 [#843](https://github.com/pymupdf/PyMuPDF/Discussions/843)：[`Document.tobytes()`](document.html#Document.tobytes
    "Document.tobytes") 现在支持线性化 PDF 输出。[`Document.save()`](document.html#Document.save
    "Document.save") 现在也支持向 Python **文件对象**写入。此外，open 函数现在也支持 Python 文件对象。'
- en: '**Fixed** issue [#844](https://github.com/pymupdf/PyMuPDF/issues/844).'
  id: totrans-728
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 [#844](https://github.com/pymupdf/issues/844)。'
- en: '**Fixed** issue [#838](https://github.com/pymupdf/PyMuPDF/issues/838).'
  id: totrans-729
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 [#838](https://github.com/pymupdf/issues/838)。'
- en: '**Fixed** issue [#823](https://github.com/pymupdf/PyMuPDF/issues/823). More
    logic for better support of OCRed text output (Tesseract, ABBYY).'
  id: totrans-730
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 [#823](https://github.com/pymupdf/PyMuPDF/issues/823)。增强逻辑以更好支持 OCR
    文本输出（Tesseract、ABBYY）。'
- en: '**Fixed** issue [#818](https://github.com/pymupdf/PyMuPDF/issues/818).'
  id: totrans-731
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 [#818](https://github.com/pymupdf/PyMuPDF/issues/818)。'
- en: '**Fixed** issue [#814](https://github.com/pymupdf/PyMuPDF/issues/814).'
  id: totrans-732
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题[#814](https://github.com/pymupdf/PyMuPDF/issues/814)。'
- en: '**Added** [`Document.get_page_labels()`](document.html#Document.get_page_labels
    "Document.get_page_labels") which returns a list of page label definitions of
    a PDF.'
  id: totrans-733
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** [`Document.get_page_labels()`](document.html#Document.get_page_labels
    "Document.get_page_labels") 返回PDF的页面标签定义列表。'
- en: '**Added** [`Document.has_annots()`](document.html#Document.has_annots "Document.has_annots")
    and [`Document.has_links()`](document.html#Document.has_links "Document.has_links")
    to check whether these object types are present anywhere in a PDF.'
  id: totrans-734
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** [`Document.has_annots()`](document.html#Document.has_annots "Document.has_annots")
    和 [`Document.has_links()`](document.html#Document.has_links "Document.has_links")
    用于检查PDF中是否存在这些对象类型。'
- en: '**Added** expert low-level functions to simplify inquiry and modification of
    PDF object sources: [`Document.xref_get_keys()`](document.html#Document.xref_get_keys
    "Document.xref_get_keys") lists the keys of object [`xref`](glossary.html#xref
    "xref"), [`Document.xref_get_key()`](document.html#Document.xref_get_key "Document.xref_get_key")
    returns type and content of a key, and [`Document.xref_set_key()`](document.html#Document.xref_set_key
    "Document.xref_set_key") modifies the key’s value.'
  id: totrans-735
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** 专家级低级功能以简化PDF对象源的查询和修改：[`Document.xref_get_keys()`](document.html#Document.xref_get_keys
    "Document.xref_get_keys") 列出对象[`xref`](glossary.html#xref "xref") 的键，[`Document.xref_get_key()`](document.html#Document.xref_get_key
    "Document.xref_get_key") 返回键的类型和内容，以及[`Document.xref_set_key()`](document.html#Document.xref_set_key
    "Document.xref_set_key") 修改键的值。'
- en: '**Added** parameter `thumbnails` to [`Document.scrub()`](document.html#Document.scrub
    "Document.scrub") to also allow removing page thumbnail images.'
  id: totrans-736
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** 参数`thumbnails`到[`Document.scrub()`](document.html#Document.scrub
    "Document.scrub")，以允许删除页面缩略图图像。'
- en: '**Improved** documentation for how to add valid text marker annotations for
    non-horizontal text.'
  id: totrans-737
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Improved** 文档如何为非水平文本添加有效文本标记注释的文档已更新。'
- en: We continued the process of renaming methods and properties from *“mixedCase”*
    to *“snake_case”*. Documentation usually mentions the new names only, but old,
    deprecated names remain available for some time.
  id: totrans-738
  prefs: []
  type: TYPE_NORMAL
  zh: 我们继续将方法和属性从*“mixedCase”*重命名为*“snake_case”*的过程。文档通常仅提及新名称，但旧的弃用名称在一段时间内仍然可用。
- en: '* * *'
  id: totrans-739
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.6**'
  id: totrans-740
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.18.6中的更改**'
- en: '**Fixed** issue [#812](https://github.com/pymupdf/PyMuPDF/issues/812).'
  id: totrans-741
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题[#812](https://github.com/pymupdf/PyMuPDF/issues/812)。'
- en: '**Fixed** issue [#793](https://github.com/pymupdf/PyMuPDF/issues/793). Invalid
    document metadata previously prevented opening some documents at all. This error
    has been removed.'
  id: totrans-742
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题[#793](https://github.com/pymupdf/PyMuPDF/issues/793)。之前无效的文档元数据导致某些文档根本无法打开。已修复此错误。'
- en: '**Fixed** issue [#792](https://github.com/pymupdf/PyMuPDF/issues/792). Text
    search and text extraction will make no rectangle containment checks at all if
    the default `clip=None` is used.'
  id: totrans-743
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题[#792](https://github.com/pymupdf/PyMuPDF/issues/792)。如果使用默认的`clip=None`，则文本搜索和文本提取将完全不进行矩形包含检查。'
- en: '**Fixed** issue [#785](https://github.com/pymupdf/PyMuPDF/issues/785).'
  id: totrans-744
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题[#785](https://github.com/pymupdf/PyMuPDF/issues/785)。'
- en: '**Fixed** issue [#780](https://github.com/pymupdf/PyMuPDF/issues/780). Corrected
    a parameter check error.'
  id: totrans-745
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题[#780](https://github.com/pymupdf/PyMuPDF/issues/780)。修正了参数检查错误。'
- en: '**Fixed** issue [#779](https://github.com/pymupdf/PyMuPDF/issues/779). Fixed
    typo'
  id: totrans-746
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题[#779](https://github.com/pymupdf/PyMuPDF/issues/779)。修正了拼写错误。'
- en: '**Added** an option to set the desired line height for text boxes. Implements
    [#804](https://github.com/pymupdf/PyMuPDF/issues/804).'
  id: totrans-747
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** 选项以设置文本框的期望行高。实现了[#804](https://github.com/pymupdf/PyMuPDF/issues/804)。'
- en: '**Changed** text position retrieval to better cope with Tesseract’s glyphless
    font. Implements [#803](https://github.com/pymupdf/PyMuPDF/issues/803).'
  id: totrans-748
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Changed** 文本位置检索已优化以更好地处理Tesseract的无字体字符。实现了[#803](https://github.com/pymupdf/PyMuPDF/issues/803)。'
- en: '**Added** an option to choose the prefix of new annotations, fields and links
    for providing unique annotation ids. Implements request [#807](https://github.com/pymupdf/PyMuPDF/issues/807).'
  id: totrans-749
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** 选项以选择提供唯一注释ID的新注释、字段和链接的前缀。实现了请求[#807](https://github.com/pymupdf/PyMuPDF/issues/807)。'
- en: '**Added** getting and setting color and text properties for Table of Contents
    items for PDFs. Implements [#779](https://github.com/pymupdf/PyMuPDF/issues/779).'
  id: totrans-750
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** 获取和设置PDF目录项目的颜色和文本属性。实现了[#779](https://github.com/pymupdf/PyMuPDF/issues/779)。'
- en: '**Added** PDF page label handling: [`Page.get_label()`](page.html#Page.get_label
    "Page.get_label") returns the page label, [`Document.get_page_numbers()`](document.html#Document.get_page_numbers
    "Document.get_page_numbers") return all page numbers having a specified label,
    and [`Document.set_page_labels()`](document.html#Document.set_page_labels "Document.set_page_labels")
    adds or updates a PDF’s page label definition.'
  id: totrans-751
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**PDF页面标签处理：[`Page.get_label()`](page.html#Page.get_label "Page.get_label")
    返回页面标签，[`Document.get_page_numbers()`](document.html#Document.get_page_numbers
    "Document.get_page_numbers") 返回具有指定标签的所有页面编号，[`Document.set_page_labels()`](document.html#Document.set_page_labels
    "Document.set_page_labels") 添加或更新PDF的页面标签定义。'
- en: Note
  id: totrans-752
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: This version introduces **Python type hinting**. The goal is to provide each
    parameter and the return value of all functions and methods with type information.
    This still is work in progress although the majority of functions has already
    been handled.
  id: totrans-753
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本引入了**Python类型提示**。目标是为所有函数和方法的每个参数和返回值提供类型信息。尽管大部分函数已经处理，但仍在进行中。
- en: '* * *'
  id: totrans-754
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.5**'
  id: totrans-755
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.18.5的变更**'
- en: Apart from several fixes, this version also focusses on several minor, but important
    feature improvements. Among the latter is a more precise computation of proper
    line heights and insertion points for writing / inserting text. As opposed to
    using font-agnostic constants, these values are now taken from the font’s properties.
  id: totrans-756
  prefs: []
  type: TYPE_NORMAL
  zh: 除了几个修复外，此版本还专注于几个次要但重要的功能改进。其中之一是更精确地计算适合文本书写/插入的适当行高和插入点。与使用字体无关的常量不同，现在这些值来自于字体的属性。
- en: Also note that this is the first version which does no longer provide pregenerated
    wheels for Python versions older than 3.6\. PIP also discontinues support for
    these by end of this year 2020.
  id: totrans-757
  prefs: []
  type: TYPE_NORMAL
  zh: 还请注意，这是不再为Python版本低于3.6提供预生成轮子的第一个版本。PIP也将在2020年底停止对这些版本的支持。
- en: '**Fixed** issue [#771](https://github.com/pymupdf/PyMuPDF/issues/771). By using
    “small glyph heights” option, the full page text can be extracted.'
  id: totrans-758
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#771](https://github.com/pymupdf/PyMuPDF/issues/771)。通过使用“小字形高度”选项，可以提取完整页面文本。'
- en: '**Fixed** issue [#768](https://github.com/pymupdf/PyMuPDF/issues/768).'
  id: totrans-759
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#768](https://github.com/pymupdf/PyMuPDF/issues/768)。'
- en: '**Fixed** issue [#750](https://github.com/pymupdf/PyMuPDF/issues/750).'
  id: totrans-760
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#750](https://github.com/pymupdf/PyMuPDF/issues/750)。'
- en: '**Fixed** issue [#739](https://github.com/pymupdf/PyMuPDF/issues/739). The
    “dict”, “rawdict” and corresponding JSON output variants now have two new *span*
    keys: `"ascender"` and `"descender"`. These floats represent special font properties
    which can be used to compute bboxes of spans or characters of **exactly fontsize
    height** (as opposed to the default line height). An example algorithm is shown
    in section “Span Dictionary” [here](https://pymupdf.readthedocs.io/en/latest/textpage.html#dictionary-structure-of-extractdict-and-extractrawdict).
    Also improved the detection and correction of ill-specified ascender / descender
    values encountered in some fonts.'
  id: totrans-761
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#739](https://github.com/pymupdf/PyMuPDF/issues/739)。 "dict"、"rawdict"及其对应的JSON输出变体现在具有两个新的*span*键："ascender"和"descender"。这些浮点数表示特殊的字体属性，可用于计算**与默认行高不同但与字体大小相同的边界框**的span或字符。在“Span
    Dictionary”章节[这里](https://pymupdf.readthedocs.io/en/latest/textpage.html#dictionary-structure-of-extractdict-and-extractrawdict)中展示了一个示例算法。还改进了检测和修正某些字体中遇到的未明确定义的ascender/descender值。'
- en: '**Added** a new, experimental [`Tools.set_small_glyph_heights()`](tools.html#Tools.set_small_glyph_heights
    "Tools.set_small_glyph_heights") – also in response to issue [#739](https://github.com/pymupdf/PyMuPDF/issues/739).
    This method sets or unsets a global parameter to **always compute bboxes with
    fontsize height**. If “on”, text searching and all text extractions will returned
    rectangles, bboxes and quads with a smaller height.'
  id: totrans-762
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了一个新的实验性方法[`Tools.set_small_glyph_heights()`](tools.html#Tools.set_small_glyph_heights
    "Tools.set_small_glyph_heights") – 同时响应问题[#739](https://github.com/pymupdf/PyMuPDF/issues/739)。此方法设置或取消一个全局参数，以**始终使用字体大小计算边界框**。如果“开启”，则文本搜索和所有文本提取都将返回高度较小的矩形、边界框和四边形。'
- en: '**Fixed** issue [#728](https://github.com/pymupdf/PyMuPDF/issues/728).'
  id: totrans-763
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题[#728](https://github.com/pymupdf/PyMuPDF/issues/728)。'
- en: '**Changed** fill color logic of ‘Polyline’ annotations: this parameter now
    only pertains to line end symbols – the annotation itself can no longer have a
    fill color. Also addresses issue [#727](https://github.com/pymupdf/PyMuPDF/issues/727).'
  id: totrans-764
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**“Polyline”注释的填充颜色逻辑：此参数现在仅适用于线条末端符号 – 注释本身不再能有填充颜色。还解决了问题[#727](https://github.com/pymupdf/PyMuPDF/issues/727)。'
- en: '**Changed** `Page.getImageBbox()` to also compute the bbox if the image is
    contained in an XObject.'
  id: totrans-765
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改**了`Page.getImageBbox()`，以便在图像包含在XObject中时也计算其bbox。'
- en: '**Changed** `Shape.insertTextbox()`, resp. `Page.insertTextbox()`, resp. `TextWriter.fillTextbox()`
    to respect font’s properties “ascender” / “descender” when computing line height
    and insertion point. This should no longer lead to line overlaps for multi-line
    output. These methods used to ignore font specifics and used constant values instead.'
  id: totrans-766
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改**了`Shape.insertTextbox()`、`Page.insertTextbox()`和`TextWriter.fillTextbox()`方法，以在计算行高和插入点时尊重字体的“上升部分”和“下降部分”。这不再导致多行输出的行重叠。这些方法以前忽略了字体的特定信息，而是使用固定值。'
- en: '* * *'
  id: totrans-767
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.4**'
  id: totrans-768
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.4版本变更**'
- en: This version adds several features to support PDF Optional Content. Among other
    things, this includes OCMDs (Optional Content Membership Dictionaries) with the
    full scope of *“visibility expressions”* (PDF key `/VE`), text insertions (including
    the [TextWriter](textwriter.html#textwriter) class) and drawings.
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: 该版本添加了多项功能以支持PDF可选内容。其中包括具有全面*“可见性表达式”*（PDF键`/VE`）的OCMDs（可选内容成员字典）、文本插入（包括[TextWriter](textwriter.html#textwriter)类）和绘图。
- en: '**Fixed** issue [#727](https://github.com/pymupdf/PyMuPDF/issues/727). Freetext
    annotations now support an uncolored rectangle when `fill_color=None`.'
  id: totrans-770
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题[#727](https://github.com/pymupdf/PyMuPDF/issues/727)。现在，自由文本注释在`fill_color=None`时支持无颜色矩形。'
- en: '**Fixed** issue [#726](https://github.com/pymupdf/PyMuPDF/issues/726). UTF-8
    encoding errors are now handled for HTML / XML `Page.getText()` output.'
  id: totrans-771
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题[#726](https://github.com/pymupdf/PyMuPDF/issues/726)。现在已处理HTML/XML
    `Page.getText()`输出的UTF-8编码错误。'
- en: '**Fixed** issue [#724](https://github.com/pymupdf/PyMuPDF/issues/724). Empty
    values are no longer stored in the PDF /Info metadata dictionary.'
  id: totrans-772
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题[#724](https://github.com/pymupdf/PyMuPDF/issues/724)。不再将空值存储在PDF
    /Info元数据字典中。'
- en: '**Added** new methods [`Document.set_oc()`](document.html#Document.set_oc "Document.set_oc")
    and [`Document.get_oc()`](document.html#Document.get_oc "Document.get_oc") to
    set or get optional content references for **existing** image and form XObjects.
    These methods are similar to the same-named methods of [Annot](annot.html#annot).'
  id: totrans-773
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了[`Document.set_oc()`](document.html#Document.set_oc "Document.set_oc")和[`Document.get_oc()`](document.html#Document.get_oc
    "Document.get_oc")方法，用于设置或获取**现有**图像和表单XObject的可选内容引用。这些方法与[Annot](annot.html#annot)中同名方法类似。'
- en: '**Added** [`Document.set_ocmd()`](document.html#Document.set_ocmd "Document.set_ocmd"),
    [`Document.get_ocmd()`](document.html#Document.get_ocmd "Document.get_ocmd") for
    handling OCMDs.'
  id: totrans-774
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了[`Document.set_ocmd()`](document.html#Document.set_ocmd "Document.set_ocmd")和[`Document.get_ocmd()`](document.html#Document.get_ocmd
    "Document.get_ocmd")方法，用于处理OCMDs。'
- en: '**Added** **Optional Content** support for text insertion and drawing.'
  id: totrans-775
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了对文本插入和绘制的**可选内容**支持。'
- en: '**Added** new method `Page.deleteWidget()`, which deletes a form field from
    a page. This is analogous to deleting annotations.'
  id: totrans-776
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了`Page.deleteWidget()`方法，用于从页面中删除表单字段。这类似于删除注释。'
- en: '**Added** support for Popup annotations. This includes defining the Popup rectangle
    and setting the Popup to open or closed. Methods / attributes [`Annot.set_popup()`](annot.html#Annot.set_popup
    "Annot.set_popup"), [`Annot.set_open()`](annot.html#Annot.set_open "Annot.set_open"),
    [`Annot.has_popup`](annot.html#Annot.has_popup "Annot.has_popup"), [`Annot.is_open`](annot.html#Annot.is_open
    "Annot.is_open"), [`Annot.popup_rect`](annot.html#Annot.popup_rect "Annot.popup_rect"),
    [`Annot.popup_xref`](annot.html#Annot.popup_xref "Annot.popup_xref").'
  id: totrans-777
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了对弹出式注释的支持。这包括定义弹出式矩形并设置弹出式注释的打开或关闭状态。方法/属性[`Annot.set_popup()`](annot.html#Annot.set_popup
    "Annot.set_popup")、[`Annot.set_open()`](annot.html#Annot.set_open "Annot.set_open")、[`Annot.has_popup`](annot.html#Annot.has_popup
    "Annot.has_popup")、[`Annot.is_open`](annot.html#Annot.is_open "Annot.is_open")、[`Annot.popup_rect`](annot.html#Annot.popup_rect
    "Annot.popup_rect")、[`Annot.popup_xref`](annot.html#Annot.popup_xref "Annot.popup_xref")。'
- en: 'Other changes:'
  id: totrans-778
  prefs: []
  type: TYPE_NORMAL
  zh: 其他变更：
- en: 'The **naming of methods and attributes** in PyMuPDF is far from being satisfactory:
    we have *CamelCases*, *mixedCases* and *lower_case_with_underscores* all over
    the place. With the [Annot](annot.html#annot) as the first candidate, we have
    started an activity to clean this up step by step, converting to lower case with
    underscores for methods and attributes while keeping UPPERCASE for the constants.'
  id: totrans-779
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PyMuPDF中的方法和属性**命名**远未令人满意：我们的*CamelCases*、*mixedCases*和*lower_case_with_underscores*无处不在。以[Annot](annot.html#annot)为首位，我们已开始逐步清理此问题，将方法和属性转换为下划线小写形式，同时保留常量的大写形式。
- en: Old names will remain available to prevent code breaks, but they will no longer
    be mentioned in the documentation.
  id: totrans-780
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 旧名称将继续保留以防止代码中断，但它们将不再在文档中提及。
- en: ''
  id: totrans-781
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-782
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: New methods and attributes of all classes will be named according to the new
    standard.
  id: totrans-783
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有类的新方法和属性将按照新标准命名。
- en: '* * *'
  id: totrans-784
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.3**'
  id: totrans-785
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.18.3 的更改**'
- en: As a major new feature, this version introduces support for PDF’s **Optional
    Content** concept.
  id: totrans-786
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个重要的新功能，此版本引入了对 PDF 的 **可选内容** 概念的支持。
- en: '**Fixed** issue [#714](https://github.com/pymupdf/PyMuPDF/issues/714).'
  id: totrans-787
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#714](https://github.com/pymupdf/PyMuPDF/issues/714)。'
- en: '**Fixed** issue [#711](https://github.com/pymupdf/PyMuPDF/issues/711).'
  id: totrans-788
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#711](https://github.com/pymupdf/PyMuPDF/issues/711)。'
- en: '**Fixed** issue [#707](https://github.com/pymupdf/PyMuPDF/issues/707): if a
    PDF user password, but no owner password is supplied nor present, then the user
    password is also used as the owner password.'
  id: totrans-789
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#707](https://github.com/pymupdf/PyMuPDF/issues/707)：如果提供了 PDF 的用户密码但没有提供或不存在所有者密码，则用户密码也将用作所有者密码。'
- en: '**Fixed** `expand` and `deflate` parameters of methods [`Document.save()`](document.html#Document.save
    "Document.save") and `Document.write()`. Individual image and font compression
    should now finally work. Addresses issue [#713](https://github.com/pymupdf/PyMuPDF/issues/713).'
  id: totrans-790
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** `expand` 和 `deflate` 参数在 [`Document.save()`](document.html#Document.save
    "Document.save") 和 `Document.write()` 方法中的问题。现在个别图像和字体的压缩应该最终能够正常工作。解决问题 [#713](https://github.com/pymupdf/PyMuPDF/issues/713)。'
- en: '**Added** a support of PDF optional content. This includes several new [Document](document.html#document)
    methods for inquiring and setting optional content status and adding optional
    content configurations and groups. In addition, images, form XObjects and annotations
    now can be bound to optional content specifications. **Resolved** issue [#709](https://github.com/pymupdf/PyMuPDF/issues/709).'
  id: totrans-791
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 对 PDF 可选内容的支持。这包括几种新的 [Document](document.html#document) 方法，用于查询和设置可选内容状态，以及添加可选内容配置和组。此外，现在可以将图像、表单
    XObjects 和注释绑定到可选内容规格。 **解决** 问题 [#709](https://github.com/pymupdf/PyMuPDF/issues/709)。'
- en: '* * *'
  id: totrans-792
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.2**'
  id: totrans-793
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.18.2 的更改**'
- en: 'This version contains some interesting improvements for text searching: any
    number of search hits is now returned and the **hit_max** parameter was removed.
    The new **clip** parameter in addition allows to restrict the search area. Searching
    now detects hyphenations at line breaks and accordingly finds hyphenated words.'
  id: totrans-794
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本对文本搜索进行了一些有趣的改进：现在返回任意数量的搜索结果，并且删除了 **hit_max** 参数。此外，新增的 **clip** 参数还允许限制搜索区域。现在搜索会检测换行时的连字符，并相应地找到连字符词。
- en: '**Fixed** issue [#575](https://github.com/pymupdf/PyMuPDF/issues/575): if using
    `quads=False` in text searching, then overlapping rectangles on the same line
    are joined. Previously, parts of the search string, which belonged to different
    “marked content” items, each generated their own rectangle – just as if occurring
    on separate lines.'
  id: totrans-795
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#575](https://github.com/pymupdf/PyMuPDF/issues/575)：如果在文本搜索中使用
    `quads=False`，则同一行上重叠的矩形将合并。之前，搜索字符串的部分属于不同的“标记内容”项，每个生成自己的矩形，就像它们出现在不同的行上一样。'
- en: '**Added** `Document.isRepaired`, which is true if the PDF was repaired on open.'
  id: totrans-796
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Document.isRepaired`，如果 PDF 在打开时被修复，则为 true。'
- en: '**Added** `Document.setXmlMetadata()` which either updates or creates PDF XML
    metadata. Implements issue [#691](https://github.com/pymupdf/PyMuPDF/issues/691).'
  id: totrans-797
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Document.setXmlMetadata()` 方法，用于更新或创建 PDF 的 XML 元数据。实现问题 [#691](https://github.com/pymupdf/PyMuPDF/issues/691)。'
- en: '**Added** `Document.getXmlMetadata()` returns PDF XML metadata.'
  id: totrans-798
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Document.getXmlMetadata()` 返回 PDF 的 XML 元数据。'
- en: '**Changed** creation of PDF documents: they will now always carry a PDF identification
    (`/ID` field) in the document trailer. Implements issue [#691](https://github.com/pymupdf/PyMuPDF/issues/691).'
  id: totrans-799
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** 创建 PDF 文档的方式：现在它们将始终在文档尾部带有 PDF 标识（`/ID` 字段）。实现问题 [#691](https://github.com/pymupdf/PyMuPDF/issues/691)。'
- en: '**Changed** `Page.searchFor()`: a new parameter `clip` is accepted to restrict
    the search to this rectangle. Correspondingly, the attribute [`TextPage.rect`](textpage.html#TextPage.rect
    "TextPage.rect") is now respected by [`TextPage.search()`](textpage.html#TextPage.search
    "TextPage.search").'
  id: totrans-800
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** `Page.searchFor()`：现在接受一个新的 `clip` 参数，以限制搜索到这个矩形区域内。相应地，[`TextPage.search()`](textpage.html#TextPage.search
    "TextPage.search") 现在尊重 [`TextPage.rect`](textpage.html#TextPage.rect "TextPage.rect")
    属性。'
- en: '**Changed** parameter `hit_max` in `Page.searchFor()` and [`TextPage.search()`](textpage.html#TextPage.search
    "TextPage.search") is now obsolete: methods will return all hits.'
  id: totrans-801
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Page.searchFor()` 和 [`TextPage.search()`](textpage.html#TextPage.search
    "TextPage.search") 中的参数 `hit_max` 现在已经过时：这些方法将返回所有命中结果。'
- en: '**Changed** character **selection criteria** in `Page.getText()`: a character
    is now considered to be part of a `clip` if its bbox is fully contained. Before
    this, a non-empty intersection was sufficient.'
  id: totrans-802
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** `Page.getText()` 中的字符**选择标准**：如果其包围框完全包含，则现在将字符视为 `clip` 的一部分。在此之前，非空交集是足够的。'
- en: '**Changed** [`Document.scrub()`](document.html#Document.scrub "Document.scrub")
    to support a new option `redact_images`. This addresses issue [#697](https://github.com/pymupdf/PyMuPDF/issues/697).'
  id: totrans-803
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Document.scrub()`](document.html#Document.scrub "Document.scrub")
    来支持新选项 `redact_images`。这解决了问题 [#697](https://github.com/pymupdf/PyMuPDF/issues/697)。'
- en: '* * *'
  id: totrans-804
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.1**'
  id: totrans-805
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.1 版本的变更**'
- en: '**Fixed** issue [#692](https://github.com/pymupdf/PyMuPDF/issues/692). PyMuPDF
    now detects and recovers from more cyclic resource dependencies in PDF pages and
    for the first time reports them in the MuPDF warnings store.'
  id: totrans-806
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#692](https://github.com/pymupdf/PyMuPDF/issues/692)。PyMuPDF 现在能够检测并从
    PDF 页面中更多的循环资源依赖中恢复，并且首次将其报告在 MuPDF 的警告存储中。'
- en: '**Fixed** issue [#686](https://github.com/pymupdf/PyMuPDF/issues/686).'
  id: totrans-807
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#686](https://github.com/pymupdf/PyMuPDF/issues/686)。'
- en: '**Added** opacity options for the [Shape](shape.html#shape) class: Stroke and
    fill colors can now be set to some transparency value. This means that all [Page](page.html#page)
    draw methods, methods `Page.insertText()`, `Page.insertTextbox()`, [`Shape.finish()`](shape.html#Shape.finish
    "Shape.finish"), `Shape.insertText()`, and `Shape.insertTextbox()` support two
    new parameters: *stroke_opacity* and *fill_opacity*.'
  id: totrans-808
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**为 [Shape](shape.html#shape) 类添加了**不透明度选项：现在可以为描边和填充颜色设置一些透明度值。这意味着所有 [Page](page.html#page)
    绘制方法，方法 `Page.insertText()`，`Page.insertTextbox()`，[`Shape.finish()`](shape.html#Shape.finish
    "Shape.finish")，`Shape.insertText()` 和 `Shape.insertTextbox()` 都支持两个新参数：*stroke_opacity*
    和 *fill_opacity*。'
- en: '**Added** new parameter `mask` to `Page.insertImage()` for optionally providing
    an external image mask. Resolves issue [#685](https://github.com/pymupdf/PyMuPDF/issues/685).'
  id: totrans-809
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**向 `Page.insertImage()` 添加了**新参数 `mask`，用于可选地提供外部图像掩码。解决了问题 [#685](https://github.com/pymupdf/PyMuPDF/issues/685)。'
- en: '**Added** `Annot.soundGet()` for extracting the sound of an audio annotation.'
  id: totrans-810
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Annot.soundGet()` 用于提取音频注释的声音。'
- en: '* * *'
  id: totrans-811
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.18.0**'
  id: totrans-812
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.18.0 版本的变更**'
- en: This is the first PyMuPDF version supporting MuPDF v1.18\. The focus here is
    on extending PyMuPDF’s own functionality – apart from bug fixing. Subsequent PyMuPDF
    patches may address features new in MuPDF.
  id: totrans-813
  prefs: []
  type: TYPE_NORMAL
  zh: 这是第一个支持 MuPDF v1.18 的 PyMuPDF 版本。重点在于扩展 PyMuPDF 的功能——除了修复错误之外。随后的 PyMuPDF 补丁可能会解决
    MuPDF 中新增的功能。
- en: '**Fixed** issue [#519](https://github.com/pymupdf/PyMuPDF/issues/519). This
    upstream bug occurred occasionally for some pages only and seems to be fixed now:
    page layout should no longer be ruined in these cases.'
  id: totrans-814
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#519](https://github.com/pymupdf/PyMuPDF/issues/519)。此上游错误偶尔会在某些页面上发生，现在似乎已经修复：在这些情况下页面布局不应再被破坏。'
- en: '**Fixed** issue [#675](https://github.com/pymupdf/PyMuPDF/issues/675).'
  id: totrans-815
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#675](https://github.com/pymupdf/PyMuPDF/issues/675)。'
- en: Unsuccessful storage allocations should now always lead to exceptions (circumvention
    of an upstream bug intermittently crashing the interpreter).
  id: totrans-816
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不成功的存储分配现在应该始终引发异常（规避了一个时而导致解释器崩溃的上游错误）。
- en: '[Pixmap](pixmap.html#pixmap) size is now based on `size_t` instead of `int`
    in C and should be correct even for extremely large pixmaps.'
  id: totrans-817
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Pixmap](pixmap.html#pixmap) 的大小现在基于 `size_t` 而不是 `int` 在 C 中，应该可以正确处理非常大的像素图。'
- en: '**Fixed** issue [#668](https://github.com/pymupdf/PyMuPDF/issues/668). Specification
    of dashes for PDF drawing insertion should now correctly reflect the PDF spec.'
  id: totrans-818
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#668](https://github.com/pymupdf/PyMuPDF/issues/668)。PDF 绘图插入中划线的规范应该现在正确反映
    PDF 规范。'
- en: '**Fixed** issue [#669](https://github.com/pymupdf/PyMuPDF/issues/669). A major
    source of memory leakage in `Page.insert_pdf()` has been removed.'
  id: totrans-819
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#669](https://github.com/pymupdf/PyMuPDF/issues/669)。已删除 `Page.insert_pdf()`
    中的一个主要内存泄漏源。'
- en: '**Added** keyword *“images”* to [`Page.apply_redactions()`](page.html#Page.apply_redactions
    "Page.apply_redactions") for fine-controlling the handling of images.'
  id: totrans-820
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在 [`Page.apply_redactions()`](page.html#Page.apply_redactions "Page.apply_redactions")
    中添加了**关键字 *“images”*，以精细控制图像的处理方式。'
- en: '**Added** `Annot.getText()` and `Annot.getTextbox()`, which offer the same
    functionality as the [Page](page.html#page) versions.'
  id: totrans-821
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加了** `Annot.getText()` 和 `Annot.getTextbox()`，提供与 [Page](page.html#page)
    版本相同的功能。'
- en: '**Added** key *“number”* to the block dictionaries of `Page.getText()` / `Annot.getText()`
    for options “dict” and “rawdict”.'
  id: totrans-822
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 在 `Page.getText()` / `Annot.getText()` 的块字典中添加了键 *“number”*，用于选项“dict”和“rawdict”。'
- en: '**Added** [`glyph_name_to_unicode()`](functions.html#glyph_name_to_unicode
    "glyph_name_to_unicode") and [`unicode_to_glyph_name()`](functions.html#unicode_to_glyph_name
    "unicode_to_glyph_name"). Both functions do not really connect to a specific font
    and are now independently available, too. The data are now based on the [Adobe
    Glyph List](https://github.com/adobe-type-tools/agl-aglfn/blob/master/glyphlist.txt).'
  id: totrans-823
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`glyph_name_to_unicode()`](functions.html#glyph_name_to_unicode "glyph_name_to_unicode")
    和 [`unicode_to_glyph_name()`](functions.html#unicode_to_glyph_name "unicode_to_glyph_name")。这两个函数不再依赖于特定的字体，现在也可以独立使用。数据现在基于[Adobe
    Glyph List](https://github.com/adobe-type-tools/agl-aglfn/blob/master/glyphlist.txt)。'
- en: '**Added** convenience functions [`adobe_glyph_names()`](functions.html#adobe_glyph_names
    "adobe_glyph_names") and [`adobe_glyph_unicodes()`](functions.html#adobe_glyph_unicodes
    "adobe_glyph_unicodes") which return the respective available data.'
  id: totrans-824
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**便利函数 [`adobe_glyph_names()`](functions.html#adobe_glyph_names "adobe_glyph_names")
    和 [`adobe_glyph_unicodes()`](functions.html#adobe_glyph_unicodes "adobe_glyph_unicodes")，它们返回相应的可用数据。'
- en: '**Added** `Page.getDrawings()` which returns details of drawing operations
    on a document page. Works for all document types.'
  id: totrans-825
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `Page.getDrawings()`，返回文档页面上绘图操作的详细信息。适用于所有文档类型。'
- en: Improved performance of [`Document.insert_pdf()`](document.html#Document.insert_pdf
    "Document.insert_pdf"). Multiple object copies are now also suppressed across
    multiple separate insertions from the same source. This saves time, memory and
    target file size. Previously this mechanism was only active within each single
    method execution. The feature can also be suppressed with the new method bool
    parameter *final=1*, which is the default.
  id: totrans-826
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提升了 [`Document.insert_pdf()`](document.html#Document.insert_pdf "Document.insert_pdf")
    的性能。现在还跨多个独立插入操作抑制了多个对象的复制。这节省了时间、内存和目标文件大小。之前这种机制仅在单个方法执行中有效。还可以通过新方法的布尔参数 *final=1*
    来禁止该功能，默认情况下是激活的。
- en: For PNG images created from pixmaps, the resolution (dpi) is now automatically
    set from the respective [`Pixmap.xres`](pixmap.html#Pixmap.xres "Pixmap.xres")
    and [`Pixmap.yres`](pixmap.html#Pixmap.yres "Pixmap.yres") values.
  id: totrans-827
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于从位图创建的 PNG 图像，分辨率（dpi）现在会根据相应的 [`Pixmap.xres`](pixmap.html#Pixmap.xres "Pixmap.xres")
    和 [`Pixmap.yres`](pixmap.html#Pixmap.yres "Pixmap.yres") 值自动设置。
- en: '* * *'
  id: totrans-828
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.7**'
  id: totrans-829
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.17.7 版本变更**'
- en: '**Fixed** issue [#651](https://github.com/pymupdf/PyMuPDF/issues/651). An upstream
    bug causing interpreter crashes in corner case redaction processings was fixed
    by backporting MuPDF changes from their development repo.'
  id: totrans-830
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#651](https://github.com/pymupdf/PyMuPDF/issues/651)，通过从其开发仓库反向移植
    MuPDF 更改，解决了在极端情况下造成解释器崩溃的上游错误。'
- en: '**Fixed** issue [#645](https://github.com/pymupdf/PyMuPDF/issues/645). Pixmap
    top-left coordinates can be set (again) by their own method, [`Pixmap.set_origin()`](pixmap.html#Pixmap.set_origin
    "Pixmap.set_origin").'
  id: totrans-831
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#645](https://github.com/pymupdf/PyMuPDF/issues/645)，位图的左上角坐标现在可以通过它们自己的方法
    [`Pixmap.set_origin()`](pixmap.html#Pixmap.set_origin "Pixmap.set_origin") 再次设置。'
- en: '**Fixed** issue [#622](https://github.com/pymupdf/PyMuPDF/issues/622). `Page.insertImage()`
    again accepts a [`rect_like`](glossary.html#rect_like "rect_like") parameter.'
  id: totrans-832
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#622](https://github.com/pymupdf/PyMuPDF/issues/622)，`Page.insertImage()`
    再次接受 [`rect_like`](glossary.html#rect_like "rect_like") 参数。'
- en: '**Added** severeal new methods to improve and speed-up table of contents (TOC)
    handling. Among other things, TOC items can now changed or deleted individually
    – without always replacing the complete TOC. Furthermore, access to some PDF page
    attributes is now possible without first **loading** the page. This has a very
    significant impact on the performance of TOC manipulation.'
  id: totrans-833
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**多个新方法，以改进和加速目录（TOC）处理。在其他功能中，现在可以单独更改或删除 TOC 项，而无需总是替换整个 TOC。此外，现在可以在不先**加载**页面的情况下访问某些
    PDF 页面属性。这对于 TOC 操作的性能有显著影响。'
- en: '**Added** an option to [`Document.insert_pdf()`](document.html#Document.insert_pdf
    "Document.insert_pdf") which allows displaying progress messages. Adresses [#640](https://github.com/pymupdf/PyMuPDF/issues/640).'
  id: totrans-834
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`Document.insert_pdf()`](document.html#Document.insert_pdf "Document.insert_pdf")
    的选项，允许显示进度消息。解决了问题 [#640](https://github.com/pymupdf/PyMuPDF/issues/640)。'
- en: '**Added** `Page.getTextbox()` which extracts text contained in a rectangle.
    In many cases, this should obsolete writing your own script for this type of thing.'
  id: totrans-835
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `Page.getTextbox()`，它可以提取矩形框中包含的文本。在许多情况下，这应该可以替代编写自己的脚本来完成这种任务。'
- en: '**Added** new `clip` parameter to `Page.getText()` to simplify and speed up
    text extraction of page sub areas.'
  id: totrans-836
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `clip` 参数到 `Page.getText()`，以简化和加速页面子区域的文本提取。'
- en: '**Added** [`TextWriter.appendv()`](textwriter.html#TextWriter.appendv "TextWriter.appendv")
    to add text in **vertical write mode**. Addresses issue [#653](https://github.com/pymupdf/PyMuPDF/issues/653)'
  id: totrans-837
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`TextWriter.appendv()`](textwriter.html#TextWriter.appendv "TextWriter.appendv")
    以**垂直写入模式**添加文本。解决了问题 [#653](https://github.com/pymupdf/PyMuPDF/issues/653)'
- en: '* * *'
  id: totrans-838
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.6**'
  id: totrans-839
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.17.6 版本变更**'
- en: '**Fixed** issue [#605](https://github.com/pymupdf/PyMuPDF/issues/605)'
  id: totrans-840
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#605](https://github.com/pymupdf/PyMuPDF/issues/605)'
- en: '**Fixed** issue [#600](https://github.com/pymupdf/PyMuPDF/issues/600) – text
    should now be correctly positioned also for pages with a CropBox smaller than
    MediaBox.'
  id: totrans-841
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#600](https://github.com/pymupdf/PyMuPDF/issues/600) – 现在文本应该对于裁剪框小于媒体框的页面位置正确。'
- en: '**Added** text span dictionary key `origin` which contains the lower left coordinate
    of the first character in that span.'
  id: totrans-842
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**文本跨度字典键 `origin`，包含该跨度中第一个字符的左下角坐标。'
- en: '**Added** attribute [`Font.buffer`](font.html#Font.buffer "Font.buffer"), a
    *bytes* copy of the font file.'
  id: totrans-843
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**属性 [`Font.buffer`](font.html#Font.buffer "Font.buffer")，一个字体文件的 *bytes*
    复制。'
- en: '**Added** parameter *sanitize* to `Page.cleanContents()`. Allows switching
    of sanitization, so only syntax cleaning will be done.'
  id: totrans-844
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**参数 *sanitize* 到 `Page.cleanContents()`。允许切换清理，因此只进行语法清理。'
- en: '* * *'
  id: totrans-845
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.5**'
  id: totrans-846
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.17.5 版本变更**'
- en: '**Fixed** issue [#561](https://github.com/pymupdf/PyMuPDF/issues/561) – second
    go: certain [TextWriter](textwriter.html#textwriter) usages with many alternating
    fonts did not work correctly.'
  id: totrans-847
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#561](https://github.com/pymupdf/PyMuPDF/issues/561) – 第二次尝试：某些具有多个交替字体的
    [TextWriter](textwriter.html#textwriter) 使用未能正确工作。'
- en: '**Fixed** issue [#566](https://github.com/pymupdf/PyMuPDF/issues/566).'
  id: totrans-848
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#566](https://github.com/pymupdf/PyMuPDF/issues/566)。'
- en: '**Fixed** issue [#568](https://github.com/pymupdf/PyMuPDF/issues/568).'
  id: totrans-849
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#568](https://github.com/pymupdf/PyMuPDF/issues/568)。'
- en: '**Fixed** – opacity is now correctly taken from the [TextWriter](textwriter.html#textwriter)
    object, if not given in `TextWriter.writeText()`.'
  id: totrans-850
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** – 现在从 [TextWriter](textwriter.html#textwriter) 对象正确获取不在 `TextWriter.writeText()`
    中指定的不透明度。'
- en: '**Added** a new global attribute [`fitz_fontdescriptors`](functions.html#fitz_fontdescriptors
    "fitz_fontdescriptors"). Contains information about usable fonts from repository
    [pymupdf-fonts](https://github.com/pymupdf/pymupdf-fonts).'
  id: totrans-851
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**一个新的全局属性 [`fitz_fontdescriptors`](functions.html#fitz_fontdescriptors
    "fitz_fontdescriptors")。包含来自仓库 [pymupdf-fonts](https://github.com/pymupdf/pymupdf-fonts)
    的可用字体信息。'
- en: '**Added** [`Font.valid_codepoints()`](font.html#Font.valid_codepoints "Font.valid_codepoints")
    which returns an array of unicode codepoints for which the font has a glyph.'
  id: totrans-852
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [`Font.valid_codepoints()`](font.html#Font.valid_codepoints "Font.valid_codepoints")
    返回一个包含字体具有字形的 Unicode 码点数组。'
- en: '**Added** option `text_as_path` to `Page.getSVGimage()`. this implements [#580](https://github.com/pymupdf/PyMuPDF/issues/580).
    Generates much smaller SVG files with parseable text if set to *False*.'
  id: totrans-853
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**选项 `text_as_path` 到 `Page.getSVGimage()`。实现了 [#580](https://github.com/pymupdf/PyMuPDF/issues/580)。如果设置为
    *False*，生成的 SVG 文件会更小且包含可解析的文本。'
- en: '* * *'
  id: totrans-854
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.4**'
  id: totrans-855
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.17.4 版本变更**'
- en: '**Fixed** issue [#561](https://github.com/pymupdf/PyMuPDF/issues/561). Handling
    of more than 10 [Font](font.html#font) objects on one page should now work correctly.'
  id: totrans-856
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#561](https://github.com/pymupdf/PyMuPDF/issues/561)。现在一页上超过 10 个
    [Font](font.html#font) 对象的处理应该正常工作。'
- en: '**Fixed** issue [#562](https://github.com/pymupdf/PyMuPDF/issues/562). Annotation
    pixmaps are no longer derived from the page pixmap, thus avoiding unintended inclusion
    of page content.'
  id: totrans-857
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#562](https://github.com/pymupdf/PyMuPDF/issues/562)。注释的像素图不再从页面像素图派生，从而避免意外包含页面内容。'
- en: '**Fixed** issue [#559](https://github.com/pymupdf/PyMuPDF/issues/559). This
    **MuPDF** bug is being temporarily fixed with a pre-version of MuPDF’s next release.'
  id: totrans-858
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#559](https://github.com/pymupdf/PyMuPDF/issues/559)。这是对 **MuPDF**
    的一个临时修复，使用了下一个版本的预发布版。'
- en: '**Added** utility function `repair_mono_font()` for correcting displayed character
    spacing for some mono-spaced fonts.'
  id: totrans-859
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**实用函数 `repair_mono_font()` 用于修正某些等宽字体的显示字符间距。'
- en: '**Added** utility method [`Document.need_appearances()`](document.html#Document.need_appearances
    "Document.need_appearances") for fine-controlling Form PDF behavior. Addresses
    issue [#563](https://github.com/pymupdf/PyMuPDF/issues/563).'
  id: totrans-860
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**实用方法 [`Document.need_appearances()`](document.html#Document.need_appearances
    "Document.need_appearances") 用于精细控制 PDF 表单的行为。解决了问题 [#563](https://github.com/pymupdf/PyMuPDF/issues/563)。'
- en: '**Added** utility function [`sRGB_to_pdf()`](functions.html#sRGB_to_pdf "sRGB_to_pdf")
    to recover the PDF color triple for a given color integer in sRGB format.'
  id: totrans-861
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 实用函数 [`sRGB_to_pdf()`](functions.html#sRGB_to_pdf "sRGB_to_pdf") 用于将sRGB格式的颜色整数转换为PDF颜色三元组。'
- en: '**Added** utility function [`sRGB_to_rgb()`](functions.html#sRGB_to_rgb "sRGB_to_rgb")
    to recover the (R, G, B) color triple for a given color integer in sRGB format.'
  id: totrans-862
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 实用函数 [`sRGB_to_rgb()`](functions.html#sRGB_to_rgb "sRGB_to_rgb") 用于将sRGB格式的颜色整数转换为(R,
    G, B)颜色三元组。'
- en: '**Added** utility function [`make_table()`](functions.html#make_table "make_table")
    which delivers table cells for a given rectangle and desired numbers of columns
    and rows.'
  id: totrans-863
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 实用函数 [`make_table()`](functions.html#make_table "make_table")，用于根据给定的矩形和所需的列数和行数生成表格单元。'
- en: '**Added** support for optional fonts in repository [pymupdf-fonts](https://github.com/pymupdf/pymupdf-fonts).'
  id: totrans-864
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 对存储库 [pymupdf-fonts](https://github.com/pymupdf/pymupdf-fonts) 中的可选字体的支持。'
- en: '* * *'
  id: totrans-865
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.3**'
  id: totrans-866
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.17.3 中的变更**'
- en: '**Fixed** an undocumented issue, which prevented fully cleaning a PDF page
    when using `Page.cleanContents()`.'
  id: totrans-867
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个未记录的问题，使用 `Page.cleanContents()` 时可能无法完全清除PDF页面。
- en: '**Fixed** issue [#540](https://github.com/pymupdf/PyMuPDF/issues/540). Text
    extraction for EPUB should again work correctly.'
  id: totrans-868
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#540](https://github.com/pymupdf/PyMuPDF/issues/540)。EPUB的文本提取现在应该再次正常工作。'
- en: '**Fixed** issue [#548](https://github.com/pymupdf/PyMuPDF/issues/548). Documentation
    now includes `LINK_NAMED`.'
  id: totrans-869
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#548](https://github.com/pymupdf/PyMuPDF/issues/548)。现在文档包括了 `LINK_NAMED`。'
- en: '**Added** new parameter to control start of text in `TextWriter.fillTextbox()`.
    Implements [#549](https://github.com/pymupdf/PyMuPDF/issues/549).'
  id: totrans-870
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 新参数以控制在 `TextWriter.fillTextbox()` 中文本开始位置。实现 [#549](https://github.com/pymupdf/PyMuPDF/issues/549)。'
- en: '**Changed** documentation of [`Page.add_redact_annot()`](page.html#Page.add_redact_annot
    "Page.add_redact_annot") to explain the usage of non-builtin fonts.'
  id: totrans-871
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** [`Page.add_redact_annot()`](page.html#Page.add_redact_annot "Page.add_redact_annot")
    的文档，以解释非内置字体的使用方式。'
- en: '* * *'
  id: totrans-872
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.2**'
  id: totrans-873
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.17.2 中的变更**'
- en: '**Fixed** issue [#533](https://github.com/pymupdf/PyMuPDF/issues/533).'
  id: totrans-874
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#533](https://github.com/pymupdf/PyMuPDF/issues/533)。'
- en: '**Added** options to modify ‘Redact’ annotation appearance. Implements [#535](https://github.com/pymupdf/PyMuPDF/issues/535).'
  id: totrans-875
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 修改“Redact”注释外观的选项。实现 [#535](https://github.com/pymupdf/PyMuPDF/issues/535)。'
- en: '* * *'
  id: totrans-876
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.1**'
  id: totrans-877
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.17.1 中的变更**'
- en: '**Fixed** issue [#520](https://github.com/pymupdf/PyMuPDF/issues/520).'
  id: totrans-878
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#520](https://github.com/pymupdf/PyMuPDF/issues/520)。'
- en: '**Fixed** issue [#525](https://github.com/pymupdf/PyMuPDF/issues/525). Vertices
    for ‘Ink’ annots should now be correct.'
  id: totrans-879
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#525](https://github.com/pymupdf/PyMuPDF/issues/525)。现在"Ink"注释的顶点应该是正确的。'
- en: '**Fixed** issue [#524](https://github.com/pymupdf/PyMuPDF/issues/524). It is
    now possible to query and set rotation for applicable annotation types.'
  id: totrans-880
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 [#524](https://github.com/pymupdf/PyMuPDF/issues/524)。现在可以查询和设置适用注释类型的旋转。'
- en: Also significantly improved inline documentation for better support of interactive
    help.
  id: totrans-881
  prefs: []
  type: TYPE_NORMAL
  zh: 还显著改进了内联文档，以更好地支持交互式帮助。
- en: '* * *'
  id: totrans-882
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.17.0**'
  id: totrans-883
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.17.0 中的变更**'
- en: 'This version is based on MuPDF v1.17\. Following are highlights of new and
    changed features:'
  id: totrans-884
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本基于MuPDF v1.17。以下是新功能和更改的亮点：
- en: '**Added** extended language support for annotations and widgets: a mixture
    of Latin, Greece, Russian, Chinese, Japanese and Korean characters can now be
    used in ‘FreeText’ annotations and text widgets. No special arrangement is required
    to use it.'
  id: totrans-885
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 扩展语言支持以用于注释和小部件：拉丁文、希腊文、俄文、中文、日文和韩文字符的混合现在可以在"FreeText"注释和文本小部件中使用。无需特殊安排即可使用。'
- en: 'Faster page access is implemented for documents supporting a “chapter” structure.
    This applies to EPUB documents currently. This comes with several new [Document](document.html#document)
    methods and changes for `Document.loadPage()` and the “indexed” page access *doc[n]*:
    In addition to specifying a page number as before, a tuple *(chaper, pno)* can
    be specified to identify the desired page.'
  id: totrans-886
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为支持“章节”结构的文档实现了更快的页面访问。目前适用于EPUB文档。这带来了多个新的 [Document](document.html#document)
    方法和 `Document.loadPage()` 的变更，以及“索引”页面访问 *doc[n]* 的变更：除了以前指定页面编号外，现在还可以指定元组 *(章节,
    页码)* 来标识所需的页面。
- en: '**Changed:** Improved support of redaction annotations: images overlapped by
    redactions are **permanantly modified** by erasing the overlap areas. Also links
    are removed if overlapped by redactions. This is now fully in sync with PDF specifications.'
  id: totrans-887
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已更改:** 改进了对删除注释的支持：被删除区域覆盖的图像被 **永久修改**，重叠区域被擦除。同时，如果链接被删除区域覆盖，链接也会被移除。这现在完全符合
    PDF 规范。'
- en: 'Other changes:'
  id: totrans-888
  prefs: []
  type: TYPE_NORMAL
  zh: 其他变更：
- en: '**Changed** `TextWriter.writeText()` to support the *“morph”* parameter.'
  id: totrans-889
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已更改** `TextWriter.writeText()` 方法，现在支持 *“morph”* 参数。'
- en: '**Added** methods [`Rect.morph()`](rect.html#Rect.morph "Rect.morph"), [`IRect.morph()`](irect.html#IRect.morph
    "IRect.morph"), and [`Quad.morph()`](quad.html#Quad.morph "Quad.morph"), which
    return a new [Quad](quad.html#quad).'
  id: totrans-890
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 方法 [`Rect.morph()`](rect.html#Rect.morph "Rect.morph"), [`IRect.morph()`](irect.html#IRect.morph
    "IRect.morph") 和 [`Quad.morph()`](quad.html#Quad.morph "Quad.morph")，它们返回一个新的
    [Quad](quad.html#quad) 对象。'
- en: '**Changed** [`Page.add_freetext_annot()`](page.html#Page.add_freetext_annot
    "Page.add_freetext_annot") to support text alignment via a new *“align”* parameter.'
  id: totrans-891
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已更改** [`Page.add_freetext_annot()`](page.html#Page.add_freetext_annot "Page.add_freetext_annot")
    方法，现在支持通过新的 *“align”* 参数进行文本对齐。'
- en: '**Fixed** issue [#508](https://github.com/pymupdf/PyMuPDF/issues/508). Improved
    image rectangle calculation to hopefully deliver correct values in most if not
    all cases.'
  id: totrans-892
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** 问题 [#508](https://github.com/pymupdf/PyMuPDF/issues/508)。改进了图像矩形计算，希望能在大多数情况下提供正确的值。'
- en: '**Fixed** issue [#502](https://github.com/pymupdf/PyMuPDF/issues/502).'
  id: totrans-893
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** 问题 [#502](https://github.com/pymupdf/PyMuPDF/issues/502)。'
- en: '**Fixed** issue [#500](https://github.com/pymupdf/PyMuPDF/issues/500). `Document.convertToPDF()`
    should no longer cause memory leaks.'
  id: totrans-894
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** 问题 [#500](https://github.com/pymupdf/PyMuPDF/issues/500)。`Document.convertToPDF()`
    现在不应再导致内存泄漏。'
- en: '**Fixed** issue [#496](https://github.com/pymupdf/PyMuPDF/issues/496). Annotations
    and widgets / fields are now added or modified using the coordinates of the **unrotated
    page**. This behavior is now in sync with other methods modifying PDF pages.'
  id: totrans-895
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** 问题 [#496](https://github.com/pymupdf/PyMuPDF/issues/496)。现在添加或修改注释和小部件/字段时使用的坐标是
    **未旋转页面** 的坐标。此行为现在与修改 PDF 页面的其他方法同步。'
- en: '**Added** `Page.rotationMatrix` and `Page.derotationMatrix` to support coordinate
    transformations between the rotated and the original versions of a PDF page.'
  id: totrans-896
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `Page.rotationMatrix` 和 `Page.derotationMatrix`，用于支持 PDF 页面旋转后和原始版本之间的坐标转换。'
- en: 'Potential code breaking changes:'
  id: totrans-897
  prefs: []
  type: TYPE_NORMAL
  zh: 可能会导致代码兼容性问题的更改：
- en: The private method `Page._getTransformation()` has been removed. Use the public
    `Page.transformationMattrix` instead.
  id: totrans-898
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**私有方法** `Page._getTransformation()` 已被移除。请使用公共方法 `Page.transformationMattrix`
    替代。'
- en: '* * *'
  id: totrans-899
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.18**'
  id: totrans-900
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.18 的变更**'
- en: This version introduces several new features around PDF text output. The motivation
    is to simplify this task, while at the same time offering extending features.
  id: totrans-901
  prefs: []
  type: TYPE_NORMAL
  zh: 本版本引入了几个围绕 PDF 文本输出的新功能。目的是简化此任务，同时提供扩展功能。
- en: One major achievement is using MuPDF’s capabilities to dynamically choosing
    fallback fonts whenever a character cannot be found in the current one. This seemlessly
    works for Base-14 fonts in combination with CJK fonts (China, Japan, Korea). So
    a text may contain **any combination of characters** from the Latin, Greek, Russian,
    Chinese, Japanese and Korean languages.
  id: totrans-902
  prefs: []
  type: TYPE_NORMAL
  zh: 一个主要的成就是利用 MuPDF 的功能动态选择回退字体，以便在当前字体中找不到字符时使用。这对 Base-14 字体与 CJK 字体（中文、日文、韩文）的组合无缝运作。因此，文本可以包含来自拉丁文、希腊文、俄文、中文、日文和韩文的
    **任意组合的字符**。
- en: '**Fixed** issue [#493](https://github.com/pymupdf/PyMuPDF/issues/493). `Pixmap(doc,
    xref)` should now again correctly resemble the loaded image object.'
  id: totrans-903
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** 问题 [#493](https://github.com/pymupdf/PyMuPDF/issues/493)。`Pixmap(doc,
    xref)` 现在应正确地反映已加载的图像对象。'
- en: '**Fixed** issue [#488](https://github.com/pymupdf/PyMuPDF/issues/488). Widget
    names are now modifiable.'
  id: totrans-904
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**已修复** 问题 [#488](https://github.com/pymupdf/PyMuPDF/issues/488)。小部件名称现在是可修改的。'
- en: '**Added** new class [Font](font.html#font) which represents a font.'
  id: totrans-905
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 新类 [Font](font.html#font)，表示一个字体。'
- en: '**Added** new class [TextWriter](textwriter.html#textwriter) which serves as
    a container for text to be written on a page.'
  id: totrans-906
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 新类 [TextWriter](textwriter.html#textwriter)，用作页面上要写入的文本的容器。'
- en: '**Added** `Page.writeText()` to write one or more [TextWriter](textwriter.html#textwriter)
    objects to the page.'
  id: totrans-907
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `Page.writeText()` 方法，用于向页面写入一个或多个 [TextWriter](textwriter.html#textwriter)
    对象。'
- en: '* * *'
  id: totrans-908
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.17**'
  id: totrans-909
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.17 的变更**'
- en: '**Fixed** issue [#479](https://github.com/pymupdf/PyMuPDF/issues/479). PyMuPDF
    should now more correctly report image resolutions. This applies to both, images
    (either from images files or extracted from PDF documents) and pixmaps created
    from images.'
  id: totrans-910
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#479](https://github.com/pymupdf/PyMuPDF/issues/479)。PyMuPDF 现在应更正确地报告图像分辨率。这适用于从图像文件提取的图像或从
    PDF 文档中提取的图像，以及从图像创建的像素图。'
- en: '**Added** [`Pixmap.set_dpi()`](pixmap.html#Pixmap.set_dpi "Pixmap.set_dpi")
    which sets the image resolution in x and y directions.'
  id: totrans-911
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 [`Pixmap.set_dpi()`](pixmap.html#Pixmap.set_dpi "Pixmap.set_dpi")，用于设置图像在
    x 和 y 方向的分辨率。'
- en: '* * *'
  id: totrans-912
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.16**'
  id: totrans-913
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.16 变更**'
- en: '**Fixed** issue [#477](https://github.com/pymupdf/PyMuPDF/issues/477).'
  id: totrans-914
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#477](https://github.com/pymupdf/PyMuPDF/issues/477)。'
- en: '**Fixed** issue [#476](https://github.com/pymupdf/PyMuPDF/issues/476).'
  id: totrans-915
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#476](https://github.com/pymupdf/PyMuPDF/issues/476)。'
- en: '**Changed** annotation line end symbol coloring and fixed an error coloring
    the interior of ‘Polyline’ /’Polygon’ annotations.'
  id: totrans-916
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了注释行结束符的颜色，并修复了 ''Polyline'' / ''Polygon'' 注释内部颜色的错误。'
- en: '* * *'
  id: totrans-917
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.14**'
  id: totrans-918
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.14 变更**'
- en: '**Changed** text marker annotations to accept parameters beyond just quadrilaterals
    such that now **text lines between two given points can be marked**.'
  id: totrans-919
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了文本标记注释，以接受除了四边形外的参数，使得现在可以标记两个给定点之间的 **文本行**。'
- en: '**Added** [`Document.scrub()`](document.html#Document.scrub "Document.scrub")
    which **removes potentially sensitive data** from a PDF. Implements [#453](https://github.com/pymupdf/PyMuPDF/issues/453).'
  id: totrans-920
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 [`Document.scrub()`](document.html#Document.scrub "Document.scrub")，用于从
    PDF 中 **删除可能敏感的数据**。实现了 [#453](https://github.com/pymupdf/PyMuPDF/issues/453)。'
- en: '**Added** `Annot.blendMode()` which returns the **blend mode** of annotations.'
  id: totrans-921
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 `Annot.blendMode()`，用于返回注释的 **混合模式**。'
- en: '**Added** `Annot.setBlendMode()` to set the annotation’s blend mode. This resolves
    issue [#416](https://github.com/pymupdf/PyMuPDF/issues/416).'
  id: totrans-922
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 `Annot.setBlendMode()`，用于设置注释的混合模式。解决了问题 [#416](https://github.com/pymupdf/PyMuPDF/issues/416)。'
- en: '**Changed** [`Annot.update()`](annot.html#Annot.update "Annot.update") to accept
    additional parameters for setting blend mode and opacity.'
  id: totrans-923
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 [`Annot.update()`](annot.html#Annot.update "Annot.update")，以接受用于设置混合模式和不透明度的附加参数。'
- en: '**Added** advanced graphics features to **control the anti-aliasing values**,
    [`Tools.set_aa_level()`](tools.html#Tools.set_aa_level "Tools.set_aa_level").
    Resolves [#467](https://github.com/pymupdf/PyMuPDF/issues/467)'
  id: totrans-924
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了高级图形功能以控制抗锯齿值，[`Tools.set_aa_level()`](tools.html#Tools.set_aa_level
    "Tools.set_aa_level")。解决了 [#467](https://github.com/pymupdf/PyMuPDF/issues/467)。'
- en: '**Fixed** issue [#474](https://github.com/pymupdf/PyMuPDF/issues/474).'
  id: totrans-925
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#474](https://github.com/pymupdf/PyMuPDF/issues/474)。'
- en: '**Fixed** issue [#466](https://github.com/pymupdf/PyMuPDF/issues/466).'
  id: totrans-926
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#466](https://github.com/pymupdf/PyMuPDF/issues/466)。'
- en: '* * *'
  id: totrans-927
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.13**'
  id: totrans-928
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.13 变更**'
- en: '**Added** `Document.getPageXObjectList()` which returns a list of **Form XObjects**
    of the page.'
  id: totrans-929
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 `Document.getPageXObjectList()`，返回页面的 **Form XObjects** 列表。'
- en: '**Added** `Page.setMediaBox()` for changing the physical PDF page size.'
  id: totrans-930
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 `Page.setMediaBox()`，用于更改物理 PDF 页面大小。'
- en: '**Added** [Page](page.html#page) methods which have been internal before: `Page.cleanContents()`
    (= `Page._cleanContents()`), `Page.getContents()` (= `Page._getContents()`), `Page.getTransformation()`
    (= `Page._getTransformation()`).'
  id: totrans-931
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 [Page](page.html#page) 方法，这些方法在此之前是内部的：`Page.cleanContents()`（= `Page._cleanContents()`）、`Page.getContents()`（=
    `Page._getContents()`）、`Page.getTransformation()`（= `Page._getTransformation()`）。'
- en: '* * *'
  id: totrans-932
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.12**'
  id: totrans-933
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.12 变更**'
- en: '**Fixed** issue [#447](https://github.com/pymupdf/PyMuPDF/issues/447)'
  id: totrans-934
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#447](https://github.com/pymupdf/PyMuPDF/issues/447)。'
- en: '**Fixed** issue [#461](https://github.com/pymupdf/PyMuPDF/issues/461).'
  id: totrans-935
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#461](https://github.com/pymupdf/PyMuPDF/issues/461)。'
- en: '**Fixed** issue [#397](https://github.com/pymupdf/PyMuPDF/issues/397).'
  id: totrans-936
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#397](https://github.com/pymupdf/PyMuPDF/issues/397)。'
- en: '**Fixed** issue [#463](https://github.com/pymupdf/PyMuPDF/issues/463).'
  id: totrans-937
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 [#463](https://github.com/pymupdf/PyMuPDF/issues/463)。'
- en: '**Added** JavaScript support to PDF form fields, thereby fixing [#454](https://github.com/pymupdf/PyMuPDF/issues/454).'
  id: totrans-938
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了对 PDF 表单字段的 JavaScript 支持，从而解决了 [#454](https://github.com/pymupdf/PyMuPDF/issues/454)
    问题。'
- en: '**Added** a new annotation method [`Annot.delete_responses()`](annot.html#Annot.delete_responses
    "Annot.delete_responses"), which removes ‘Popup’ and response annotations referring
    to the current one. Mainly serves data protection purposes.'
  id: totrans-939
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了一个新的注释方法 [`Annot.delete_responses()`](annot.html#Annot.delete_responses
    "Annot.delete_responses")，用于删除引用当前注释的 ''Popup'' 和响应注释。主要用于数据保护目的。'
- en: '**Added** a new form field method [`Widget.reset()`](widget.html#Widget.reset
    "Widget.reset"), which resets the field value to its default.'
  id: totrans-940
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了一个新的表单字段方法 [`Widget.reset()`](widget.html#Widget.reset "Widget.reset")，将字段值重置为其默认值。'
- en: '**Changed** and extended handling of redactions: images and XObjects are removed
    if *contained* in a redaction rectangle. Any partial only overlaps will just be
    covered by the redaction background color. Now an *overlay* text can be specified
    to be inserted in the rectangle area to **take the place the deleted original**
    text. This resolves [#434](https://github.com/pymupdf/PyMuPDF/issues/434).'
  id: totrans-941
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**改变**和扩展了对清除的处理：如果图像和 XObjects *包含*在清除的矩形中，则会被删除。任何部分重叠的内容将只被清除背景颜色覆盖。现在可以指定一个
    *叠加文本* 来插入到矩形区域中**代替删除的原始**文本。这解决了 [#434](https://github.com/pymupdf/PyMuPDF/issues/434)。'
- en: '* * *'
  id: totrans-942
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.11**'
  id: totrans-943
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.11 中的变化**'
- en: '**Added** Support for redaction annotations via method [`Page.add_redact_annot()`](page.html#Page.add_redact_annot
    "Page.add_redact_annot") and [`Page.apply_redactions()`](page.html#Page.apply_redactions
    "Page.apply_redactions").'
  id: totrans-944
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了通过方法 [`Page.add_redact_annot()`](page.html#Page.add_redact_annot "Page.add_redact_annot")
    和 [`Page.apply_redactions()`](page.html#Page.apply_redactions "Page.apply_redactions")
    支持清除注释的功能。'
- en: '**Fixed** issue #426 (“PolygonAnnotation in 1.16.10 version”).'
  id: totrans-945
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 #426（“1.16.10 版本中的 PolygonAnnotation”）。'
- en: '**Fixed** documentation only issues [#443](https://github.com/pymupdf/PyMuPDF/issues/443)
    and [#444](https://github.com/pymupdf/PyMuPDF/issues/444).'
  id: totrans-946
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了文档问题 [#443](https://github.com/pymupdf/PyMuPDF/issues/443) 和 [#444](https://github.com/pymupdf/PyMuPDF/issues/444)。'
- en: '* * *'
  id: totrans-947
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.10**'
  id: totrans-948
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.10 中的变化**'
- en: '**Fixed** issue #421 (“annot.set_rect(rect) has no effect on text Annotation”)'
  id: totrans-949
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 #421（“annot.set_rect(rect) 对文本注释无效”）'
- en: '**Fixed** issue #417 (“Strange behavior for page.deleteAnnot on 1.16.9 compare
    to 1.13.20”)'
  id: totrans-950
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 #417（“1.16.9 版本中的 page.deleteAnnot 行为奇怪，与 1.13.20 版本不符”）'
- en: '**Fixed** issue #415 (“Annot.setOpacity throws mupdf warnings”)'
  id: totrans-951
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 #415（“Annot.setOpacity 抛出 mupdf 警告”）'
- en: '**Changed** all “add annotation / widget” methods to store a unique name in
    the */NM* PDF key.'
  id: totrans-952
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了所有“添加注释 / 小部件”方法，以在 */NM* PDF 键中存储唯一名称。'
- en: '**Changed** `Annot.setInfo()` to also accept direct parameters in addition
    to a dictionary.'
  id: totrans-953
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 `Annot.setInfo()` ，现在也可以接受直接参数，而不仅仅是字典。'
- en: '**Changed** [`Annot.info`](annot.html#Annot.info "Annot.info") to now also
    show the annotation’s unique id (*/NM* PDF key) if present.'
  id: totrans-954
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 [`Annot.info`](annot.html#Annot.info "Annot.info") ，现在还会显示注释的唯一标识（*/NM*
    PDF 键）（如果存在）。'
- en: '**Added** [`Page.annot_names()`](page.html#Page.annot_names "Page.annot_names")
    which returns a list of all annotation names (*/NM* keys).'
  id: totrans-955
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 [`Page.annot_names()`](page.html#Page.annot_names "Page.annot_names")
    方法，返回所有注释名称（*/NM* 键）的列表。'
- en: '**Added** [`Page.load_annot()`](page.html#Page.load_annot "Page.load_annot")
    which loads an annotation given its unique id (*/NM* key).'
  id: totrans-956
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 [`Page.load_annot()`](page.html#Page.load_annot "Page.load_annot")
    方法，根据其唯一标识（*/NM* 键）加载注释。'
- en: '**Added** [`Document.reload_page()`](document.html#Document.reload_page "Document.reload_page")
    which provides a new copy of a page after finishing any pending updates to it.'
  id: totrans-957
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 [`Document.reload_page()`](document.html#Document.reload_page "Document.reload_page")
    方法，在完成对页面的所有待处理更新后，提供页面的新副本。'
- en: '* * *'
  id: totrans-958
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.9**'
  id: totrans-959
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.9 中的变化**'
- en: '**Fixed** #412 (“Feature Request: Allow controlling whether TOC entries should
    be collapsed”)'
  id: totrans-960
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了 #412（“功能请求：允许控制 TOC 条目是否应该折叠”）'
- en: '**Fixed** #411 (“Seg Fault with page.firstWidget”)'
  id: totrans-961
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了 #411（“使用 page.firstWidget 导致 Seg Fault”）'
- en: '**Fixed** #407 (“Annot.setOpacity trouble”)'
  id: totrans-962
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了 #407（“Annot.setOpacity 出问题”）'
- en: '**Changed** methods `Annot.setBorder()`, `Annot.setColors()`, `Link.setBorder()`,
    and `Link.setColors()` to also accept direct parameters, and not just cumbersome
    dictionaries.'
  id: totrans-963
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了方法 `Annot.setBorder()`、`Annot.setColors()`、`Link.setBorder()` 和 `Link.setColors()`
    ，现在也可以接受直接参数，而不仅仅是冗长的字典。'
- en: '* * *'
  id: totrans-964
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.8**'
  id: totrans-965
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.8 中的变化**'
- en: '**Added** several new methods to the [Document](document.html#document) class,
    which make dealing with PDF low-level structures easier. I also decided to provide
    them as “normal” methods (as opposed to private ones starting with an underscore
    “_”). These are `Document.xrefObject()`, `Document.xrefStream()`, `Document.xrefStreamRaw()`,
    `Document.PDFTrailer()`, `Document.PDFCatalog()`, `Document.metadataXML()`, `Document.updateObject()`,
    `Document.updateStream()`.'
  id: totrans-966
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增加**了几种新的方法到 [Document](document.html#document) 类中，这些方法使得处理 PDF 低级结构更加容易。我也决定将它们提供为“正常”方法（而不是以下划线“_”开头的私有方法）。这些方法包括
    `Document.xrefObject()`、`Document.xrefStream()`、`Document.xrefStreamRaw()`、`Document.PDFTrailer()`、`Document.PDFCatalog()`、`Document.metadataXML()`、`Document.updateObject()`
    和 `Document.updateStream()`。'
- en: '**Added** `Tools.mupdf_disply_errors()` which sets the display of mupdf errors
    on *sys.stderr*.'
  id: totrans-967
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Tools.mupdf_disply_errors()`，设置mupdf错误在 *sys.stderr* 上的显示。'
- en: '**Added** a commandline facility. This a major new feature: you can now invoke
    several utility functions via *“python -m fitz …”*. It should obsolete the need
    for many of the most trivial scripts. Please refer to [Command line interface](module.html#module).'
  id: totrans-968
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 命令行功能。这是一个重要的新功能：现在可以通过 *“python -m fitz …”* 调用几个实用函数。这应该能够取代许多最简单的脚本。请参阅
    [命令行接口](module.html#module)。'
- en: '* * *'
  id: totrans-969
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.7**'
  id: totrans-970
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.7 的更改**'
- en: Minor changes to better synchronize the binary image streams of [TextPage](textpage.html#textpage)
    image blocks and `Document.extractImage()` images.
  id: totrans-971
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 [TextPage](textpage.html#textpage) 图像块和 `Document.extractImage()` 图像，进行了微小的更改，以更好地同步二进制图像流。
- en: '**Fixed** issue #394 (“PyMuPDF Segfaults when using TOOLS.mupdf_warnings()”).'
  id: totrans-972
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 #394（“使用 TOOLS.mupdf_warnings() 时，PyMuPDF Segfaults”）。'
- en: '**Changed** redirection of MuPDF error messages: apart from writing them to
    Python *sys.stderr*, they are now also stored with the MuPDF warnings.'
  id: totrans-973
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** MuPDF 错误消息的重定向：除了将它们写入 Python 的 *sys.stderr* 外，现在还将它们存储在 MuPDF 警告中。'
- en: '**Changed** [`Tools.mupdf_warnings()`](tools.html#Tools.mupdf_warnings "Tools.mupdf_warnings")
    to automatically empty the store (if not deactivated via a parameter).'
  id: totrans-974
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** [`Tools.mupdf_warnings()`](tools.html#Tools.mupdf_warnings "Tools.mupdf_warnings")，现在会自动清空存储（如果没有通过参数停用）。'
- en: '**Changed** `Page.getImageBbox()` to return an **infinite rectangle** if the
    image could not be located on the page – instead of raising an exception.'
  id: totrans-975
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** `Page.getImageBbox()`，如果无法在页面上定位图像，则返回一个**无限矩形**，而不是引发异常。'
- en: '* * *'
  id: totrans-976
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.6**'
  id: totrans-977
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.6 的更改**'
- en: '**Fixed** issue #390 (“Incomplete deletion of annotations”).'
  id: totrans-978
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 #390（“注释不完全删除”）。'
- en: '**Changed** `Page.searchFor()` / `Document.searchPageFor()` to also support
    the *flags* parameter, which controls the data included in a [TextPage](textpage.html#textpage).'
  id: totrans-979
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** `Page.searchFor()` / `Document.searchPageFor()`，现在也支持 *flags* 参数，用于控制包含在
    [TextPage](textpage.html#textpage) 中的数据。'
- en: '**Changed** `Document.getPageImageList()`, `Document.getPageFontList()` and
    their [Page](page.html#page) counterparts to support a new parameter *full*. If
    true, the returned items will contain the [`xref`](glossary.html#xref "xref")
    of the *Form XObject* where the font or image is referenced.'
  id: totrans-980
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** `Document.getPageImageList()`，`Document.getPageFontList()` 及其 [Page](page.html#page)
    对应方法，支持新的 *full* 参数。如果为 true，则返回的项目将包含引用字体或图像的 *Form XObject* 的 [`xref`](glossary.html#xref
    "xref")。'
- en: '* * *'
  id: totrans-981
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.5**'
  id: totrans-982
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.5 的更改**'
- en: More performance improvements for text extraction.
  id: totrans-983
  prefs: []
  type: TYPE_NORMAL
  zh: 进一步优化文本提取性能。
- en: '**Fixed** second part of issue #381 (see item in v1.16.4).'
  id: totrans-984
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 #381 的第二部分（请参阅 v1.16.4 中的项目）。'
- en: '**Added** `Page.getTextPage()`, so it is no longer required to create an intermediate
    display list for text extractions. Page level wrappers for text extraction and
    text searching are now based on this, which should improve performance by ca.
    5%.'
  id: totrans-985
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Page.getTextPage()`，现在不再需要为文本提取创建中间显示列表。页面级别的文本提取和文本搜索现在都基于此方法，预计可以提高约
    5% 的性能。'
- en: '* * *'
  id: totrans-986
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.4**'
  id: totrans-987
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.4 的更改**'
- en: '**Fixed** issue #381 (“TextPage.extractDICT … failed … after upgrading … to
    1.16.3”)'
  id: totrans-988
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 #381（“TextPage.extractDICT … 升级到 1.16.3 后失败 …”）'
- en: '**Added** method [`Document.pages()`](document.html#Document.pages "Document.pages")
    which delivers a generator iterator over a page range.'
  id: totrans-989
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 方法 [`Document.pages()`](document.html#Document.pages "Document.pages")，用于生成页面范围的迭代器。'
- en: '**Added** method [`Page.links()`](page.html#Page.links "Page.links") which
    delivers a generator iterator over the links of a page.'
  id: totrans-990
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 方法 [`Page.links()`](page.html#Page.links "Page.links")，用于生成页面链接的迭代器。'
- en: '**Added** method [`Page.annots()`](page.html#Page.annots "Page.annots") which
    delivers a generator iterator over the annotations of a page.'
  id: totrans-991
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 方法 [`Page.annots()`](page.html#Page.annots "Page.annots")，用于生成页面注释的迭代器。'
- en: '**Added** method [`Page.widgets()`](page.html#Page.widgets "Page.widgets")
    which delivers a generator iterator over the form fields of a page.'
  id: totrans-992
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 方法 [`Page.widgets()`](page.html#Page.widgets "Page.widgets")，用于生成页面表单字段的迭代器。'
- en: '**Changed** [`Document.is_form_pdf`](document.html#Document.is_form_pdf "Document.is_form_pdf")
    to now contain the number of widgets, and *False* if not a PDF or this number
    is zero.'
  id: totrans-993
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改** [`Document.is_form_pdf`](document.html#Document.is_form_pdf "Document.is_form_pdf")，现在包含小部件的数量，如果不是
    PDF 或此数量为零，则为 *False*。'
- en: '* * *'
  id: totrans-994
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.3**'
  id: totrans-995
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.3 的更改**'
- en: Minor changes compared to version 1.16.2\. The code of the “dict” and “rawdict”
    variants of `Page.getText()` has been ported to C which has greatly improved their
    performance. This improvement is mostly noticeable with text-oriented documents,
    where they now should execute almost two times faster.
  id: totrans-996
  prefs: []
  type: TYPE_NORMAL
  zh: 与版本 1.16.2 相比，较小的变化。`Page.getText()`的“dict”和“rawdict”变体代码已经移植到了C中，极大地提高了性能。这在文本导向的文档中特别明显，现在几乎可以快两倍执行。
- en: '**Fixed** issue #369 (“mupdf: cmsCreateTransform failed”) by removing ICC colorspace
    support.'
  id: totrans-997
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题 #369 (“mupdf: cmsCreateTransform failed”)，通过移除ICC颜色空间支持来解决。'
- en: '**Changed** `Page.getText()` to accept additional keywords “blocks” and “words”.
    These will deliver the results of `Page.getTextBlocks()` and `Page.getTextWords()`,
    respectively. So all text extraction methods are now available via a uniform API.
    Correspondingly, there are now new methods [`TextPage.extractBLOCKS()`](textpage.html#TextPage.extractBLOCKS
    "TextPage.extractBLOCKS") and `TextPage.extractWords()`.'
  id: totrans-998
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Changed** `Page.getText()` 已修改以接受额外的关键字“blocks”和“words”。它们将分别返回`Page.getTextBlocks()`和`Page.getTextWords()`的结果。因此，所有文本提取方法现在通过统一的API可用。对应地，现在有新的方法[`TextPage.extractBLOCKS()`](textpage.html#TextPage.extractBLOCKS
    "TextPage.extractBLOCKS")和`TextPage.extractWords()`。'
- en: '**Changed** `Page.getText()` to default bit indicator *TEXT_INHIBIT_SPACES*
    to **off**. Insertion of additional spaces is **not suppressed** by default.'
  id: totrans-999
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Changed** `Page.getText()` 将默认的位指示器*TEXT_INHIBIT_SPACES*设为**off**。默认情况下**不会**抑制额外空格的插入。'
- en: '* * *'
  id: totrans-1000
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.2**'
  id: totrans-1001
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.2 中的更改**'
- en: '**Changed** text extraction methods of [Page](page.html#page) to allow detail
    control of the amount of extracted data.'
  id: totrans-1002
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Changed** 文本提取方法的[Page](page.html#page)已更改，允许详细控制提取数据量。'
- en: '**Added** [`planish_line()`](functions.html#planish_line "planish_line") which
    maps a given line (defined as a pair of points) to the x-axis.'
  id: totrans-1003
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** [`planish_line()`](functions.html#planish_line "planish_line")用于将给定线（定义为一对点）映射到x轴。'
- en: '**Fixed** an issue (w/o Github number) which brought down the interpreter when
    encountering certain non-UTF-8 encodable characters while using `Page.getText()`
    with te “dict” option.'
  id: totrans-1004
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 一个问题（无Github编号），当使用带有“dict”选项的`Page.getText()`时，遇到某些非UTF-8可编码字符时，解释器崩溃。'
- en: '**Fixed** issue #362 (“Memory Leak with getText(‘rawDICT’)”).'
  id: totrans-1005
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题 #362 (“使用getText(‘rawDICT’)导致内存泄漏”).'
- en: '* * *'
  id: totrans-1006
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.1**'
  id: totrans-1007
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.1 中的更改**'
- en: '**Added** property [`Quad.is_convex`](quad.html#Quad.is_convex "Quad.is_convex")
    which checks whether a line is contained in the quad if it connects two points
    of it.'
  id: totrans-1008
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Added** 属性[`Quad.is_convex`](quad.html#Quad.is_convex "Quad.is_convex")，用于检查线是否包含在四边形中，如果连接了它的两个点。'
- en: '**Changed** [`Document.insert_pdf()`](document.html#Document.insert_pdf "Document.insert_pdf")
    to now allow dropping or including links and annotations independently during
    the copy. Fixes issue #352 (“Corrupt PDF data and …”), which seemed to intermittently
    occur when using the method for some problematic PDF files.'
  id: totrans-1009
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Changed** [`Document.insert_pdf()`](document.html#Document.insert_pdf "Document.insert_pdf")现在允许在复制期间独立地放弃或包含链接和注释。修复了问题
    #352 (“损坏的PDF数据和...”)，在使用该方法处理某些问题PDF文件时似乎偶尔会出现。'
- en: '**Fixed** a bug which, in matrix division using the syntax *“m1/m2”*, caused
    matrix *“m1”* to be **replaced** by the result instead of delivering a new matrix.'
  id: totrans-1010
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 修复了一个bug，当使用*“m1/m2”*语法进行矩阵除法时，导致矩阵*“m1”*被**替换**为结果而不是生成新的矩阵。'
- en: '**Fixed** issue #354 (“SyntaxWarning with Python 3.8”). We now always use *“==”*
    for literals (instead of the *“is”* Python keyword).'
  id: totrans-1011
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题 #354 (“Python 3.8语法警告”)。我们现在始终使用*“==”*来比较字面值（而不是Python关键字*“is”*）。'
- en: '**Fixed** issue #353 (“mupdf version check”), to no longer refuse the import
    when there are only patch level deviations from MuPDF.'
  id: totrans-1012
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fixed** 问题 #353 (“mupdf版本检查”), 不再因MuPDF只有补丁级别偏差而拒绝导入。'
- en: '* * *'
  id: totrans-1013
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.16.0**'
  id: totrans-1014
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.16.0 中的更改**'
- en: 'This major new version of MuPDF comes with several nice new or changed features.
    Some of them imply programming API changes, however. This is a synopsis of what
    has changed:'
  id: totrans-1015
  prefs: []
  type: TYPE_NORMAL
  zh: MuPDF的这个重大新版本带来了几个不错的新特性或更改。其中一些暗示了编程API的变化。这是变化的概述：
- en: PDF document encryption and decryption is now **fully supported**. This includes
    setting **permissions**, **passwords** (user and owner passwords) and the desired
    encryption method.
  id: totrans-1016
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在完全支持PDF文档的加密和解密。包括设置**权限**、**密码**（用户密码和所有者密码）以及所需的加密方法。
- en: In response to the new encryption features, PyMuPDF returns an integer (ie.
    a combination of bits) for document permissions, and no longer a dictionary.
  id: totrans-1017
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对新的加密功能，PyMuPDF返回一个整数（即权限的位组合），不再返回字典。
- en: Redirection of MuPDF errors and warnings is now natively supported. PyMuPDF
    redirects error messages from MuPDF to *sys.stderr* and no longer buffers them.
    Warnings continue to be buffered and will not be displayed. Functions exist to
    access and reset the warnings buffer.
  id: totrans-1018
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在原生支持重定向 MuPDF 的错误和警告。PyMuPDF 将 MuPDF 的错误消息重定向到 *sys.stderr*，不再缓冲它们。警告仍将被缓冲，并且不会显示。存在函数来访问和重置警告缓冲区。
- en: Annotations are now **only supported for PDF**.
  id: totrans-1019
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在仅支持 PDF 的注释。
- en: Annotations and widgets (form fields) are now **separate object chains** on
    a page (although widgets technically still **are** PDF annotations). This means,
    that you will **never encounter widgets** when using `Page.firstAnnot` or [`Annot.next()`](annot.html#Annot.next
    "Annot.next"). You must use `Page.firstWidget` and [`Widget.next()`](widget.html#Widget.next
    "Widget.next") to access form fields.
  id: totrans-1020
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注释和小部件（表单字段）现在是页面上的**单独对象链**（虽然小部件在技术上仍然**是** PDF 注释）。这意味着，当使用 `Page.firstAnnot`
    或 [`Annot.next()`](annot.html#Annot.next "Annot.next") 时，**永远不会遇到小部件**。您必须使用 `Page.firstWidget`
    和 [`Widget.next()`](widget.html#Widget.next "Widget.next") 来访问表单字段。
- en: 'As part of MuPDF’s changes regarding widgets, only the following four fonts
    are supported, when **adding** or **changing** form fields: **Courier, Helvetica,
    Times-Roman** and **ZapfDingBats**.'
  id: totrans-1021
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为 MuPDF 关于小部件更改的一部分，**在添加或更改**表单字段时，仅支持以下四种字体：**Courier, Helvetica, Times-Roman**
    和 **ZapfDingBats**。
- en: 'List of change details:'
  id: totrans-1022
  prefs: []
  type: TYPE_NORMAL
  zh: 变更详情列表：
- en: '**Added** [`Document.can_save_incrementally()`](document.html#Document.can_save_incrementally
    "Document.can_save_incrementally") which checks conditions that are preventing
    use of option *incremental=True* of [`Document.save()`](document.html#Document.save
    "Document.save").'
  id: totrans-1023
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** [`Document.can_save_incrementally()`](document.html#Document.can_save_incrementally
    "Document.can_save_incrementally")，检查阻止使用选项 *incremental=True* 的 [`Document.save()`](document.html#Document.save
    "Document.save") 的条件。'
- en: '**Added** `Page.firstWidget` which points to the first field on a page.'
  id: totrans-1024
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 `Page.firstWidget`，指向页面上第一个字段。'
- en: '**Added** `Page.getImageBbox()` which returns the rectangle occupied by an
    image shown on the page.'
  id: totrans-1025
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Page.getImageBbox()`，返回页面上显示的图像所占用的矩形。'
- en: '**Added** `Annot.setName()` which lets you change the (icon) name field.'
  id: totrans-1026
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** `Annot.setName()`，允许您更改（图标）名称字段。'
- en: '**Added** outputting the text color in `Page.getText()`: the *“dict”*, *“rawdict”*
    and *“xml”* options now also show the color in sRGB format.'
  id: totrans-1027
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了在 `Page.getText()` 中输出文本颜色的功能：*“dict”*，*“rawdict”* 和 *“xml”* 选项现在还显示
    sRGB 格式的颜色。'
- en: '**Changed** [`Document.permissions`](document.html#Document.permissions "Document.permissions")
    to now contain an integer of bool indicators – was a dictionary before.'
  id: totrans-1028
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更** [`Document.permissions`](document.html#Document.permissions "Document.permissions")
    现在包含一个布尔指示器的整数 – 之前是一个字典。'
- en: '**Changed** [`Document.save()`](document.html#Document.save "Document.save"),
    `Document.write()`, which now fully support password-based decryption and encryption
    of PDF files.'
  id: totrans-1029
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更** [`Document.save()`](document.html#Document.save "Document.save")，`Document.write()`，现在完全支持基于密码的
    PDF 文件解密和加密。'
- en: '**Changed the names of all Python constants** related to annotations and widgets.
    Please make sure to consult the **Constants and Enumerations** chapter if your
    script is dealing with these two classes. This decision goes back to the dropped
    support for non-PDF annotations. The **old names** (starting with “ANNOT_*” or
    “WIDGET_*”) will be available as deprecated synonyms.'
  id: totrans-1030
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更所有与注释和小部件相关的 Python 常量名称**。请确保查阅**常量和枚举**章节，如果您的脚本涉及这两个类。这一决定源于对非 PDF 注释的支持。**旧名称**（以“ANNOT_*”或“WIDGET_*”开头）将作为弃用的同义词可用。'
- en: '**Changed** font support for widgets: only *Cour* (Courier), *Helv* (Helvetica,
    default), *TiRo* (Times-Roman) and *ZaDb* (ZapfDingBats) are accepted when **adding
    or changing** form fields. Only the plain versions are possible – not their italic
    or bold variations. **Reading** widgets, however will show its original font.'
  id: totrans-1031
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更** 对小部件的字体支持：仅支持 *Cour* (Courier), *Helv* (Helvetica, 默认), *TiRo* (Times-Roman)
    和 *ZaDb* (ZapfDingBats) 添加或更改表单字段时。只有普通版本是可能的 – 不支持它们的斜体或粗体变体。然而，**阅读**小部件将显示其原始字体。'
- en: '**Changed** the name of the warnings buffer to [`Tools.mupdf_warnings()`](tools.html#Tools.mupdf_warnings
    "Tools.mupdf_warnings") and the function to empty this buffer is now called [`Tools.reset_mupdf_warnings()`](tools.html#Tools.reset_mupdf_warnings
    "Tools.reset_mupdf_warnings").'
  id: totrans-1032
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更** 警告缓冲区的名称为 [`Tools.mupdf_warnings()`](tools.html#Tools.mupdf_warnings
    "Tools.mupdf_warnings")，清空此缓冲区的函数现在称为 [`Tools.reset_mupdf_warnings()`](tools.html#Tools.reset_mupdf_warnings
    "Tools.reset_mupdf_warnings")。'
- en: '**Changed** `Page.getPixmap()`, [`Document.get_page_pixmap()`](document.html#Document.get_page_pixmap
    "Document.get_page_pixmap"): a new bool argument *annots* can now be used to **suppress
    the rendering of annotations** on the page.'
  id: totrans-1033
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 `Page.getPixmap()` 和 [`Document.get_page_pixmap()`](document.html#Document.get_page_pixmap
    "Document.get_page_pixmap")：现在可以使用新的布尔参数 *annots* 来**抑制页面上注释的渲染**。'
- en: '**Changed** [`Page.add_file_annot()`](page.html#Page.add_file_annot "Page.add_file_annot")
    and [`Page.add_text_annot()`](page.html#Page.add_text_annot "Page.add_text_annot")
    to enable setting an icon.'
  id: totrans-1034
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 [`Page.add_file_annot()`](page.html#Page.add_file_annot "Page.add_file_annot")
    和 [`Page.add_text_annot()`](page.html#Page.add_text_annot "Page.add_text_annot")，可以设置图标。'
- en: '**Removed** widget-related methods and attributes from the [Annot](annot.html#annot)
    object.'
  id: totrans-1035
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移除**了[Annot](annot.html#annot) 对象中与小部件相关的方法和属性。'
- en: '**Removed** [Document](document.html#document) attributes *openErrCode*, *openErrMsg*,
    and [Tools](tools.html#tools) attributes / methods *stderr*, *reset_stderr*, *stdout*,
    and *reset_stdout*.'
  id: totrans-1036
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移除**了 [Document](document.html#document) 属性 *openErrCode*、*openErrMsg*，以及
    [Tools](tools.html#tools) 的属性/方法 *stderr*、*reset_stderr*、*stdout* 和 *reset_stdout*。'
- en: '**Removed** **thirdparty zlib** dependency in PyMuPDF: there are now compression
    functions available in MuPDF. Source installers of PyMuPDF may now omit this extra
    installation step.'
  id: totrans-1037
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移除**了PyMuPDF中的 **thirdparty zlib** 依赖：现在MuPDF中提供了压缩函数。因此，PyMuPDF的源安装程序现在可以省略这一额外的安装步骤。'
- en: '**No version published for MuPDF v1.15.0**'
  id: totrans-1038
  prefs: []
  type: TYPE_NORMAL
  zh: '**MuPDF v1.15.0 未发布任何版本**'
- en: '* * *'
  id: totrans-1039
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.20 / 1.14.21**'
  id: totrans-1040
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.20 / 1.14.21 版本变更**'
- en: '**Changed** text marker annotations to support multiple rectangles / quadrilaterals.
    This fixes issue #341 (“Question : How to addhighlight so that a string spread
    across more than a line is covered by one highlight?”) and similar (#285).'
  id: totrans-1041
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了文本标记注释，支持多个矩形/四边形。修复问题 #341（“问题：如何添加高亮，以便跨多行的字符串只覆盖一个高亮？”）和类似问题 #285。'
- en: '**Fixed** issue #331 (“Importing PyMuPDF changes warning filtering behaviour
    globally”).'
  id: totrans-1042
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 #331（“导入PyMuPDF更改警告全局过滤行为”）。'
- en: '* * *'
  id: totrans-1043
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.19**'
  id: totrans-1044
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.19 版本变更**'
- en: '**Fixed** issue #319 (“InsertText function error when use custom font”).'
  id: totrans-1045
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 #319（“使用自定义字体时 InsertText 函数错误”）。'
- en: '**Added** new method [`Document.get_sigflags()`](document.html#Document.get_sigflags
    "Document.get_sigflags") which returns information on whether a PDF is signed.
    Resolves issue #326 (“How to detect signature in a form pdf?”).'
  id: totrans-1046
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了新方法 [`Document.get_sigflags()`](document.html#Document.get_sigflags
    "Document.get_sigflags")，用于返回PDF签名信息。解决问题 #326（“如何检测表单PDF中的签名？”）。'
- en: '* * *'
  id: totrans-1047
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.17**'
  id: totrans-1048
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.17 版本变更**'
- en: '**Added** `Document.fullcopyPage()` to make full page copies within a PDF (not
    just copied references as `Document.copyPage()` does).'
  id: totrans-1049
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 `Document.fullcopyPage()`，用于在PDF中进行完整页面复制（不仅是 `Document.copyPage()`
    中的引用复制）。'
- en: '**Changed** `Page.getPixmap()`, [`Document.get_page_pixmap()`](document.html#Document.get_page_pixmap
    "Document.get_page_pixmap") now use *alpha=False* as default.'
  id: totrans-1050
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 `Page.getPixmap()` 和 [`Document.get_page_pixmap()`](document.html#Document.get_page_pixmap
    "Document.get_page_pixmap")，现在默认使用 *alpha=False*。'
- en: '**Changed** text extraction: the span dictionary now (again) contains its rectangle
    under the *bbox* key.'
  id: totrans-1051
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了文本提取方式：现在span字典再次包含在 *bbox* 键下的矩形。'
- en: '**Changed** `Document.movePage()` and `Document.copyPage()` to use direct functions
    instead of wrapping [`Document.select()`](document.html#Document.select "Document.select")
    – similar to [`Document.delete_page()`](document.html#Document.delete_page "Document.delete_page")
    in v1.14.16.'
  id: totrans-1052
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 `Document.movePage()` 和 `Document.copyPage()`，使用直接函数而不是包装 [`Document.select()`](document.html#Document.select
    "Document.select") – 类似于 v1.14.16 中的 [`Document.delete_page()`](document.html#Document.delete_page
    "Document.delete_page")。'
- en: '* * *'
  id: totrans-1053
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.16**'
  id: totrans-1054
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.16 版本变更**'
- en: '**Changed** [Document](document.html#document) methods around PDF */EmbeddedFiles*
    to no longer use MuPDF’s “portfolio” functions. That support will be dropped in
    MuPDF v1.15 – therefore another solution was required.'
  id: totrans-1055
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了关于PDF */EmbeddedFiles* 的 [Document](document.html#document) 方法，不再使用MuPDF的“portfolio”功能。MuPDF
    v1.15 将不再支持该功能，因此需要另一种解决方案。'
- en: '**Changed** `Document.embfile_Count()` to be a function (was an attribute).'
  id: totrans-1056
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**了 `Document.embfile_Count()`，现在是一个函数（之前是一个属性）。'
- en: '**Added** new method `Document.embfile_Names()` which returns a list of names
    of embedded files.'
  id: totrans-1057
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了新方法 `Document.embfile_Names()`，用于返回嵌入文件的名称列表。'
- en: '**Changed** [`Document.delete_page()`](document.html#Document.delete_page "Document.delete_page")
    and [`Document.delete_pages()`](document.html#Document.delete_pages "Document.delete_pages")
    to internally no longer use [`Document.select()`](document.html#Document.select
    "Document.select"), but instead use functions to perform the deletion directly.
    As it has turned out, the [`Document.select()`](document.html#Document.select
    "Document.select") method yields invalid outline trees (tables of content) for
    very complex PDFs and sophisticated use of annotations.'
  id: totrans-1058
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Document.delete_page()`](document.html#Document.delete_page "Document.delete_page")
    和 [`Document.delete_pages()`](document.html#Document.delete_pages "Document.delete_pages")
    在内部不再使用 [`Document.select()`](document.html#Document.select "Document.select")，而是直接使用函数执行删除。由于已经发现，[`Document.select()`](document.html#Document.select
    "Document.select") 方法对于非常复杂的 PDF 和注释使用复杂的文档（目录表）生成了无效的大纲树。'
- en: '* * *'
  id: totrans-1059
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.15**'
  id: totrans-1060
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.15 版本变更**'
- en: '**Fixed** issues #301 (“Line cap and Line join”), #300 (“How to draw a shape
    without outlines”) and #298 (“utils.updateRect exception”). These bugs pertain
    to drawing shapes with PyMuPDF. Drawing shapes without any border is fully supported.
    Line cap styles and line line join style are now differentiated and support all
    possible PDF values (0, 1, 2) instead of just being a bool. The previous parameter
    *roundCap* is deprecated in favor of *lineCap* and *lineJoin* and will be deleted
    in the next release.'
  id: totrans-1061
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 #301（“线段端点和连接点”）、#300（“如何绘制没有轮廓的形状”）和 #298（“utils.updateRect 异常”）。这些
    bug 与 PyMuPDF 绘制形状相关。完全支持绘制没有任何边框的形状。线段端点样式和线段连接样式现在有所区别，并支持所有可能的 PDF 值（0、1、2），而不仅仅是布尔值。先前的参数
    *roundCap* 已被 *lineCap* 和 *lineJoin* 取代，将在下一个版本中删除。'
- en: '**Fixed** issue #290 (“Memory Leak with getText(‘rawDICT’)”). This bug caused
    memory not being (completely) freed after invoking the “dict”, “rawdict” and “json”
    versions of `Page.getText()`.'
  id: totrans-1062
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 #290（“使用 getText(‘rawDICT’) 时的内存泄漏”）。此 bug 导致在调用 `Page.getText()`
    的 “dict”、“rawdict” 和 “json” 版本后内存没有（完全）释放。'
- en: '* * *'
  id: totrans-1063
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.14**'
  id: totrans-1064
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.14 版本变更**'
- en: '**Added** new low-level function `ImageProperties()` to determine a number
    of characteristics for an image.'
  id: totrans-1065
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**新的低级函数 `ImageProperties()`，用于确定图像的许多特征。'
- en: '**Added** new low-level function [`Document.is_stream()`](functions.html#Document.is_stream
    "Document.is_stream"), which checks whether an object is of stream type.'
  id: totrans-1066
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**新的低级函数 [`Document.is_stream()`](functions.html#Document.is_stream "Document.is_stream")，用于检查对象是否为流类型。'
- en: '**Changed** low-level functions `Document._getXrefString()` and `Document._getTrailerString()`
    now by default return object definitions in a formatted form which makes parsing
    easy.'
  id: totrans-1067
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**低级函数 `Document._getXrefString()` 和 `Document._getTrailerString()` 现在默认以格式化形式返回对象定义，这使得解析变得容易。'
- en: '* * *'
  id: totrans-1068
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.13**'
  id: totrans-1069
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.13 版本变更**'
- en: '**Changed** methods working with binary input: while ever supporting bytes
    and bytearray objects, they now also accept *io.BytesIO* input, using their *getvalue()*
    method. This pertains to document creation, embedded files, FileAttachment annotations,
    pixmap creation and others. Fixes issue #274 (“Segfault when using BytesIO as
    a stream for insertImage”).'
  id: totrans-1070
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**处理二进制输入的方法：虽然一直支持字节和字节数组对象，但现在还接受 *io.BytesIO* 输入，并使用它们的 *getvalue()*
    方法。这适用于文档创建、嵌入文件、FileAttachment 注释、位图创建等。修复了问题 #274（“使用 BytesIO 作为 insertImage
    流时导致的 Segfault”）。'
- en: '**Fixed** issue #278 (“Is insertImage(keep_proportion=True) broken?”). Images
    are now correctly presented when keeping aspect ratio.'
  id: totrans-1071
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 #278（“插入图片（保持比例=True）是否有问题？”）。现在在保持长宽比的情况下正确显示图片。'
- en: '* * *'
  id: totrans-1072
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.12**'
  id: totrans-1073
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.12 版本变更**'
- en: '**Changed** the draw methods of [Page](page.html#page) and [Shape](shape.html#shape)
    to support not only RGB, but also GRAY and CMYK colorspaces. This solves issue
    #270 (“Is there a way to use CMYK color to draw shapes?”). This change also applies
    to text insertion methods of [Shape](shape.html#shape), resp. [Page](page.html#page).'
  id: totrans-1074
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**[Page](page.html#page) 和 [Shape](shape.html#shape) 的绘制方法，以支持 RGB、GRAY
    和 CMYK 颜色空间。这解决了问题 #270（“是否有一种方法可以使用 CMYK 颜色来绘制形状？”）。此更改还适用于[Shape](shape.html#shape)
    和 [Page](page.html#page) 的文本插入方法。'
- en: '**Fixed** issue #269 (“AttributeError in Document.insert_page()”), which occurred
    when using [`Document.insert_page()`](document.html#Document.insert_page "Document.insert_page")
    with text insertion.'
  id: totrans-1075
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**问题 #269（“Document.insert_page() 中的 AttributeError”），该问题发生在使用 [`Document.insert_page()`](document.html#Document.insert_page
    "Document.insert_page") 进行文本插入时。'
- en: '* * *'
  id: totrans-1076
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.11**'
  id: totrans-1077
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.11 版本变更**'
- en: '**Changed** [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    to always position the source rectangle centered in the target. This method now
    also supports **rotation by arbitrary angles**. The argument *reuse_xref* has
    been deprecated: prevention of duplicates is now **handled internally**.'
  id: totrans-1078
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更** [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    以始终将源矩形居中放置在目标中。此方法现在还支持**任意角度的旋转**。参数 *reuse_xref* 已被弃用：防止重复现在**内部处理**。'
- en: '**Changed** `Page.insertImage()` to support rotated display of the image and
    keeping the aspect ratio. Only rotations by multiples of 90 degrees are supported
    here.'
  id: totrans-1079
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更** `Page.insertImage()` 以支持图像的旋转显示并保持纵横比。此处仅支持 90 度的倍数旋转。'
- en: '**Fixed** issue #265 (“TypeError: insertText() got an unexpected keyword argument
    ‘idx’”). This issue only occurred when using [`Document.insert_page()`](document.html#Document.insert_page
    "Document.insert_page") with also inserting text.'
  id: totrans-1080
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了 #265 号问题（“TypeError: insertText()接收到意外的关键字参数‘idx’”）。此问题仅在使用 [`Document.insert_page()`](document.html#Document.insert_page
    "Document.insert_page") 时插入文本时发生。'
- en: '* * *'
  id: totrans-1081
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.10**'
  id: totrans-1082
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.10 版本变更**'
- en: '**Changed** [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    to support rotation of the source rectangle. Fixes #261 (“Cannot rotate insterted
    pages”).'
  id: totrans-1083
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变更** [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    以支持源矩形的旋转。修复了 #261 号问题（“无法旋转插入的页面”）。'
- en: '**Fixed** a bug in `Page.insertImage()` which prevented insertion of multiple
    images provided as streams.'
  id: totrans-1084
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了 `Page.insertImage()` 中的一个错误，该错误阻止了以流的形式插入多个图像。'
- en: '* * *'
  id: totrans-1085
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.9**'
  id: totrans-1086
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.9 版本变更**'
- en: '**Added** new low-level method `Document._getTrailerString()`, which returns
    the trailer object of a PDF. This is much like `Document._getXrefString()` except
    that the PDF trailer has no / needs no [`xref`](glossary.html#xref "xref") to
    identify it.'
  id: totrans-1087
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了新的低级方法 `Document._getTrailerString()`，它返回 PDF 的尾部对象。这与 `Document._getXrefString()`
    类似，但 PDF 尾部没有 / 不需要 [`xref`](glossary.html#xref "xref") 来标识它。'
- en: '**Added** new parameters for text insertion methods. You can now set stroke
    and fill colors of glyphs (text characters) independently, as well as the thickness
    of the glyph border. A new parameter *render_mode* controls the use of these colors,
    and whether the text should be visible at all.'
  id: totrans-1088
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了用于文本插入方法的新参数。现在可以独立设置字形（文本字符）的描边和填充颜色，以及字形边框的厚度。新参数 *render_mode* 控制这些颜色的使用以及文本是否应该可见。'
- en: '**Fixed** issue #258 (“Copying image streams to new PDF without size increase”):
    For JPX images embedded in a PDF, `Document.extractImage()` will now return them
    in their original format. Previously, the MuPDF base library was used, which returns
    them in PNG format (entailing a massive size increase).'
  id: totrans-1089
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了 #258 号问题（“将图像流复制到新的 PDF 时不增加大小”）：对于嵌入 PDF 中的 JPX 图像，`Document.extractImage()`
    现在将以原始格式返回它们。先前使用的是 MuPDF 基本库，它以 PNG 格式返回它们（导致了巨大的大小增加）。'
- en: '**Fixed** issue #259 (“Morphing text to fit inside rect”). Clarified use of
    [`get_text_length()`](functions.html#get_text_length "get_text_length") and removed
    extra line breaks for long words.'
  id: totrans-1090
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了 #259 号问题（“将文字变形以适应矩形内部”）。澄清了 [`get_text_length()`](functions.html#get_text_length
    "get_text_length") 的用法，并删除了长单词的额外换行。'
- en: '* * *'
  id: totrans-1091
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.8**'
  id: totrans-1092
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.14.8 版本变更**'
- en: '**Added** [`Pixmap.set_rect()`](pixmap.html#Pixmap.set_rect "Pixmap.set_rect")
    to change the pixel values in a rectangle. This is also an alternative to setting
    the color of a complete pixmap ([`Pixmap.clear_with()`](pixmap.html#Pixmap.clear_with
    "Pixmap.clear_with")).'
  id: totrans-1093
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**了 [`Pixmap.set_rect()`](pixmap.html#Pixmap.set_rect "Pixmap.set_rect")
    以更改矩形中的像素值。这也是设置完整 Pixmap 颜色（[`Pixmap.clear_with()`](pixmap.html#Pixmap.clear_with
    "Pixmap.clear_with")）的替代方法。'
- en: '**Fixed** an image extraction issue with JBIG2 (monochrome) encoded PDF images.
    The issue occurred in `Page.getText()` (parameters “dict” and “rawdict”) and in
    `Document.extractImage()` methods.'
  id: totrans-1094
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了使用 JBIG2（单色）编码的 PDF 图像的图像提取问题。该问题出现在 `Page.getText()`（参数“dict”和“rawdict”）和
    `Document.extractImage()` 方法中。'
- en: '**Fixed** an issue with not correctly clearing a non-alpha [Pixmap](pixmap.html#pixmap)
    ([`Pixmap.clear_with()`](pixmap.html#Pixmap.clear_with "Pixmap.clear_with")).'
  id: totrans-1095
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了一个关于非 Alpha[Pixmap](pixmap.html#pixmap)（[`Pixmap.clear_with()`](pixmap.html#Pixmap.clear_with
    "Pixmap.clear_with")）的清除不正确的问题。'
- en: '**Fixed** an issue with not correctly inverting colors of a non-alpha [Pixmap](pixmap.html#pixmap)
    ([`Pixmap.invert_irect()`](pixmap.html#Pixmap.invert_irect "Pixmap.invert_irect")).'
  id: totrans-1096
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了一个关于非 Alpha[Pixmap](pixmap.html#pixmap)（[`Pixmap.invert_irect()`](pixmap.html#Pixmap.invert_irect
    "Pixmap.invert_irect")）的颜色未正确反转的问题。'
- en: '* * *'
  id: totrans-1097
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.7**'
  id: totrans-1098
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.14.7 中的变更**'
- en: '**Added** [`Pixmap.set_pixel()`](pixmap.html#Pixmap.set_pixel "Pixmap.set_pixel")
    to change one pixel value.'
  id: totrans-1099
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 [`Pixmap.set_pixel()`](pixmap.html#Pixmap.set_pixel "Pixmap.set_pixel")
    方法，用于改变一个像素值。'
- en: '**Added** documentation for image conversion in the [FAQ](faq.html#faq).'
  id: totrans-1100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了关于在 [FAQ](faq.html#faq) 中进行图像转换的文档。'
- en: '**Added** new function [`get_text_length()`](functions.html#get_text_length
    "get_text_length") to determine the string length for a given font.'
  id: totrans-1101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 [`get_text_length()`](functions.html#get_text_length "get_text_length")
    函数，用于确定给定字体的字符串长度。'
- en: '**Added** Postscript image output (changed [`Pixmap.save()`](pixmap.html#Pixmap.save
    "Pixmap.save") and [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes "Pixmap.tobytes")).'
  id: totrans-1102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 Postscript 图像输出（更改了 [`Pixmap.save()`](pixmap.html#Pixmap.save "Pixmap.save")
    和 [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes "Pixmap.tobytes")）。'
- en: '**Changed** [`Pixmap.save()`](pixmap.html#Pixmap.save "Pixmap.save") and [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes
    "Pixmap.tobytes") to ensure valid combinations of colorspace, alpha and output
    format.'
  id: totrans-1103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** [`Pixmap.save()`](pixmap.html#Pixmap.save "Pixmap.save") 和 [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes
    "Pixmap.tobytes") 以确保颜色空间、alpha 和输出格式的有效组合。'
- en: '**Changed** [`Pixmap.save()`](pixmap.html#Pixmap.save "Pixmap.save"): the desired
    format is now inferred from the filename.'
  id: totrans-1104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** [`Pixmap.save()`](pixmap.html#Pixmap.save "Pixmap.save") 方法：现在所需的格式可以从文件名推断出来。'
- en: '**Changed** FreeText annotations can now have a transparent background - see
    [`Annot.update()`](annot.html#Annot.update "Annot.update").'
  id: totrans-1105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** FreeText 注释现在可以具有透明背景 - 请参见 [`Annot.update()`](annot.html#Annot.update
    "Annot.update")。'
- en: '* * *'
  id: totrans-1106
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.5**'
  id: totrans-1107
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.14.5 中的变更**'
- en: '**Changed:** [Shape](shape.html#shape) methods now strictly use the transformation
    matrix of the [Page](page.html#page) – instead of “manually” calculating locations.'
  id: totrans-1108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了：** [Shape](shape.html#shape) 方法现在严格使用 [Page](page.html#page) 的变换矩阵 –
    而不是手动计算位置。'
- en: '**Added** method [`Pixmap.pixel()`](pixmap.html#Pixmap.pixel "Pixmap.pixel")
    which returns the pixel value (a list) for given pixel coordinates.'
  id: totrans-1109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 [`Pixmap.pixel()`](pixmap.html#Pixmap.pixel "Pixmap.pixel") 方法，用于返回给定像素坐标的像素值（一个列表）。'
- en: '**Added** method [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes "Pixmap.tobytes")
    which returns a bytes object representing the pixmap in a variety of formats.
    Previously, this could be done for PNG outputs only ([`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes
    "Pixmap.tobytes")).'
  id: totrans-1110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes "Pixmap.tobytes") 方法，用于返回表示各种格式的
    pixmap 的字节对象。先前，这仅适用于 PNG 输出（[`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes "Pixmap.tobytes")）。'
- en: '**Changed:** output of methods [`Pixmap.save()`](pixmap.html#Pixmap.save "Pixmap.save")
    and (the new) [`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes "Pixmap.tobytes")
    may now also be PSD (Adobe Photoshop Document).'
  id: totrans-1111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了：** [`Pixmap.save()`](pixmap.html#Pixmap.save "Pixmap.save") 方法及（新的）[`Pixmap.tobytes()`](pixmap.html#Pixmap.tobytes
    "Pixmap.tobytes") 方法的输出现在也可能是 PSD（Adobe Photoshop Document）格式。'
- en: '**Added** method `Shape.drawQuad()` which draws a [Quad](quad.html#quad). This
    actually is a shorthand for a `Shape.drawPolyline()` with the edges of the quad.'
  id: totrans-1112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了 `Shape.drawQuad()` 方法，用于绘制 [Quad](quad.html#quad)。实际上，这是使用四边形的边缘进行
    `Shape.drawPolyline()` 的简写。'
- en: '**Changed** method `Shape.drawOval()`: the argument can now be **either** a
    rectangle ([`rect_like`](glossary.html#rect_like "rect_like")) **or** a quadrilateral
    ([`quad_like`](glossary.html#quad_like "quad_like")).'
  id: totrans-1113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Shape.drawOval()` 方法：现在参数可以是一个矩形（[`rect_like`](glossary.html#rect_like
    "rect_like")）**或者**一个四边形（[`quad_like`](glossary.html#quad_like "quad_like")）。'
- en: '* * *'
  id: totrans-1114
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.4**'
  id: totrans-1115
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.14.4 中的变更**'
- en: '**Fixes** issue #239 “Annotation coordinate consistency”.'
  id: totrans-1116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**了问题 #239 “注释坐标一致性”。'
- en: '* * *'
  id: totrans-1117
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.3**'
  id: totrans-1118
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.14.3 中的变更**'
- en: This patch version contains minor bug fixes and CJK font output support.
  id: totrans-1119
  prefs: []
  type: TYPE_NORMAL
  zh: 此补丁版本包含了次要错误修复和 CJK 字体输出支持。
- en: '**Added** support for the four CJK fonts as PyMuPDF generated text output.
    This pertains to methods `Page.insertFont()`, `Shape.insertText()`, `Shape.insertTextbox()`,
    and corresponding [Page](page.html#page) methods. The new fonts are available
    under “reserved” fontnames “china-t” (traditional Chinese), “china-s” (simplified
    Chinese), “japan” (Japanese), and “korea” (Korean).'
  id: totrans-1120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了对四种CJK字体的支持，作为PyMuPDF生成的文本输出。这涉及到 `Page.insertFont()`、`Shape.insertText()`、`Shape.insertTextbox()`
    方法及其对应的 [Page](page.html#page) 方法。新字体可在“保留”字体名称下使用，包括 “china-t”（繁体中文）、“china-s”（简体中文）、“japan”（日文）和
    “korea”（韩文）。'
- en: '**Added** full support for the built-in fonts ‘Symbol’ and ‘Zapfdingbats’.'
  id: totrans-1121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**了对内置字体 ''Symbol'' 和 ''Zapfdingbats'' 的完整支持。'
- en: '**Changed:** The 14 standard fonts can now each be referenced by a 4-letter
    abbreviation.'
  id: totrans-1122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了：** 现在可以通过四字母缩写引用每个14种标准字体。'
- en: '* * *'
  id: totrans-1123
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.1**'
  id: totrans-1124
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.14.1 的变更**'
- en: This patch version contains minor performance improvements.
  id: totrans-1125
  prefs: []
  type: TYPE_NORMAL
  zh: 此补丁版本包含轻微的性能改进。
- en: '**Added** support for [Document](document.html#document) filenames given as
    *pathlib* object by using the Python *str()* function.'
  id: totrans-1126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 对[文档](document.html#document)文件名的支持，作为*pathlib*对象，使用Python的*str()*函数。'
- en: '* * *'
  id: totrans-1127
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.14.0**'
  id: totrans-1128
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.14.0 的变更**'
- en: 'To support MuPDF v1.14.0, massive changes were required in PyMuPDF – most of
    them purely technical, with little visibility to developers. But there are also
    quite a lot of interesting new and improved features. Following are the details:'
  id: totrans-1129
  prefs: []
  type: TYPE_NORMAL
  zh: 为了支持MuPDF v1.14.0，PyMuPDF需要进行了大量的更改 - 其中大部分是技术性的，对开发人员的可见性不大。但也有相当多的有趣的新功能和改进功能。以下是详细信息：
- en: '**Added** “ink” annotation.'
  id: totrans-1130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** “墨迹”注释。'
- en: '**Added** “rubber stamp” annotation.'
  id: totrans-1131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** “橡皮图章”注释。'
- en: '**Added** “squiggly” text marker annotation.'
  id: totrans-1132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** “波浪线”文本标记注释。'
- en: '**Added** new class [Quad](quad.html#quad) (quadrilateral or tetragon) – which
    represents a general four-sided shape in the plane. The special subtype of rectangular,
    non-empty tetragons is used in text marker annotations and as returned objects
    in text search methods.'
  id: totrans-1133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 新的类[四边形](quad.html#quad)（平面中的四边形或四边形）- 代表平面中的一般四边形形状。在文本标记注释中使用的矩形特殊子类型和文本搜索方法返回的对象。'
- en: '**Added** a new option “decrypt” to [`Document.save()`](document.html#Document.save
    "Document.save") and `Document.write()`. Now you can **keep encryption** when
    saving a password protected PDF.'
  id: totrans-1134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 新选项“解密”到[`Document.save()`](document.html#Document.save "Document.save")和`Document.write()`。现在，保存受密码保护的PDF时可以**保持加密**。'
- en: '**Added** suppression and redirection of unsolicited messages issued by the
    underlying C-library MuPDF. Consult [Redirecting Error and Warning Messages](app3.html#redirectmessages)
    for details.'
  id: totrans-1135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加** 对底层C库MuPDF发出的未经请求的消息的抑制和重定向。有关详细信息，请参阅[重定向错误和警告消息](app3.html#redirectmessages)。'
- en: '**Changed:** Changes to annotations now **always require** [`Annot.update()`](annot.html#Annot.update
    "Annot.update") to become effective.'
  id: totrans-1136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改：** 现在对注释的更改**始终需要** [`Annot.update()`](annot.html#Annot.update "Annot.update")
    才能生效。'
- en: '**Changed** free text annotations to support the full Latin character set and
    range of appearance options.'
  id: totrans-1137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** 自由文本注释以支持完整的拉丁字符集和外观选项范围。'
- en: '**Changed** text searching, `Page.searchFor()`, to optionally return [Quad](quad.html#quad)
    instead [Rect](rect.html#rect) objects surrounding each search hit.'
  id: totrans-1138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** 文本搜索，`Page.searchFor()`，可选择返回[四边形](quad.html#quad)而不是[矩形](rect.html#rect)对象，围绕每个搜索命中。'
- en: '**Changed** plain text output: we now add a *n* to each line if it does not
    itself end with this character.'
  id: totrans-1139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** 纯文本输出：现在如果每行不以此字符结尾，则在每行末尾添加 *n*。'
- en: '**Fixed** issue 211 (“Something wrong in the doc”).'
  id: totrans-1140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 211（“文档中有错误”）。'
- en: '**Fixed** issue 213 (“Rewritten outline is displayed only by mupdf-based applications”).'
  id: totrans-1141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 213（“重写的大纲仅由基于MuPDF的应用程序显示”）。'
- en: '**Fixed** issue 214 (“PDF decryption GONE!”).'
  id: totrans-1142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 214（“PDF解密GONE！”）。'
- en: '**Fixed** issue 215 (“Formatting of links added with pyMuPDF”).'
  id: totrans-1143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 215（“使用pyMuPDF添加的链接格式”）。'
- en: '**Fixed** issue 217 (“extraction through json is failing for my pdf”).'
  id: totrans-1144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 217（“我的PDF提取通过JSON失败”）。'
- en: 'Behind the curtain, we have changed the implementation of geometry objects:
    they now purely exist in Python and no longer have “shadow” twins on the C-level
    (in MuPDF). This has improved processing speed in that area by more than a factor
    of two.'
  id: totrans-1145
  prefs: []
  type: TYPE_NORMAL
  zh: 在幕后，我们已经改变了几何对象的实现方式：它们现在完全存在于Python中，不再在C级别（MuPDF中）存在“影子”双胞胎。这在该领域的处理速度提高了两倍以上。
- en: Because of the same reason, most methods involving geometry parameters now also
    accept the corresponding Python sequence. For example, in method *“page.show_pdf_page(rect,
    …)”* parameter *rect* may now be any [`rect_like`](glossary.html#rect_like "rect_like")
    sequence.
  id: totrans-1146
  prefs: []
  type: TYPE_NORMAL
  zh: 由于同样的原因，现在大多数涉及几何参数的方法也接受相应的Python序列。例如，在方法*“page.show_pdf_page(rect, …)”*中，参数*rect*现在可以是任何[`rect_like`](glossary.html#rect_like
    "rect_like")序列。
- en: We also invested considerable effort to further extend and improve the [FAQ](faq.html#faq)
    chapter.
  id: totrans-1147
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还投入了大量精力来进一步扩展和改进[常见问题解答（FAQ）](faq.html#faq)章节。
- en: '* * *'
  id: totrans-1148
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.19**'
  id: totrans-1149
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.19 的变更**'
- en: This version contains some technical / performance improvements and bug fixes.
  id: totrans-1150
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本包含一些技术/性能改进和错误修复。
- en: '**Changed** memory management: for Python 3 builds, Python memory management
    is exclusively used across all C-level code (i.e. no more native *malloc()* in
    MuPDF code or PyMuPDF interface code). This leads to improved memory usage profiles
    and also some runtime improvements: we have seen > 2% shorter runtimes for text
    extractions and pixmap creations (on Windows machines only to date).'
  id: totrans-1151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**内存管理：对于 Python 3 构建，Python 内存管理专门用于所有 C 级别代码（即 MuPDF 代码或 PyMuPDF 接口代码中不再使用原生
    *malloc()*）。这导致改进的内存使用配置文件，并且还有一些运行时改进：我们已经看到文本提取和像素图创建的运行时间缩短了 > 2%（目前仅在 Windows
    机器上）。'
- en: '**Fixed** an error occurring in Python 2.7, which crashed the interpreter when
    using [`TextPage.extractRAWDICT()`](textpage.html#TextPage.extractRAWDICT "TextPage.extractRAWDICT")
    (= *Page.getText(“rawdict”)*).'
  id: totrans-1152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**Python 2.7 中出现的错误，在使用 [`TextPage.extractRAWDICT()`](textpage.html#TextPage.extractRAWDICT
    "TextPage.extractRAWDICT") (= *Page.getText(“rawdict”)*）时导致解释器崩溃。'
- en: '**Fixed** an error occurring in Python 2.7, when creating link destinations.'
  id: totrans-1153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**一个错误，在 Python 2.7 中创建链接目标时出现错误。'
- en: '**Extended** the [FAQ](faq.html#faq) chapter with more examples.'
  id: totrans-1154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扩展**[FAQ](faq.html#faq)章节，提供更多示例。'
- en: '* * *'
  id: totrans-1155
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.18**'
  id: totrans-1156
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.18 变更**'
- en: '**Added** method [`TextPage.extractRAWDICT()`](textpage.html#TextPage.extractRAWDICT
    "TextPage.extractRAWDICT"), and a corresponding new string parameter “rawdict”
    to method `Page.getText()`. It extracts text and images from a page in Python
    *dict* form like [`TextPage.extractDICT()`](textpage.html#TextPage.extractDICT
    "TextPage.extractDICT"), but with the detail level of [`TextPage.extractXML()`](textpage.html#TextPage.extractXML
    "TextPage.extractXML"), which is position information down to each single character.'
  id: totrans-1157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**方法[`TextPage.extractRAWDICT()`](textpage.html#TextPage.extractRAWDICT
    "TextPage.extractRAWDICT")，以及相应的新字符串参数“rawdict”到方法`Page.getText()`。它以 Python *dict*
    形式从页面提取文本和图像，类似于 [`TextPage.extractDICT()`](textpage.html#TextPage.extractDICT
    "TextPage.extractDICT")，但具有 [`TextPage.extractXML()`](textpage.html#TextPage.extractXML
    "TextPage.extractXML") 的详细级别，即位置信息下到每个单个字符。'
- en: '* * *'
  id: totrans-1158
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.17**'
  id: totrans-1159
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.17 变更**'
- en: '**Fixed** an error that intermittently caused an exception in [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page"), when pages from many different source PDFs were shown.'
  id: totrans-1160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复**一个错误，此错误间歇性地导致[`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")中的异常，当来自许多不同源
    PDF 的页面显示时。'
- en: '**Changed** method `Document.extractImage()` to now return more meta information
    about the extracted imgage. Also, its performance has been greatly improved. Several
    demo scripts have been changed to make use of this method.'
  id: totrans-1161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**方法`Document.extractImage()`现在返回有关提取图像的更多元信息。此外，其性能已大大提高。几个演示脚本已更改以使用此方法。'
- en: '**Changed** method `Document._getXrefStream()` to now return *None* if the
    object is no stream and no longer raise an exception if otherwise.'
  id: totrans-1162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改**方法`Document._getXrefStream()`现在如果对象不是流则返回 *None*，并且不再引发异常。'
- en: '**Added** method `Document._deleteObject()` which deletes a PDF object identified
    by its [`xref`](glossary.html#xref "xref"). Only to be used by the experienced
    PDF expert.'
  id: totrans-1163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**方法`Document._deleteObject()`，它删除由其 [`xref`](glossary.html#xref "xref")
    标识的 PDF 对象。只能由经验丰富的 PDF 专家使用。'
- en: '**Added** a method [`paper_rect()`](functions.html#paper_rect "paper_rect")
    which returns a [Rect](rect.html#rect) for a supplied paper format string. Example:
    *fitz.paper_rect(“letter”) = fitz.Rect(0.0, 0.0, 612.0, 792.0)*.'
  id: totrans-1164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**一个方法[`paper_rect()`](functions.html#paper_rect "paper_rect")，它返回所提供纸张格式字符串的[Rect](rect.html#rect)。示例：*fitz.paper_rect(“letter”)
    = fitz.Rect(0.0, 0.0, 612.0, 792.0)*。'
- en: '**Added** a [FAQ](faq.html#faq) chapter to this document.'
  id: totrans-1165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在此文档中添加**[FAQ](faq.html#faq)章节。'
- en: '* * *'
  id: totrans-1166
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.16**'
  id: totrans-1167
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.16 变更**'
- en: '**Added** support for correctly setting transparency (opacity) for certain
    annotation types.'
  id: totrans-1168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**对于某些注释类型正确设置透明度（不透明度）的支持。'
- en: '**Added** a tool property ([`Tools.fitz_config`](tools.html#Tools.fitz_config
    "Tools.fitz_config")) showing the configuration of this PyMuPDF version.'
  id: totrans-1169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加**一个工具属性（[`Tools.fitz_config`](tools.html#Tools.fitz_config "Tools.fitz_config"）显示此
    PyMuPDF 版本的配置。'
- en: '**Fixed** issue #193 (‘insertText(overlay=False) gives “cannot resize a buffer
    with shared storage” error’) by avoiding read-only buffers.'
  id: totrans-1170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通过避免只读缓冲区来解决**问题 #193（‘insertText(overlay=False) gives “cannot resize a buffer
    with shared storage” error’）。'
- en: '* * *'
  id: totrans-1171
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.15**'
  id: totrans-1172
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.15 变更**'
- en: '**Fixed** issue #189 (“cannot find builtin CJK font”), so we are supporting
    builtin CJK fonts now (CJK = China, Japan, Korea). This should lead to correctly
    generated pixmaps for documents using these languages. This change has consequences
    for our binary file size: it will now range between 8 and 10 MB, depending on
    the OS.'
  id: totrans-1173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复了** 问题 #189（“无法找到内置的CJK字体”），所以我们现在支持内置的CJK字体（CJK = 中国、日本、韩国）。这应该会导致对使用这些语言的文档生成正确的像素图。这个变化对我们的二进制文件大小有影响：它现在将在8到10MB之间，取决于操作系统。'
- en: '**Fixed** issue #191 (“Jupyter notebook kernel dies after ca. 40 pages”), which
    occurred when modifying the contents of an annotation.'
  id: totrans-1174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复了** 问题 #191（“Jupyter笔记本内核在大约40页后死机”），当修改注释的内容时会出现此问题。'
- en: '* * *'
  id: totrans-1175
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.14**'
  id: totrans-1176
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.14 中的变化**'
- en: This patch version contains several improvements, mainly for annotations.
  id: totrans-1177
  prefs: []
  type: TYPE_NORMAL
  zh: 这个补丁版本包含了几个改进，主要是用于注释。
- en: '**Changed** `Annot.lineEnds` is now a list of two integers representing the
    line end symbols. Previously was a *dict* of strings.'
  id: totrans-1178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Annot.lineEnds` 现在是表示行结束符号的两个整数的列表。之前是一个*字符串的字典*。'
- en: '**Added** support of line end symbols for applicable annotations. PyMuPDF now
    can generate these annotations including the line end symbols.'
  id: totrans-1179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增了** 对适用注释的行结束符号的支持。PyMuPDF现在可以生成包括行结束符号在内的这些注释。'
- en: '**Added** `Annot.setLineEnds()` adds line end symbols to applicable annotation
    types (‘Line’, ‘PolyLine’, ‘Polygon’).'
  id: totrans-1180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增了** `Annot.setLineEnds()` 用于向适用的注释类型（‘Line’、‘PolyLine’、‘Polygon’）添加行结束符号。'
- en: '**Changed** technical implementation of `Page.insertImage()` and [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page"): they now create there own contents objects, thereby avoiding
    changes of potentially large streams with consequential compression / decompression
    efforts and high change volumes with incremental updates.'
  id: totrans-1181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Page.insertImage()` 和 [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page") 的技术实现：它们现在会创建自己的内容对象，从而避免了对潜在大流的更改，避免了压缩/解压缩工作以及增量更新时的高更改量。'
- en: '* * *'
  id: totrans-1182
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.13**'
  id: totrans-1183
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.13 中的变化**'
- en: This patch version contains several improvements for embedded files and file
    attachment annotations.
  id: totrans-1184
  prefs: []
  type: TYPE_NORMAL
  zh: 这个补丁版本包含了几个嵌入文件和文件附件注释的改进。
- en: '**Added** `Document.embfile_Upd()` which allows changing **file content and
    metadata** of an embedded file. It supersedes the old method `Document.embfile_SetInfo()`
    (which will be deleted in a future version). Content is automatically compressed
    and metadata may be unicode.'
  id: totrans-1185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增了** `Document.embfile_Upd()` 允许更改嵌入文件的**文件内容和元数据**。它取代了旧方法 `Document.embfile_SetInfo()`（将在将来的版本中删除）。内容会自动压缩，元数据可以是Unicode。'
- en: '**Changed** `Document.embfile_Add()` to now automatically compress file content.
    Accompanying metadata can now be unicode (had to be ASCII in the past).'
  id: totrans-1186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Document.embfile_Add()` 现在会自动压缩文件内容。相关元数据现在可以是Unicode（过去必须是ASCII）。'
- en: '**Changed** `Document.embfile_Del()` to now automatically delete **all entries**
    having the supplied identifying name. The return code is now an integer count
    of the removed entries (was *None* previously).'
  id: totrans-1187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Document.embfile_Del()` 现在会自动删除**所有**具有提供的标识名称的条目。返回码现在是被删除条目的整数计数（之前是*None*）。'
- en: '**Changed** embedded file methods to now also accept or show the PDF unicode
    filename as additional parameter *ufilename*.'
  id: totrans-1188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** 嵌入文件方法，现在也接受或显示PDF的Unicode文件名作为额外参数*ufilename*。'
- en: '**Added** [`Page.add_file_annot()`](page.html#Page.add_file_annot "Page.add_file_annot")
    which adds a new file attachment annotation.'
  id: totrans-1189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增了** [`Page.add_file_annot()`](page.html#Page.add_file_annot "Page.add_file_annot")
    用于添加新的文件附件注释。'
- en: '**Changed** `Annot.fileUpd()` (file attachment annot) to now also accept the
    PDF unicode *ufilename* parameter. The description parameter *desc* correctly
    works with unicode. Furthermore, **all** parameters are optional, so metadata
    may be changed without also replacing the file content.'
  id: totrans-1190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Annot.fileUpd()`（文件附件注释）现在还接受PDF的Unicode *ufilename* 参数。描述参数*desc*可以正确使用Unicode。此外，**所有**参数都是可选的，因此可以更改元数据而不必替换文件内容。'
- en: '**Changed** `Annot.fileInfo()` (file attachment annot) to now also show the
    PDF unicode filename as parameter *ufilename*.'
  id: totrans-1191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改了** `Annot.fileInfo()`（文件附件注释）现在还会显示PDF的Unicode文件名作为参数*ufilename*。'
- en: '**Fixed** issue #180 (“page.getText(output=’dict’) return invalid bbox”) to
    now also work for vertical text.'
  id: totrans-1192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复了** 问题 #180（“page.getText(output=’dict’) 返回无效的bbox”），现在也适用于垂直文本。'
- en: '**Fixed** issue #185 (“Can’t render the annotations created by PyMuPDF”). The
    issue’s cause was the minimalistic MuPDF approach when creating annotations. Several
    annotation types have no */AP* (“appearance”) object when created by MuPDF functions.
    MuPDF, SumatraPDF and hence also PyMuPDF cannot render annotations without such
    an object. This fix now ensures, that an appearance object is always created together
    with the annotation itself. We still do not support line end styles.'
  id: totrans-1193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 #185（“无法呈现 PyMuPDF 创建的注释”）。该问题的原因是 MuPDF 在创建注释时采用了极简主义方法。MuPDF 函数创建的几种注释类型没有
    */AP*（“外观”）对象。此修复现在确保，每次创建注释时都会同时创建外观对象。我们仍不支持线条端点样式。'
- en: '* * *'
  id: totrans-1194
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.12**'
  id: totrans-1195
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.13.12 版本变更**'
- en: '**Fixed** issue #180 (“page.getText(output=’dict’) return invalid bbox”). Note
    that this is a circumvention of an MuPDF error, which generates zero-height character
    rectangles in some cases. When this happens, this fix ensures a bbox height of
    at least fontsize.'
  id: totrans-1196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 #180（“page.getText(output=’dict’) 返回无效的 bbox”）。请注意，这是对 MuPDF 错误的一种规避，某些情况下会生成零高度字符矩形。当发生这种情况时，此修复确保
    bbox 高度至少为字体大小。'
- en: '**Changed** for ListBox and ComboBox widgets, the attribute list of selectable
    values has been renamed to [`Widget.choice_values`](widget.html#Widget.choice_values
    "Widget.choice_values").'
  id: totrans-1197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于列表框和组合框小部件，可选择值的属性列表已重命名为 [`Widget.choice_values`](widget.html#Widget.choice_values
    "Widget.choice_values")。
- en: '**Changed** when adding widgets, any missing of the [PDF Base 14 Fonts](app3.html#base-14-fonts)
    is automatically added to the PDF. Widget text fonts can now also be chosen from
    existing widget fonts. Any specified field values are now honored and lead to
    a field with a preset value.'
  id: totrans-1198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** 在添加小部件时，自动将任何缺失的 [PDF Base 14 Fonts](app3.html#base-14-fonts) 添加到 PDF
    中。现在还可以从现有的小部件字体中选择小部件文本字体。任何指定的字段值现在都会被尊重，并导致具有预设值的字段。'
- en: '**Added** `Annot.updateWidget()` which allows changing existing form fields
    – including the field value.'
  id: totrans-1199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `Annot.updateWidget()` 允许更改现有表单字段，包括字段值。'
- en: '* * *'
  id: totrans-1200
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.11**'
  id: totrans-1201
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.13.11 版本变更**'
- en: 'While the preceeding patch subversions only contained various fixes, this version
    again introduces major new features:'
  id: totrans-1202
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管前几个补丁子版本只包含各种修复，但此版本再次引入了重要的新功能：
- en: '**Added** basic support for PDF widget annotations. You can now add PDF form
    fields of types Text, CheckBox, ListBox and ComboBox. Where necessary, the PDF
    is tranformed to a Form PDF with the first added widget.'
  id: totrans-1203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** PDF 小部件注释的基本支持。现在可以添加类型为文本、复选框、列表框和组合框的 PDF 表单字段。在需要时，PDF 被转换为带有第一个添加的小部件的表单
    PDF。'
- en: '**Fixed** issues #176 (“wrong file embedding”), #177 (“segment fault when invoking
    page.getText()”)and #179 (“Segmentation fault using page.getLinks() on encrypted
    PDF”).'
  id: totrans-1204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修复** 问题 #176（“嵌入错误文件”）、#177（“调用 page.getText() 时段错误”）和 #179（“在加密 PDF 上使用
    page.getLinks() 时分段错误”）。'
- en: '* * *'
  id: totrans-1205
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.7**'
  id: totrans-1206
  prefs: []
  type: TYPE_NORMAL
  zh: '**1.13.7 版本变更**'
- en: '**Added** support of variable page sizes for reflowable documents (e-books,
    HTML, etc.): new parameters *rect* and *fontsize* in [Document](document.html#document)
    creation (open), and as a separate method [`Document.layout()`](document.html#Document.layout
    "Document.layout").'
  id: totrans-1207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** 对可重排文档（电子书、HTML 等）的可变页面大小支持：在 [Document](document.html#document) 创建（打开）时新增参数
    *rect* 和 *fontsize*，以及作为单独方法 [`Document.layout()`](document.html#Document.layout
    "Document.layout")。'
- en: '**Added** [Annot](annot.html#annot) creation of many annotations types: sticky
    notes, free text, circle, rectangle, line, polygon, polyline and text markers.'
  id: totrans-1208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** [Annot](annot.html#annot) 创建多种注释类型：便签、自由文本、圆形、矩形、线条、多边形、折线和文本标记。'
- en: '**Added** support of annotation transparency ([`Annot.opacity`](annot.html#Annot.opacity
    "Annot.opacity"), `Annot.setOpacity()`).'
  id: totrans-1209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增**支持注释透明度（[`Annot.opacity`](annot.html#Annot.opacity "Annot.opacity")，`Annot.setOpacity()`）。'
- en: '**Changed** [`Annot.vertices`](annot.html#Annot.vertices "Annot.vertices"):
    point coordinates are now grouped as pairs of floats (no longer as separate floats).'
  id: totrans-1210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** [`Annot.vertices`](annot.html#Annot.vertices "Annot.vertices")：点坐标现在被分组为浮点数对（不再作为单独的浮点数）。'
- en: '**Changed** annotation colors dictionary: the two keys are now named *“stroke”*
    (formerly *“common”*) and *“fill”*.'
  id: totrans-1211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更改** 注释颜色字典：两个键现在命名为 *“stroke”*（以前为 *“common”*）和 *“fill”*。'
- en: '**Added** `Document.isDirty` which is *True* if a PDF has been changed in this
    session. Reset to *False* on each [`Document.save()`](document.html#Document.save
    "Document.save") or `Document.write()`.'
  id: totrans-1212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新增** `Document.isDirty` 如果PDF在本次会话中已更改，则为 *True*。每次 [`Document.save()`](document.html#Document.save
    "Document.save") 或 `Document.write()` 后重置为 *False*。'
- en: '* * *'
  id: totrans-1213
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.6**'
  id: totrans-1214
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.6 变更**'
- en: 'Fix #173: for memory-resident documents, ensure the stream object will not
    be garbage-collected by Python before document is closed.'
  id: totrans-1215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '修复 #173：对于内存驻留文档，确保在文档关闭之前 Python 不会垃圾回收流对象。'
- en: '* * *'
  id: totrans-1216
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.5**'
  id: totrans-1217
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.5 变更**'
- en: New low-level method `Page._setContents()` defines an object given by its [`xref`](glossary.html#xref
    "xref") to serve as the [`contents`](glossary.html#contents "contents") object.
  id: totrans-1218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的低级方法 `Page._setContents()` 定义了一个由其 [`xref`](glossary.html#xref "xref") 指定的对象，作为
    [`contents`](glossary.html#contents "contents") 对象。
- en: 'Changed and extended PDF form field support: the attribute *widget_text* has
    been renamed to `Annot.widget_value`. Values of all form field types (except signatures)
    are now supported. A new attribute `Annot.widget_choices` contains the selectable
    values of listboxes and comboboxes. All these attributes now contain *None* if
    no value is present.'
  id: totrans-1219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改变并扩展了 PDF 表单字段支持：属性 *widget_text* 已重命名为 `Annot.widget_value`。现在支持所有表单字段类型的值（除了签名）。新属性
    `Annot.widget_choices` 包含列表框和组合框的可选值。如果没有值存在，所有这些属性现在都包含 *None*。
- en: '* * *'
  id: totrans-1220
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.4**'
  id: totrans-1221
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.4 变更**'
- en: '`Document.convertToPDF()` now supports page ranges, reverted page sequences
    and page rotation. If the document already is a PDF, an exception is raised.'
  id: totrans-1222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Document.convertToPDF()` 现在支持页面范围、恢复的页面顺序和页面旋转。如果文档已经是 PDF，则会引发异常。'
- en: Fixed a bug (introduced with v1.13.0) that prevented `Page.insertImage()` for
    transparent images.
  id: totrans-1223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个 bug（从 v1.13.0 引入），阻止了对透明图像进行 `Page.insertImage()`。
- en: '* * *'
  id: totrans-1224
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.3**'
  id: totrans-1225
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.3 变更**'
- en: Introduces a way to convert **any MuPDF supported document** to a PDF. If you
    ever wanted PDF versions of your XPS, EPUB, CBZ or FB2 files – here is a way to
    do this.
  id: totrans-1226
  prefs: []
  type: TYPE_NORMAL
  zh: 引入了一种将 **任何 MuPDF 支持的文档** 转换为 PDF 的方法。如果您希望将 XPS、EPUB、CBZ 或 FB2 文件转换为 PDF 版本，这里有一个方法。
- en: '`Document.convertToPDF()` returns a Python *bytes* object in PDF format. Can
    be opened like normal in PyMuPDF, or be written to disk with the *“.pdf”* extension.'
  id: totrans-1227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Document.convertToPDF()` 返回一个 Python 的 *bytes* 对象，以 PDF 格式呈现。可以像普通文件一样在 PyMuPDF
    中打开，或者带有 *“.pdf”* 扩展名写入磁盘。'
- en: '* * *'
  id: totrans-1228
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.2**'
  id: totrans-1229
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.2 变更**'
- en: The major enhancement is PDF form field support. Form fields are annotations
    of type *(19, ‘Widget’)*. There is a new document method to check whether a PDF
    is a form. The [Annot](annot.html#annot) class has new properties describing field
    details.
  id: totrans-1230
  prefs: []
  type: TYPE_NORMAL
  zh: 主要增强是 PDF 表单字段支持。表单字段是类型为 *(19, ‘Widget’)* 的注释。有一个新的文档方法来检查 PDF 是否为表单。[Annot](annot.html#annot)
    类具有描述字段详细信息的新属性。
- en: '[`Document.is_form_pdf`](document.html#Document.is_form_pdf "Document.is_form_pdf")
    is true if object type */AcroForm* and at least one form field exists.'
  id: totrans-1231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Document.is_form_pdf`](document.html#Document.is_form_pdf "Document.is_form_pdf")
    如果对象类型为 */AcroForm* 并且至少存在一个表单字段，则为 true。'
- en: '`Annot.widget_type`, `Annot.widget_text` and `Annot.widget_name` contain the
    details of a form field (i.e. a “Widget” annotation).'
  id: totrans-1232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Annot.widget_type`、`Annot.widget_text` 和 `Annot.widget_name` 包含表单字段（即“Widget”注释）的详细信息。'
- en: '* * *'
  id: totrans-1233
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.1**'
  id: totrans-1234
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.1 变更**'
- en: '[`TextPage.extractDICT()`](textpage.html#TextPage.extractDICT "TextPage.extractDICT")
    is a new method to extract the contents of a document page (text and images).
    All document types are supported as with the other [TextPage](textpage.html#textpage)
    *extract*()* methods. The returned object is a dictionary of nested lists and
    other dictionaries, and **exactly equal** to the JSON-deserialization of the old
    [`TextPage.extractJSON()`](textpage.html#TextPage.extractJSON "TextPage.extractJSON").
    The difference is that the result is created directly – no JSON module is used.
    Because the user needs no JSON module to interpet the information, it should be
    easier to use, and also have a better performance, because it contains images
    in their original **binary format** – they need not be base64-decoded.'
  id: totrans-1235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`TextPage.extractDICT()`](textpage.html#TextPage.extractDICT "TextPage.extractDICT")
    是提取文档页（文本和图像）内容的新方法。与其他 [TextPage](textpage.html#textpage) *extract*()* 方法一样，支持所有文档类型。返回的对象是嵌套列表和其他字典的字典，与旧的
    [`TextPage.extractJSON()`](textpage.html#TextPage.extractJSON "TextPage.extractJSON")
    的 JSON 反序列化完全相同。不同之处在于结果是直接创建的 – 不使用 JSON 模块。因为用户无需 JSON 模块来解释信息，所以使用起来应该更容易，而且性能更好，因为它包含图像的原始
    **二进制格式** – 无需进行 base64 解码。'
- en: '`Page.getText()` correspondingly supports the new parameter value *“dict”*
    to invoke the above method.'
  id: totrans-1236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Page.getText()` 相应地支持新参数值 *“dict”* 以调用上述方法。'
- en: '[`TextPage.extractJSON()`](textpage.html#TextPage.extractJSON "TextPage.extractJSON")
    (resp. *Page.getText(“json”)*) is still supported for convenience, but its use
    is expected to decline.'
  id: totrans-1237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`TextPage.extractJSON()`](textpage.html#TextPage.extractJSON "TextPage.extractJSON")（或
    *Page.getText(“json”)*）仍然为方便起见支持，但预计其使用将减少。'
- en: '* * *'
  id: totrans-1238
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.13.0**'
  id: totrans-1239
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.13.0 的变更**'
- en: This version is based on MuPDF v1.13.0\. This release is “primarily a bug fix
    release”.
  id: totrans-1240
  prefs: []
  type: TYPE_NORMAL
  zh: 本版本基于 MuPDF v1.13.0\. 此版本是“主要的 bug 修复版本”。
- en: In PyMuPDF, we are also doing some bug fixes while introducing minor enhancements.
    There only very minimal changes to the user’s API.
  id: totrans-1241
  prefs: []
  type: TYPE_NORMAL
  zh: 在 PyMuPDF 中，我们还进行了一些 bug 修复，同时引入了一些小的增强功能。对用户 API 仅有非常小的更改。
- en: '[Document](document.html#document) construction is more flexible: the new *filetype*
    parameter allows setting the document type. If specified, any extension in the
    filename will be ignored. More completely addresses [issue #156](https://github.com/pymupdf/PyMuPDF/issues/156).
    As part of this, the documentation has been reworked.'
  id: totrans-1242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Document](document.html#document) 的构造更加灵活：新的 *filetype* 参数允许设置文档类型。如果指定了此参数，将忽略文件名中的任何扩展名。更全面地解决了
    [问题 #156](https://github.com/pymupdf/PyMuPDF/issues/156)。作为此过程的一部分，文档已经重新编写。'
- en: 'Changes to [Pixmap](pixmap.html#pixmap) constructors:'
  id: totrans-1243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Pixmap](pixmap.html#pixmap) 构造函数的变更：'
- en: 'Colorspace conversion no longer allows dropping the alpha channel: source and
    target **alpha will now always be the same**. We have seen exceptions and even
    interpreter crashes when using *alpha = 0*.'
  id: totrans-1244
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 色彩空间转换不再允许丢弃 alpha 通道：源和目标的 **alpha 现在将始终相同**。当使用 *alpha = 0* 时，我们曾看到异常甚至解释器崩溃。
- en: As a replacement, the simple pixmap copy lets you choose the target alpha.
  id: totrans-1245
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为替代，简单的像素图复制允许您选择目标 alpha 值。
- en: '[`Document.save()`](document.html#Document.save "Document.save") again offers
    the full garbage collection range 0 thru 4\. Because of a bug in [`xref`](glossary.html#xref
    "xref") maintenance, we had to temporarily enforce *garbage > 1*. Finally resolves
    [issue #148](https://github.com/pymupdf/PyMuPDF/issues/148).'
  id: totrans-1246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Document.save()`](document.html#Document.save "Document.save") 再次提供完整的垃圾回收范围
    0 到 4\. 由于 [`xref`](glossary.html#xref "xref") 维护中的一个 bug，我们不得不临时强制 *garbage >
    1*。最终解决了 [问题 #148](https://github.com/pymupdf/PyMuPDF/issues/148)。'
- en: '[`Document.save()`](document.html#Document.save "Document.save") now offers
    to “prettify” PDF source via an additional argument.'
  id: totrans-1247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Document.save()`](document.html#Document.save "Document.save") 现在提供通过额外的参数“美化”
    PDF 源码的选项。'
- en: '`Page.insertImage()` has the additional *stream* -parameter, specifying a memory
    area holding an image.'
  id: totrans-1248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Page.insertImage()` 现在有了额外的 *stream* 参数，指定一个保存图像的内存区域。'
- en: 'Issue with garbled PNGs on Linux systems has been resolved ([“Problem writing
    PNG” #133)](https://github.com/pymupdf/PyMuPDF/issues/133).'
  id: totrans-1249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '解决了在 Linux 系统上 PNG 图像乱码的问题（[“Problem writing PNG” #133](https://github.com/pymupdf/PyMuPDF/issues/133)）。'
- en: '* * *'
  id: totrans-1250
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.12.4**'
  id: totrans-1251
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.12.4 的变更**'
- en: This is an extension of 1.12.3.
  id: totrans-1252
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 1.12.3 版本的扩展。
- en: 'Fix of [issue #147](https://github.com/pymupdf/PyMuPDF/issues/147): methods
    `Document.getPageFontlist()` and `Document.getPageImagelist()` now also show fonts
    and images contained in [`resources`](glossary.html#resources "resources") nested
    via “Form XObjects”.'
  id: totrans-1253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '修复了 [问题 #147](https://github.com/pymupdf/PyMuPDF/issues/147)：方法 `Document.getPageFontlist()`
    和 `Document.getPageImagelist()` 现在还显示通过“Form XObjects”嵌套的 [`resources`](glossary.html#resources
    "resources") 中包含的字体和图像。'
- en: 'Temporary fix of [issue #148](https://github.com/pymupdf/PyMuPDF/issues/148):
    Saving to new PDF files will now automatically use *garbage = 2* if a lower value
    is given. Final fix is to be expected with MuPDF’s next version. At that point
    we will remove this circumvention.'
  id: totrans-1254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '临时修复了 [问题 #148](https://github.com/pymupdf/PyMuPDF/issues/148)：保存到新的 PDF 文件现在将自动使用
    *garbage = 2*，如果给定值较低。最终修复预计将在 MuPDF 的下一个版本中完成。届时我们将移除这个变通方法。'
- en: Preventive fix of illegally using stencil / image mask pixmaps in some methods.
  id: totrans-1255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正了某些方法中非法使用模版 / 图像掩模位图的预防性修复。
- en: Method `Document.getPageFontlist()` now includes the encoding name for each
    font in the list.
  id: totrans-1256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 `Document.getPageFontlist()` 现在包含列表中每个字体的编码名称。
- en: Method `Document.getPageImagelist()` now includes the decode method name for
    each image in the list.
  id: totrans-1257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 `Document.getPageImagelist()` 现在包含列表中每个图像的解码方法名称。
- en: '* * *'
  id: totrans-1258
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.12.3**'
  id: totrans-1259
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.12.3 的变更**'
- en: This is an extension of 1.12.2.
  id: totrans-1260
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 1.12.2 版本的扩展。
- en: Many functions now return *None* instead of *0*, if the result has no other
    meaning than just indicating successful execution ([`Document.close()`](document.html#Document.close
    "Document.close"), [`Document.save()`](document.html#Document.save "Document.save"),
    [`Document.select()`](document.html#Document.select "Document.select"), [`Pixmap.save()`](pixmap.html#Pixmap.save
    "Pixmap.save") and many others).
  id: totrans-1261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 许多函数现在在结果没有其他含义时返回 *None*，而不是 *0*（例如 [`Document.close()`](document.html#Document.close
    "Document.close"), [`Document.save()`](document.html#Document.save "Document.save"),
    [`Document.select()`](document.html#Document.select "Document.select"), [`Pixmap.save()`](pixmap.html#Pixmap.save
    "Pixmap.save") 和许多其他函数）。
- en: '* * *'
  id: totrans-1262
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.12.2**'
  id: totrans-1263
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.12.2 变更**'
- en: This is an extension of 1.12.1.
  id: totrans-1264
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 1.12.1 版本的扩展。
- en: Method [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    now accepts the new *clip* argument. This specifies an area of the source page
    to which the display should be restricted.
  id: totrans-1265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    现在接受新的 *clip* 参数。这指定了应限制显示的源页面区域。
- en: New `Page.CropBox` and `Page.MediaBox` have been included for convenience.
  id: totrans-1266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为方便起见，新增了 `Page.CropBox` 和 `Page.MediaBox`。
- en: '* * *'
  id: totrans-1267
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.12.1**'
  id: totrans-1268
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.12.1 变更**'
- en: This is an extension of version 1.12.0.
  id: totrans-1269
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 1.12.0 版本的扩展。
- en: New method [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    displays another’s PDF page. This is a **vector** image and therefore remains
    precise across zooming. Both involved documents must be PDF.
  id: totrans-1270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新方法 [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")
    显示另一个 PDF 页面。这是一个**矢量**图像，因此在缩放时保持精确。两个涉及的文档必须是 PDF 格式。
- en: New method `Page.getSVGimage()` creates an SVG image from the page. In contrast
    to the raster image of a pixmap, this is a vector image format. The return is
    a unicode text string, which can be saved in a *.svg* file.
  id: totrans-1271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新方法 `Page.getSVGimage()` 创建页面的 SVG 图像。与位图的光栅图像相比，这是一种矢量图像格式。返回的是一个 Unicode 文本字符串，可以保存在
    *.svg* 文件中。
- en: Method `Page.getTextBlocks()` now accepts an additional bool parameter “images”.
    If set to true (default is false), image blocks (metadata only) are included in
    the produced list and thus allow detecting areas with rendered images.
  id: totrans-1272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 `Page.getTextBlocks()` 现在接受额外的布尔参数 “images”。如果设置为 true（默认为 false），则包括图像块（仅元数据）在内的列表，从而允许检测包含渲染图像的区域。
- en: Minor bug fixes.
  id: totrans-1273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行了一些次要的错误修复。
- en: “text” result of `Page.getText()` concatenates all lines within a block using
    a single space character. MuPDF’s original uses “\n” instead, producing a rather
    ragged output.
  id: totrans-1274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Page.getText()` 的 “text” 结果通过使用单个空格字符连接块内所有行。MuPDF 的原始版本使用 “\n”，导致输出比较不规则。'
- en: New properties of [Page](page.html#page) objects `Page.MediaBoxSize` and `Page.CropBoxPosition`
    provide more information about a page’s dimensions. For non-PDF files (and for
    most PDF files, too) these will be equal to `Page.rect.bottom_right`, resp. `Page.rect.top_left`.
    For example, class [Shape](shape.html#shape) makes use of them to correctly position
    its items.
  id: totrans-1275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面对象 [Page](page.html#page) 的新属性 `Page.MediaBoxSize` 和 `Page.CropBoxPosition`
    提供了关于页面尺寸的更多信息。对于非 PDF 文件（以及大多数 PDF 文件），它们将等同于 `Page.rect.bottom_right` 和 `Page.rect.top_left`。例如，类
    [Shape](shape.html#shape) 使用它们正确地定位其项目。
- en: '* * *'
  id: totrans-1276
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.12.0**'
  id: totrans-1277
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.12.0 变更**'
- en: This version is based on and requires MuPDF v1.12.0\. The new MuPDF version
    contains quite a number of changes – most of them around text extraction. Some
    of the changes impact the programmer’s API.
  id: totrans-1278
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本基于并需要 MuPDF v1.12.0。新的 MuPDF 版本包含了许多变更，主要围绕文本提取。其中一些变更影响了程序员的 API。
- en: '`Outline.saveText()` and `Outline.saveXML()` have been deleted without replacement.
    You probably haven’t used them much anyway. But if you are looking for a replacement:
    the output of [`Document.get_toc()`](document.html#Document.get_toc "Document.get_toc")
    can easily be used to produce something equivalent.'
  id: totrans-1279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Outline.saveText()` 和 `Outline.saveXML()` 被删除且没有替代。你可能并未经常使用它们。但如果你在寻找替代方案：[`Document.get_toc()`](document.html#Document.get_toc
    "Document.get_toc") 的输出可以轻松用于生成等效内容。'
- en: Class *TextSheet* does no longer exist.
  id: totrans-1280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类 *TextSheet* 不再存在。
- en: Text “spans” (one of the hierarchy levels of [TextPage](textpage.html#textpage))
    no longer contain positioning information (i.e. no “bbox” key). Instead, spans
    now provide the font information for its text. This impacts our JSON output variant.
  id: totrans-1281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本“spans”（[TextPage](textpage.html#textpage) 的层次之一）不再包含位置信息（即没有 “bbox” 键）。相反，spans
    现在为其文本提供字体信息。这影响了我们的 JSON 输出变体。
- en: 'HTML output has improved very much: it now creates valid documents which can
    be displayed by browsers to produce a similar view as the original document.'
  id: totrans-1282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: HTML 输出已经大大改进：现在它创建的是有效的文档，可以由浏览器显示，以产生与原始文档类似的视图。
- en: There is a new output format XHTML, which provides text and images in a browser-readable
    format. The difference to HTML output is, that no effort is made to reproduce
    the original layout.
  id: totrans-1283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在有一个新的输出格式 XHTML，它以浏览器可读的格式提供文本和图像。与 HTML 输出的区别在于，不会尽力复制原始布局。
- en: All output formats of `Page.getText()` now support creating complete, valid
    documents, by wrapping them with appropriate header and trailer information. If
    you are interested in using the HTML output, please make sure to read [Controlling
    Quality of HTML Output](app1.html#htmlquality).
  id: totrans-1284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Page.getText()` 的所有输出格式现在都支持创建完整的、有效的文档，通过添加适当的头部和尾部信息进行包装。如果您有兴趣使用 HTML 输出，请确保阅读
    [控制 HTML 输出的质量](app1.html#htmlquality)。'
- en: 'To support finding text positions, we have added special methods that don’t
    need detours like [`TextPage.extractJSON()`](textpage.html#TextPage.extractJSON
    "TextPage.extractJSON") or [`TextPage.extractXML()`](textpage.html#TextPage.extractXML
    "TextPage.extractXML"): use `Page.getTextBlocks()` or resp. `Page.getTextWords()`
    to create lists of text blocks or resp. words, which are accompanied by their
    rectangles. This should be much faster than the standard text extraction methods
    and also avoids using additional packages for interpreting their output.'
  id: totrans-1285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了支持查找文本位置，我们添加了一些特殊方法，无需像 [`TextPage.extractJSON()`](textpage.html#TextPage.extractJSON
    "TextPage.extractJSON") 或 [`TextPage.extractXML()`](textpage.html#TextPage.extractXML
    "TextPage.extractXML") 那样绕弯子：使用 `Page.getTextBlocks()` 或 `Page.getTextWords()`
    来创建文本块或单词列表，它们附带其矩形。这应该比标准文本提取方法快得多，也避免了使用额外的包来解释它们的输出。
- en: '* * *'
  id: totrans-1286
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.11.2**'
  id: totrans-1287
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.11.2 中的更改**'
- en: This is an extension of v1.11.1.
  id: totrans-1288
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 v1.11.1 的扩展版本。
- en: New `Page.insertFont()` creates a PDF */Font* object and returns its object
    number.
  id: totrans-1289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 `Page.insertFont()` 创建一个 PDF 的 */Font* 对象并返回其对象编号。
- en: New `Document.extractFont()` extracts the content of an embedded font given
    its object number.
  id: totrans-1290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 `Document.extractFont()` 提取给定对象编号的嵌入字体的内容。
- en: Methods **FontList(…)** items no longer contain the PDF generation number. This
    value never had any significance. Instead, the font file extension is included
    (e.g. “pfa” for a “PostScript Font for ASCII”), which is more valuable information.
  id: totrans-1291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 **FontList(…)** 中的项目不再包含 PDF 生成编号。这个值从未有过任何意义。相反，现在包括了字体文件扩展名（例如，“pfa”表示“PostScript
    Font for ASCII”），这是更有价值的信息。
- en: Fonts other than “simple fonts” (Type1) are now also supported.
  id: totrans-1292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 除了“简单字体”（Type1）之外，现在还支持其他字体。
- en: 'New options to change [Pixmap](pixmap.html#pixmap) size:'
  id: totrans-1293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改变 [Pixmap](pixmap.html#pixmap) 尺寸的新选项：
- en: Method [`Pixmap.shrink()`](pixmap.html#Pixmap.shrink "Pixmap.shrink") reduces
    the pixmap proportionally in place.
  id: totrans-1294
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 [`Pixmap.shrink()`](pixmap.html#Pixmap.shrink "Pixmap.shrink") 在原地按比例减小了像素图。
- en: ''
  id: totrans-1295
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1296
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: A new [Pixmap](pixmap.html#pixmap) copy constructor allows scaling via setting
    target width and height.
  id: totrans-1297
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过设置目标宽度和高度，新的 [Pixmap](pixmap.html#pixmap) 复制构造函数允许进行缩放。
- en: '* * *'
  id: totrans-1298
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.11.1**'
  id: totrans-1299
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.11.1 中的更改**'
- en: This is an extension of v1.11.0.
  id: totrans-1300
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 v1.11.0 的扩展版本。
- en: New class *Shape*. It facilitates and extends the creation of image shapes on
    PDF pages. It contains multiple methods for creating elementary shapes like lines,
    rectangles or circles, which can be combined into more complex ones and be given
    common properties like line width or colors. Combined shapes are handled as a
    unit and e.g. be “morphed” together. The class can accumulate multiple complex
    shapes and put them all in the page’s foreground or background – thus also reducing
    the number of updates to the page’s [`contents`](glossary.html#contents "contents")
    object.
  id: totrans-1301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新类 *Shape*。它简化并扩展了在 PDF 页面上创建图像形状的过程。它包含多个用于创建基本形状（如线条、矩形或圆形）的方法，这些形状可以组合成更复杂的形状，并且可以赋予它们共同的属性，如线宽或颜色。组合的形状被视为一个单元，例如可以一起“变形”。该类可以累积多个复杂形状，并将它们全部放在页面的前景或背景中
    - 因此还可以减少页面的 [`contents`](glossary.html#contents "contents") 对象的更新次数。
- en: All *Page* draw methods now use the new *Shape* class.
  id: totrans-1302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有 *Page* 绘制方法现在都使用新的 *Shape* 类。
- en: Text insertion methods *insertText()* and *insertTextBox()* now support morphing
    in addition to text rotation. They have become part of the *Shape* class and thus
    allow text to be freely combined with graphics.
  id: totrans-1303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本插入方法 *insertText()* 和 *insertTextBox()* 现在除了支持文本旋转外，还支持变形。它们已成为 *Shape* 类的一部分，因此允许文本与图形自由组合。
- en: A new *Pixmap* constructor allows creating pixmap copies with an added alpha
    channel. A new method also allows directly manipulating alpha values.
  id: totrans-1304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 *Pixmap* 构造函数允许创建带有附加 alpha 通道的 pixmap 副本。一个新方法还允许直接操作 alpha 值。
- en: Binary algebraic operations with geometry objects (matrices, rectangles and
    points) now generally also support lists or tuples as the second operand. You
    can add a tuple *(x, y)* of numbers to a [Point](point.html#point). In this context,
    such sequences are called “[`point_like`](glossary.html#point_like "point_like")”
    (resp. [`matrix_like`](glossary.html#matrix_like "matrix_like"), [`rect_like`](glossary.html#rect_like
    "rect_like")).
  id: totrans-1305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 二元几何对象（矩阵、矩形和点）的代数运算现在通常也支持列表或元组作为第二操作数。您可以将数字元组 *(x, y)* 添加到 [Point](point.html#point)
    中。在这种情况下，这些序列被称为“[`point_like`](glossary.html#point_like "point_like")”（或 [`matrix_like`](glossary.html#matrix_like
    "matrix_like")、[`rect_like`](glossary.html#rect_like "rect_like")）。
- en: Geometry objects now fully support in-place operators. For example, *p /= m*
    replaces point p with *p * 1/m* for a number, or *p * ~m* for a [`matrix_like`](glossary.html#matrix_like
    "matrix_like") object *m*. Similarly, if *r* is a rectangle, then *r |= (3, 4)*
    is the new rectangle that also includes *fitz.Point(3, 4)*, and *r &= (1, 2, 3,
    4)* is its intersection with *fitz.Rect(1, 2, 3, 4)*.
  id: totrans-1306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 几何对象现在完全支持就地运算符。例如，*p /= m* 将点 *p* 替换为数字 *1/m* 的 *p*，或者对于 [`matrix_like`](glossary.html#matrix_like
    "matrix_like") 对象 *m*，则为 *p * ~m*。同样，如果 *r* 是一个矩形，则 *r |= (3, 4)* 是包含 *fitz.Point(3,
    4)* 的新矩形，*r &= (1, 2, 3, 4)* 则是与 *fitz.Rect(1, 2, 3, 4)* 的交集。
- en: '* * *'
  id: totrans-1307
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.11.0**'
  id: totrans-1308
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.11.0 中的变更**'
- en: This version is based on and requires MuPDF v1.11.
  id: totrans-1309
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本基于并需要 MuPDF v1.11。
- en: 'Though MuPDF has declared it as being mostly a bug fix version, one major new
    feature is indeed contained: support of embedded files – also called portfolios
    or collections. We have extended PyMuPDF functionality to embrace this up to an
    extent just a little beyond the *mutool* utility as follows.'
  id: totrans-1310
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 MuPDF 已经声明这主要是一个修复 bug 的版本，但确实包含一个重要的新功能：支持嵌入文件，也称为组合或集合。我们已扩展了 PyMuPDF 的功能，以支持这一功能，超过了
    *mutool* 实用程序的范围。
- en: 'The *Document* class now support embedded files with several new methods and
    one new property:'
  id: totrans-1311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Document* 类现在支持嵌入文件，具有几个新方法和一个新属性：'
- en: '*embfile_Info()* returns metadata information about an entry in the list of
    embedded files. This is more than *mutool* currently provides: it shows all the
    information that was used to embed the file (not just the entry’s name).'
  id: totrans-1312
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*embfile_Info()* 返回嵌入文件列表中条目的元数据信息。这比 *mutool* 目前提供的更多，它显示了用于嵌入文件的所有信息（而不仅仅是条目的名称）。'
- en: ''
  id: totrans-1313
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1314
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*embfile_Get()* retrieves the (decompressed) content of an entry into a *bytes*
    buffer.'
  id: totrans-1315
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*embfile_Get()* 将条目的（解压缩的）内容检索到一个 *bytes* 缓冲区中。'
- en: ''
  id: totrans-1316
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1317
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*embfile_Add(…)* inserts new content into the PDF portfolio. We (in contrast
    to *mutool*) **restrict** this to entries with a **new name** (no duplicate names
    allowed).'
  id: totrans-1318
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*embfile_Add(…)* 将新内容插入到 PDF 组合中。我们（与 *mutool* 相反）限制此操作仅适用于具有新名称的条目（不允许重复名称）。'
- en: ''
  id: totrans-1319
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1320
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*embfile_Del(…)* deletes an entry from the portfolio (function not offered
    in MuPDF).'
  id: totrans-1321
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*embfile_Del(…)* 从组合中删除条目（MuPDF 中不提供此功能）。'
- en: ''
  id: totrans-1322
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1323
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*embfile_SetInfo()* – changes filename or description of an embedded file.'
  id: totrans-1324
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*embfile_SetInfo()* – 更改嵌入文件的文件名或描述。'
- en: ''
  id: totrans-1325
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1326
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*embfile_Count* – contains the number of embedded files.'
  id: totrans-1327
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*embfile_Count* – 包含嵌入文件的数量。'
- en: 'Several enhancements deal with streamlining geometry objects. These are not
    connected to the new MuPDF version and most of them are also reflected in PyMuPDF
    v1.10.0\. Among them are new properties to identify the corners of rectangles
    by name (e.g. *Rect.bottom_right*) and new methods to deal with set-theoretic
    questions like *Rect.contains(x)* or *IRect.intersects(x)*. Special effort focussed
    on supporting more “Pythonic” language constructs: *if x in rect …* is equivalent
    to *rect.contains(x)*.'
  id: totrans-1328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 几个增强功能用于简化几何对象的流程。这些与新的 MuPDF 版本无关，大多数也反映在 PyMuPDF v1.10.0 中。其中包括通过名称识别矩形的新属性（例如
    *Rect.bottom_right*）以及处理集合论问题的新方法，如 *Rect.contains(x)* 或 *IRect.intersects(x)*。特别关注支持更多“Pythonic”语言构造：*if
    x in rect …* 相当于 *rect.contains(x)*。
- en: The [Rect](rect.html#rect) chapter now has more background on empty amd infinite
    rectangles and how we handle them. The handling itself was also updated for more
    consistency in this area.
  id: totrans-1329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Rect](rect.html#rect) 章节现在更多地介绍了空和无限矩形的背景及其处理方式的更新。处理本身也更新为在这一领域更加一致。'
- en: 'We have started basic support for **generation** of PDF content:'
  id: totrans-1330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们已开始基本支持 PDF 内容的**生成**：
- en: '*Document.insert_page()* adds a new page into a PDF, optionally containing
    some text.'
  id: totrans-1331
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Document.insert_page()* 将一个新页面添加到 PDF 中，可选包含一些文本。'
- en: ''
  id: totrans-1332
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1333
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*Page.insertImage()* places a new image on a PDF page.'
  id: totrans-1334
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Page.insertImage()* 将新的图像放在 PDF 页面上。'
- en: ''
  id: totrans-1335
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1336
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*Page.insertText()* puts new text on an existing page'
  id: totrans-1337
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Page.insertText()* 将新的文本放在现有页面上。'
- en: For **FileAttachment** annotations, content and name of the attached file can
    extracted and changed.
  id: totrans-1338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于 **FileAttachment** 注释，可以提取和更改附加文件的内容和名称。
- en: '* * *'
  id: totrans-1339
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.10.0**'
  id: totrans-1340
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.10.0 中的更改** '
- en: '**MuPDF v1.10 Impact**'
  id: totrans-1341
  prefs: []
  type: TYPE_NORMAL
  zh: '**MuPDF v1.10 影响**'
- en: MuPDF version 1.10 has a significant impact on our bindings. Some of the changes
    also affect the API – in other words, **you** as a PyMuPDF user.
  id: totrans-1342
  prefs: []
  type: TYPE_NORMAL
  zh: MuPDF 版本 1.10 对我们的绑定产生了重大影响。一些更改也影响了 API - 换句话说，**你**作为 PyMuPDF 用户受到了影响。
- en: Link destination information has been reduced. Several properties of the *linkDest*
    class no longer contain valuable information. In fact, this class as a whole has
    been deleted from MuPDF’s library and we in PyMuPDF only maintain it to provide
    compatibilty to existing code.
  id: totrans-1343
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 链接目标信息已减少。 *linkDest* 类的几个属性不再包含有价值的信息。事实上，这个类作为一个整体已从 MuPDF 的库中删除，我们在 PyMuPDF
    中只是为了提供对现有代码的兼容性而维护它。
- en: 'In an effort to minimize memory requirements, several improvements have been
    built into MuPDF v1.10:'
  id: totrans-1344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了最小化内存要求，MuPDF v1.10 中内置了几项改进：
- en: A new *config.h* file can be used to de-select unwanted features in the C base
    code. Using this feature we have been able to reduce the size of our binary *_fitz.o*
    / *_fitz.pyd* by about 50% (from 9 MB to 4.5 MB). When UPX-ing this, the size
    goes even further down to a very handy 2.3 MB.
  id: totrans-1345
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个新的 *config.h* 文件可以用来取消 C 代码中不需要的功能。使用这个功能，我们已经成功将二进制文件 *_fitz.o* / *_fitz.pyd*
    的大小减少了约 50%（从 9 MB 减少到了 4.5 MB）。当使用 UPX 压缩时，大小甚至进一步减少到了非常方便的 2.3 MB。
- en: ''
  id: totrans-1346
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1347
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The alpha (transparency) channel for pixmaps is now optional. Letting alpha
    default to *False* significantly reduces pixmap sizes (by 20% – CMYK, 25% – RGB,
    50% – GRAY). Many *Pixmap* constructors therefore now accept an *alpha* boolean
    to control inclusion of this channel. Other pixmap constructors (e.g. those for
    file and image input) create pixmaps with no alpha alltogether. On the downside,
    save methods for pixmaps no longer accept a *savealpha* option: this channel will
    always be saved when present. To minimize code breaks, we have left this parameter
    in the call patterns – it will just be ignored.'
  id: totrans-1348
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: pixmap 的 alpha（透明度）通道现在是可选的。让 alpha 默认为 *False* 可显著减小 pixmap 的大小（20% - CMYK，25%
    - RGB，50% - GRAY）。因此，许多 *Pixmap* 构造函数现在接受一个 *alpha* 布尔值来控制是否包含此通道。其他 pixmap 构造函数（例如文件和图像输入的构造函数）完全不包含
    alpha 的 pixmap。但是，pixmap 的保存方法不再接受 *savealpha* 选项：当存在时，此通道将始终保存。为了最小化代码断点，我们在调用模式中保留了此参数
    - 它将被忽略。
- en: '*DisplayList* and *TextPage* class constructors now **require the mediabox**
    of the page they are referring to (i.e. the *page.bound()* rectangle). There is
    no way to construct this information from other sources, therefore a source code
    change cannot be avoided in these cases. We assume however, that not many users
    are actually employing these rather low level classes explixitely. So the impact
    of that change should be minor.'
  id: totrans-1349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*DisplayList* 和 *TextPage* 类的构造函数现在**需要页面的媒介框**（即*page.bound()*矩形）。没有办法从其他来源构造这些信息，因此在这些情况下无法避免源代码更改。但是我们假设，实际上没有多少用户会明确地使用这些底层类。因此，这种变化的影响应该是很小的。'
- en: '**Other Changes compared to Version 1.9.3**'
  id: totrans-1350
  prefs: []
  type: TYPE_NORMAL
  zh: '**与版本 1.9.3 相比的其他更改**'
- en: The new [Document](document.html#document) method *write()* writes an opened
    PDF to memory (as opposed to a file, like *save()* does).
  id: totrans-1351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '新的 [Document](document.html#document) 方法 *write()* 将已打开的 PDF 写入内存（与 *save()*
    不同，它将文件写入）。 '
- en: An annotation can now be scaled and moved around on its page. This is done by
    modifying its rectangle.
  id: totrans-1352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注释现在可以在页面上缩放和移动。这是通过修改其矩形来完成的。
- en: Annotations can now be deleted. [Page](page.html#page) contains the new method
    *deleteAnnot()*.
  id: totrans-1353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在可以删除注释。 [Page](page.html#page) 包含了新方法 *deleteAnnot()*。
- en: Various annotation attributes can now be modified, e.g. content, dates, title
    (= author), border, colors.
  id: totrans-1354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在可以修改各种注释属性，例如内容、日期、标题（= 作者）、边框、颜色。
- en: Method *Document.insert_pdf()* now also copies annotations of source pages.
  id: totrans-1355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 *Document.insert_pdf()* 现在还会复制源页面的注释。
- en: The *Pages* class has been deleted. As documents can now be accessed with page
    numbers as indices (like *doc[n] = doc.loadPage(n)*), and document object can
    be used as iterators, the benefit of this class was too low to maintain it. See
    the following comments.
  id: totrans-1356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类 *Pages* 已被删除。由于现在可以使用页面编号作为索引访问文档（比如 *doc[n] = doc.loadPage(n)*），并且文档对象可以用作迭代器，因此维护此类的好处太低。请参见以下评论。
- en: '*loadPage(n)* / *doc[n]* now accept arbitrary integers to specify a page number,
    as long as *n < pageCount*. So, e.g. *doc[-500]* is always valid and will load
    page *(-500) % pageCount*.'
  id: totrans-1357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*loadPage(n)* / *doc[n]* 现在接受任意整数来指定页面号，只要 *n < pageCount*。例如，*doc[-500]* 总是有效的，并将加载页面
    *(-500) % pageCount*。'
- en: 'A document can now also be used as an iterator like this: *for page in doc:
    …<do something with “page”> …*. This will yield all pages of *doc* as *page*.'
  id: totrans-1358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '现在可以像这样将文档用作迭代器：*for page in doc: …<使用“page”做某事> …*。这将生成 *doc* 的所有页面作为 *page*。'
- en: The [Pixmap](pixmap.html#pixmap) method *getSize()* has been replaced with property
    *size*. As before *Pixmap.size == len(Pixmap)* is true.
  id: totrans-1359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方法 *getSize()* 已被属性 *size* 取代。与之前一样，*Pixmap.size == len(Pixmap)* 成立。
- en: In response to transparency (alpha) being optional, several new parameters and
    properties have been added to [Pixmap](pixmap.html#pixmap) and [Colorspace](colorspace.html#colorspace)
    classes to support determining their characteristics.
  id: totrans-1360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对透明度（alpha）是可选的反应，已向 [Pixmap](pixmap.html#pixmap) 和 [Colorspace](colorspace.html#colorspace)
    类添加了多个新参数和属性，以支持确定它们的特性。
- en: The [Page](page.html#page) class now contains new properties *firstAnnot* and
    *firstLink* to provide starting points to the respective class chains, where *firstLink*
    is just a mnemonic synonym to method *loadLinks()* which continues to exist. Similarly,
    the new property *rect* is a synonym for method *bound()*, which also continues
    to exist.
  id: totrans-1361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[页面](page.html#page) 类现在包含新属性 *firstAnnot* 和 *firstLink*，用于提供到相应类链的起始点，其中 *firstLink*
    仅是方法 *loadLinks()* 的助记符同义词，该方法仍然存在。类似地，新属性 *rect* 是方法 *bound()* 的同义词，该方法也仍然存在。'
- en: '[Pixmap](pixmap.html#pixmap) methods *samplesRGB()* and *samplesAlpha()* have
    been deleted because pixmaps can now be created without transparency.'
  id: totrans-1362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Pixmap* 方法 *samplesRGB()* 和 *samplesAlpha()* 已删除，因为现在可以创建不带透明度的像素图。'
- en: '[Rect](rect.html#rect) now has a property *irect* which is a synonym of method
    *round()*. Likewise, [IRect](irect.html#irect) now has property *rect* to deliver
    a [Rect](rect.html#rect) which has the same coordinates as floats values.'
  id: totrans-1363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Rect](rect.html#rect) 现在具有属性 *irect*，它是方法 *round()* 的同义词。同样地，[IRect](irect.html#irect)
    现在具有属性 *rect*，以提供具有浮点坐标值的 [Rect](rect.html#rect)。'
- en: Document has the new method *searchPageFor()* to search for a text string. It
    works exactly like the corresponding *Page.searchFor()* with page number as additional
    parameter.
  id: totrans-1364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档具有新方法 *searchPageFor()* 用于搜索文本字符串。它的工作方式与相应的 *Page.searchFor()* 相同，额外的参数是页码。
- en: '* * *'
  id: totrans-1365
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.9.3**'
  id: totrans-1366
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本 1.9.3 中的变更**'
- en: 'This version is also based on MuPDF v1.9a. Changes compared to version 1.9.2:'
  id: totrans-1367
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本还基于 MuPDF v1.9a。与版本 1.9.2 相比的更改包括：
- en: As a major enhancement, annotations are now supported in a similar way as links.
    Annotations can be displayed (as pixmaps) and their properties can be accessed.
  id: totrans-1368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为一个重大的增强，注释现在以类似于链接的方式支持。可以显示注释（作为像素图），并且可以访问它们的属性。
- en: 'In addition to the document *select()* method, some simpler methods can now
    be used to manipulate a PDF:'
  id: totrans-1369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 除了文档的 *select()* 方法外，现在还可以使用一些更简单的方法来操作 PDF：
- en: '*copyPage()* copies a page within a document.'
  id: totrans-1370
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*copyPage()* 在文档内复制页面。'
- en: ''
  id: totrans-1371
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1372
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*movePage()* is similar, but deletes the original.'
  id: totrans-1373
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*movePage()* 类似，但会删除原始页面。'
- en: ''
  id: totrans-1374
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1375
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*delete_page()* deletes a page'
  id: totrans-1376
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*delete_page()* 删除页面。'
- en: ''
  id: totrans-1377
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-1378
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '*delete_pages()* deletes a page range'
  id: totrans-1379
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*delete_pages()* 删除页面范围。'
- en: '*rotation* or *setRotation()* access or change a PDF page’s rotation, respectively.'
  id: totrans-1380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*rotation* 或 *setRotation()* 分别访问或更改 PDF 页面的旋转。'
- en: Available but undocumented before, [IRect](irect.html#irect), [Rect](rect.html#rect),
    [Point](point.html#point) and [Matrix](matrix.html#matrix) support the *len()*
    method and their coordinate properties can be accessed via indices, e.g. *IRect.x1
    == IRect[2]*.
  id: totrans-1381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以前虽然未记录，但 [IRect](irect.html#irect)、[Rect](rect.html#rect)、[Point](point.html#point)
    和 [Matrix](matrix.html#matrix) 现在支持 *len()* 方法，可以通过索引访问它们的坐标属性，例如 *IRect.x1 ==
    IRect[2]*。
- en: 'For convenience, documents now support simple indexing: *doc.loadPage(n) ==
    doc[n]*. The index may however be in range *-pageCount < n < pageCount*, such
    that *doc[-1]* is the last page of the document.'
  id: totrans-1382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为方便起见，文档现在支持简单的索引：*doc.loadPage(n) == doc[n]*。索引可能在范围 *-pageCount < n < pageCount*
    内，因此 *doc[-1]* 是文档的最后一页。
- en: '* * *'
  id: totrans-1383
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.9.2**'
  id: totrans-1384
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.9.2的变更**'
- en: 'This version is also based on MuPDF v1.9a. Changes compared to version 1.9.1:'
  id: totrans-1385
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本还基于MuPDF v1.9a。与版本1.9.1相比的更改如下：
- en: '*fitz.open()* (no parameters) creates a new empty **PDF** document, i.e. if
    saved afterwards, it must be given a *.pdf* extension.'
  id: totrans-1386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*fitz.open()*（无参数）创建一个新的空**PDF**文档，即如果之后保存，必须加上*.pdf*扩展名。'
- en: '[Document](document.html#document) now accepts all of the following formats
    (*Document* and *open* are synonyms):'
  id: totrans-1387
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[文档](document.html#document)现在接受以下所有格式（*Document*和*open*是同义词）：'
- en: '*open()*,'
  id: totrans-1388
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*open()*，'
- en: '*open(filename)* (equivalent to *open(filename, None)*),'
  id: totrans-1389
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*open(filename)*（等效于*open(filename, None)*），'
- en: '*open(filetype, area)* (equivalent to *open(filetype, stream = area)*).'
  id: totrans-1390
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*open(filetype, area)*（等效于*open(filetype, stream = area)*）。'
- en: Type of memory area *stream* may be *bytes* or *bytearray*. Thus, e.g. *area
    = open(“file.pdf”, “rb”).read()* may be used directly (without first converting
    it to bytearray).
  id: totrans-1391
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 内存区域*stream*的类型可以是*bytes*或*bytearray*。因此，例如，可以直接使用*area = open(“file.pdf”, “rb”).read()*（而不必先转换为bytearray）。
- en: New method *Document.insert_pdf()* (PDFs only) inserts a range of pages from
    another PDF.
  id: totrans-1392
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新方法*Document.insert_pdf()*（仅限PDF）从另一个PDF插入页面范围。
- en: '*Document* objects doc now support the *len()* function: `len(doc) == doc.pageCount`.'
  id: totrans-1393
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Document*对象现在支持*len()*函数：`len(doc) == doc.pageCount`。'
- en: New method *Document.getPageImageList()* creates a list of images used on a
    page.
  id: totrans-1394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新方法*Document.getPageImageList()*创建页面上使用的图像列表。
- en: New method *Document.getPageFontList()* creates a list of fonts referenced by
    a page.
  id: totrans-1395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新方法*Document.getPageFontList()*创建页面引用的字体列表。
- en: New pixmap constructor *fitz.Pixmap(doc, xref)* creates a pixmap based on an
    opened PDF document and an [`xref`](glossary.html#xref "xref") number of the image.
  id: totrans-1396
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的像素图构造函数*fitz.Pixmap(doc, xref)*基于已打开的PDF文档和图像的[`xref`](glossary.html#xref
    "xref")编号创建像素图。
- en: New pixmap constructor *fitz.Pixmap(cspace, spix)* creates a pixmap as a copy
    of another one *spix* with the colorspace converted to *cspace*. This works for
    all colorspace combinations.
  id: totrans-1397
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的像素图构造函数*fitz.Pixmap(cspace, spix)*创建一个像素图，作为另一个像素图*spix*的副本，并将颜色空间转换为*cspace*。这适用于所有颜色空间组合。
- en: Pixmap constructor *fitz.Pixmap(colorspace, width, height, samples)* now allows
    *samples* to also be *bytes*, not only *bytearray*.
  id: totrans-1398
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 像素图构造函数*fitz.Pixmap(colorspace, width, height, samples)*现在还允许*samples*为*bytes*，不仅仅是*bytearray*。
- en: '* * *'
  id: totrans-1399
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Changes in Version 1.9.1**'
  id: totrans-1400
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本1.9.1的变更**'
- en: This version of PyMuPDF is based on MuPDF library source code version 1.9a published
    on April 21, 2016.
  id: totrans-1401
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本的PyMuPDF基于MuPDF库源代码版本1.9a，发布于2016年4月21日。
- en: Please have a look at MuPDF’s website to see which changes and enhancements
    are contained herein.
  id: totrans-1402
  prefs: []
  type: TYPE_NORMAL
  zh: 请查看MuPDF的网站，了解包含的变更和增强功能。
- en: 'Changes in version 1.9.1 compared to version 1.8.0 are the following:'
  id: totrans-1403
  prefs: []
  type: TYPE_NORMAL
  zh: 与版本1.8.0相比，版本1.9.1的更改如下：
- en: New methods *get_area()* for both *fitz.Rect* and *fitz.IRect*
  id: totrans-1404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于*fitz.Rect*和*fitz.IRect*，现在都有新的方法*get_area()*。
- en: Pixmaps can now be created directly from files using the new constructor *fitz.Pixmap(filename)*.
  id: totrans-1405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在可以直接从文件创建像素图，使用新构造函数*fitz.Pixmap(filename)*。
- en: The Pixmap constructor *fitz.Pixmap(image)* has been extended accordingly.
  id: totrans-1406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 像素图构造函数*fitz.Pixmap(image)*相应地进行了扩展。
- en: '*fitz.Rect* can now be created with all possible combinations of points and
    coordinates.'
  id: totrans-1407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*fitz.Rect*现在可以使用所有可能的点和坐标组合创建。'
- en: PyMuPDF classes and methods now all contain __doc__ strings, most of them created
    by SWIG automatically. While the PyMuPDF documentation certainly is more detailed,
    this feature should help a lot when programming in Python-aware IDEs.
  id: totrans-1408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在所有PyMuPDF类和方法都包含__doc__字符串，大多数是由SWIG自动生成的。虽然PyMuPDF文档肯定更详细，但这个功能应该在使用Python-aware
    IDE进行编程时非常有帮助。
- en: A new document method of *getPermits()* returns the permissions associated with
    the current access to the document (print, edit, annotate, copy), as a Python
    dictionary.
  id: totrans-1409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个新的文档方法*getPermits()*返回与当前访问文档相关的权限（打印、编辑、注释、复制），作为Python字典。
- en: The identity matrix *fitz.Identity* is now **immutable**.
  id: totrans-1410
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在**不可变**的身份矩阵是*fitz.Identity*。
- en: The new document method *select(list)* removes all pages from a document that
    are not contained in the list. Pages can also be duplicated and re-arranged.
  id: totrans-1411
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新文档方法*select(list)*从文档中删除不包含在列表中的所有页面。页面也可以复制和重新排列。
- en: 'Various improvements and new members in our demo and examples collections.
    Perhaps most prominently: *PDF_display* now supports scrolling with the mouse
    wheel, and there is a new example program *wxTableExtract* which allows to graphically
    identify and extract table data in documents.'
  id: totrans-1412
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在我们的演示和示例集合中有各种改进和新成员。可能最显著的是：*PDF_display* 现在支持鼠标滚轮滚动，还有一个新的示例程序 *wxTableExtract*
    允许图形化识别和提取文档中的表数据。
- en: '*fitz.open()* is now an alias of *fitz.Document()*.'
  id: totrans-1413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*fitz.open()* 现在是 *fitz.Document()* 的别名。'
- en: New pixmap method *tobytes()* which will return a bytearray formatted as a PNG
    image of the pixmap.
  id: totrans-1414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的像素图方法 *tobytes()* 可以返回一个按 PNG 图像格式排列的 bytearray。
- en: New pixmap method *samplesRGB()* providing a *samples* version with alpha bytes
    stripped off (RGB colorspaces only).
  id: totrans-1415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的像素图方法 *samplesRGB()* 提供一个剥离了 alpha 字节的 *samples* 版本（仅限 RGB 颜色空间）。
- en: New pixmap method *samplesAlpha()* providing the alpha bytes only of the *samples*
    area.
  id: totrans-1416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的像素图方法 *samplesAlpha()* 仅提供 *samples* 区域的 alpha 字节。
- en: New iterator *fitz.Pages(doc)* over a document’s set of pages.
  id: totrans-1417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的迭代器 *fitz.Pages(doc)* 可以遍历文档的页面集合。
- en: New matrix methods *invert()* (calculate inverted matrix), *concat()* (calculate
    matrix product), *pretranslate()* (perform a shift operation).
  id: totrans-1418
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的矩阵方法 *invert()*（计算矩阵的逆）、*concat()*（计算矩阵乘积）、*pretranslate()*（执行移位操作）。
- en: New *IRect* methods *intersect()* (intersection with another rectangle), *translate()*
    (perform a shift operation).
  id: totrans-1419
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 *IRect* 方法 *intersect()*（与另一个矩形的交集）、*translate()*（执行移位操作）。
- en: New *Rect* methods *intersect()* (intersection with another rectangle), *transform()*
    (transformation with a matrix), *include_point()* (enlarge rectangle to also contain
    a point), *include_rect()* (enlarge rectangle to also contain another one).
  id: totrans-1420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 *Rect* 方法 *intersect()*（与另一个矩形的交集）、*transform()*（矩形的变换）、*include_point()*（扩展矩形以包含一个点）、*include_rect()*（扩展矩形以包含另一个矩形）。
- en: Documented *Point.transform()* (transform a point with a matrix).
  id: totrans-1421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录了 *Point.transform()*（使用矩阵转换点）。
- en: '*Matrix*, *IRect*, *Rect* and *Point* classes now support compact, algebraic
    formulations for manipulating such objects.'
  id: totrans-1422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Matrix*、*IRect*、*Rect* 和 *Point* 类现在支持紧凑的、代数形式的操作。'
- en: Incremental saves for changes are possible now using the call pattern *doc.save(doc.name,
    incremental=True)*.
  id: totrans-1423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在可以使用调用模式 *doc.save(doc.name, incremental=True)* 进行增量保存更改。
- en: A PDF’s metadata can now be deleted, set or changed by document method *set_metadata()*.
    Supports incremental saves.
  id: totrans-1424
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以通过文档方法 *set_metadata()* 删除、设置或更改 PDF 的元数据。支持增量保存。
- en: A PDF’s bookmarks (or table of contents) can now be deleted, set or changed
    with the entries of a list using document method *set_toc(list)*. Supports incremental
    saves.
  id: totrans-1425
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用文档方法 *set_toc(list)* 删除、设置或更改 PDF 的书签（或目录）。支持增量保存。
- en: Do you have any feedback on this page?
  id: totrans-1426
  prefs: []
  type: TYPE_NORMAL
  zh: 您对本页有何反馈？
- en: '* * *'
  id: totrans-1427
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: This software is provided AS-IS with no warranty, either express or implied.
    This software is distributed under license and may not be copied, modified or
    distributed except as expressly authorized under the terms of that license. Refer
    to licensing information at [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA
    94129, United States for further information.
  id: totrans-1428
  prefs: []
  type: TYPE_NORMAL
  zh: 本软件按原样提供，没有明示或暗示的任何保证。本软件根据许可证分发，除非在许可证条款明确授权，否则不得复制、修改或分发。请参考 [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    的许可信息或联系位于美国加利福尼亚州旧金山 Mesa Street 39 号 108A 套房的 Artifex Software Inc. 了解更多信息。
- en: This documentation covers all versions up to 1.24.4.
  id: totrans-1429
  prefs: []
  type: TYPE_NORMAL
  zh: 此文档覆盖所有版本，直到 1.24.4。
- en: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
  id: totrans-1430
  prefs: []
  type: TYPE_NORMAL
  zh: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
