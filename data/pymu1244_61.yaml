- en: 'Appendix 3: Assorted Technical Information'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录 3：各种技术信息
- en: 原文：[https://pymupdf.readthedocs.io/en/latest/app3.html](https://pymupdf.readthedocs.io/en/latest/app3.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://pymupdf.readthedocs.io/en/latest/app3.html](https://pymupdf.readthedocs.io/en/latest/app3.html)
- en: This section deals with various technical topics, that are not necessarily related
    to each other.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本节涉及各种技术主题，它们并非必然相关。
- en: '* * *'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '## Image Transformation Matrix'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '## 图像变换矩阵'
- en: 'Starting with version 1.18.11, the image transformation matrix is returned
    by some methods for text and image extraction: [`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") and [`Page.get_image_bbox()`](page.html#Page.get_image_bbox "Page.get_image_bbox").'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 从版本 1.18.11 开始，一些文本和图像提取方法返回图像变换矩阵：[`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") 和 [`Page.get_image_bbox()`](page.html#Page.get_image_bbox "Page.get_image_bbox")。
- en: The transformation matrix contains information about how an image was transformed
    to fit into the rectangle (its “boundary box” = “bbox”) on some document page.
    By inspecting the image’s bbox on the page and this matrix, one can determine
    for example, whether and how the image is displayed scaled or rotated on a page.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 变换矩阵包含关于图像如何转换以适应某文档页面上的矩形（其“边界框”=“bbox”）的信息。通过检查页面上图像的 bbox 和此矩阵，可以确定例如图像是否以缩放或旋转的方式显示在页面上。
- en: 'The relationship between image dimension and its bbox on a page is the following:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 图像尺寸与页面上其 bbox 之间的关系如下：
- en: Using the original image’s width and height,
  id: totrans-8
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用原始图像的宽度和高度，
- en: define the image rectangle `imgrect = pymupdf.Rect(0, 0, width, height)`
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义图像矩形 `imgrect = pymupdf.Rect(0, 0, width, height)`
- en: define the “shrink matrix” `shrink = pymupdf.Matrix(1/width, 0, 0, 1/height,
    0, 0)`.
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义“缩小矩阵” `shrink = pymupdf.Matrix(1/width, 0, 0, 1/height, 0, 0)`。
- en: 'Transforming the image rectangle with its shrink matrix, will result in the
    unit rectangle: `imgrect * shrink = pymupdf.Rect(0, 0, 1, 1)`.'
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用其缩小矩阵转换图像矩形将导致单位矩形：`imgrect * shrink = pymupdf.Rect(0, 0, 1, 1)`。
- en: 'Using the image **transformation matrix** “transform”, the following steps
    will compute the bbox:'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用图像**变换矩阵**“transform”，以下步骤将计算出 bbox：
- en: '[PRE0]'
  id: totrans-13
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Inspecting the matrix product `shrink * transform` will reveal all information
    about what happened to the image rectangle to make it fit into the bbox on the
    page: rotation, scaling of its sides and translation of its origin. Let us look
    at an example:'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查矩阵乘积 `shrink * transform` 将显示有关使图像矩形适应页面 bbox 所发生的一切信息：旋转、边缘缩放和原点平移。让我们看一个例子：
- en: '[PRE1]'
  id: totrans-15
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '* * *  ## PDF Base 14 Fonts'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *  ## PDF 基础 14 字体'
- en: 'The following 14 builtin font names **must be supported by every PDF viewer**
    application. They are available as a dictionary, which maps their full names amd
    their abbreviations in lower case to the full font basename. Wherever a **fontname**
    must be provided in PyMuPDF, any **key or value** from the dictionary may be used:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 所有 PDF 阅读器**必须支持**以下 14 种内置字体名称。它们作为一个字典提供，将它们的全名及其小写缩写映射到完整的字体基本名称。在 PyMuPDF
    中需要提供**字体名称**时，可以使用字典中的任何**键或值**：
- en: '[PRE2]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: In contrast to their obligation, not all PDF viewers support these fonts correctly
    and completely – this is especially true for Symbol and ZapfDingbats. Also, the
    glyph (visual) images will be specific to every reader.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 与其义务相反，并非所有 PDF 阅读器都正确和完全支持这些字体——这对于 Symbol 和 ZapfDingbats 尤为明显。此外，字形（视觉）图像将针对每个阅读器具体展现。
- en: To see how these fonts can be used – including the **CJK built-in** fonts –
    look at the table in [`Page.insert_font()`](page.html#Page.insert_font "Page.insert_font").
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看这些字体如何使用，包括**CJK 内置**字体，请参阅 [`Page.insert_font()`](page.html#Page.insert_font
    "Page.insert_font") 中的表格。
- en: '* * *  ## Adobe PDF References'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *  ## Adobe PDF 参考'
- en: This PDF Reference manual published by Adobe is frequently quoted throughout
    this documentation. It can be viewed and downloaded from [here](https://opensource.adobe.com/dc-acrobat-sdk-docs/standards/pdfstandards/pdf/PDF32000_2008.pdf).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Adobe 发布的这本 PDF 参考手册经常在本文档中引用。可以从[这里](https://opensource.adobe.com/dc-acrobat-sdk-docs/standards/pdfstandards/pdf/PDF32000_2008.pdf)查看和下载。
- en: Note
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: For a long time, an older version was also available under [this](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)
    link. It seems to be taken off of the web site in October 2021\. Earlier (pre
    1.19.*) versions of the PyMuPDF documentation used to refer to this document.
    We have undertaken an effort to replace referrals to the current specification
    above.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 长时间以来，一个较旧的版本也可以在 [这里](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)
    找到。似乎在 2021 年 10 月从网站上移除了该链接。早期（1.19.*之前）的 PyMuPDF 文档版本曾引用过这个文档。我们已经努力替换了上述当前规范的引用。
- en: '* * *  ## Using Python Sequences as Arguments in PyMuPDF'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *  ## 在 PyMuPDF 中使用 Python 序列作为参数'
- en: When PyMuPDF objects and methods require a Python **list** of numerical values,
    other Python **sequence types** are also allowed. Python classes are said to implement
    the **sequence protocol**, if they have a `__getitem__()` method.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 当 PyMuPDF 对象和方法需要 Python **列表** 数值时，其他 Python **序列类型** 也是允许的。如果 Python 类具有 `__getitem__()`
    方法，则称其实现了 **序列协议**。
- en: This basically means, you can interchangeably use Python *list* or *tuple* or
    even *array.array*, *numpy.array* and *bytearray* types in these cases.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '这基本上意味着，在这些情况下，你可以互换使用 Python *list* 或 *tuple*，甚至 *array.array*、*numpy.array*
    和 *bytearray* 类型。  '
- en: For example, specifying a sequence `"s"` in any of the following ways
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在以下任何一种方式中指定序列 `"s"`
- en: '`s = [1, 2]` – a list'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = [1, 2]` – 一个列表'
- en: '`s = (1, 2)` – a tuple'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = (1, 2)` – 一个元组'
- en: '`s = array.array("i", (1, 2))` – an array.array'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = array.array("i", (1, 2))` – 一个 array.array'
- en: '`s = numpy.array((1, 2))` – a numpy array'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = numpy.array((1, 2))` – 一个 numpy 数组'
- en: '`s = bytearray((1, 2))` – a bytearray'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = bytearray((1, 2))` – 一个 bytearray'
- en: 'will make it usable in the following example expressions:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这将使其在以下示例表达式中可用：
- en: '`pymupdf.Point(s)`'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pymupdf.Point(s)`'
- en: '`pymupdf.Point(x, y) + s`'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pymupdf.Point(x, y) + s`'
- en: '`doc.select(s)`'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`doc.select(s)`'
- en: Similarly with all geometry objects [Rect](rect.html#rect), [IRect](irect.html#irect),
    [Matrix](matrix.html#matrix) and [Point](point.html#point).
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 与所有几何对象 [Rect](rect.html#rect)、[IRect](irect.html#irect)、[Matrix](matrix.html#matrix)
    和 [Point](point.html#point) 类似。
- en: Because all PyMuPDF geometry classes themselves are special cases of sequences,
    they (with the exception of [Quad](quad.html#quad) – see below) can be freely
    used where numerical sequences can be used, e.g. as arguments for functions like
    *list()*, *tuple()*, *array.array()* or *numpy.array()*. Look at the following
    snippet to see this work.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 因为所有 PyMuPDF 几何类本身都是序列的特殊情况（[Quad](quad.html#quad) 除外——见下文），它们可以自由地在可以使用数字序列的地方使用，例如作为
    *list()*、*tuple()*、*array.array()* 或 *numpy.array()* 的参数传递给函数。查看以下代码片段，看看这样做的效果。
- en: '[PRE3]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Note
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: '[Quad](quad.html#quad) is a Python sequence object as well and has a length
    of 4\. Its items however are [`point_like`](glossary.html#point_like "point_like")
    – not numbers. Therefore, the above remarks do not apply.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '[Quad](quad.html#quad) 是一个 Python 序列对象，长度为 4。然而，它的项是[`point_like`](glossary.html#point_like)类型的——而不是数字。因此，上述说明不适用。'
- en: '* * *  ## Ensuring Consistency of Important Objects in PyMuPDF'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *  ## 确保 PyMuPDF 中重要对象的一致性'
- en: PyMuPDF is a Python binding for the C library MuPDF. While a lot of effort has
    been invested by MuPDF’s creators to approximate some sort of an object-oriented
    behavior, they certainly could not overcome basic shortcomings of the C language
    in that respect.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: PyMuPDF 是 C 库 MuPDF 的 Python 绑定。尽管 MuPDF 的创建者已经投入了大量精力来近似一种面向对象的行为，但他们显然无法克服
    C 语言在这方面的基本缺陷。
- en: 'Python on the other hand implements the OO-model in a very clean way. The interface
    code between PyMuPDF and MuPDF consists of two basic files: *pymupdf.py* and *fitz_wrap.c*.
    They are created by the excellent SWIG tool for each new version.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，Python 以非常清晰的方式实现了面向对象模型。PyMuPDF 与 MuPDF 之间的接口代码由两个基本文件组成：*pymupdf.py*
    和 *fitz_wrap.c*。它们由优秀的 SWIG 工具为每个新版本创建。
- en: When you use one of PyMuPDF’s objects or methods, this will result in execution
    of some code in *pymupdf.py*, which in turn will call some C code compiled with
    *fitz_wrap.c*.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用 PyMuPDF 的对象或方法之一时，将导致执行一些代码在 *pymupdf.py* 中，进而调用一些用 *fitz_wrap.c* 编译的 C
    代码。
- en: 'Because SWIG goes a long way to keep the Python and the C level in sync, everything
    works fine, if a certain set of rules is being strictly followed. For example:
    **never access** a [Page](page.html#page) object, after you have closed (or deleted
    or set to *None*) the owning [Document](document.html#document). Or, less obvious:
    **never access** a page or any of its children (links or annotations) after you
    have executed one of the document methods *select()*, *delete_page()*, *insert_page()*
    … and more.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 因为**SWIG**会尽力保持Python和C级别同步，如果严格遵循一定的规则，一切都会正常工作。例如：**永远不要访问**在关闭（或删除或设置为 *None*）拥有的[文档](document.html#document)之后的[页面](page.html#page)对象。或者，不那么明显的是：在执行文档方法
    *select()*、*delete_page()*、*insert_page()* … 等之后，永远不要访问页面或其任何子元素（链接或注释）。
- en: 'But just no longer accessing invalidated objects is actually not enough: They
    should rather be actively deleted entirely, to also free C-level resources (meaning
    allocated memory).'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 但仅仅不再访问失效的对象是不够的：它们应该被完全主动删除，以释放C级别资源（即分配的内存）。
- en: The reason for these rules lies in the fact that there is a hierarchical 2-level
    one-to-many relationship between a document and its pages and also between a page
    and its links / annotations. To maintain a consistent situation, any of the above
    actions must lead to a complete reset – in **Python and, synchronously, in C**.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这些规则的原因在于文档与其页面之间以及页面与其链接/注释之间存在层次化的二级一对多关系。为了保持一致的状态，任何上述操作都必须导致完全重置 - 在**Python**和同步在C中。
- en: SWIG cannot know about this and consequently does not do it.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**SWIG**无法知道这一点，因此也不执行它。'
- en: The required logic has therefore been built into PyMuPDF itself in the following
    way.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，所需的逻辑已经内置到PyMuPDF本身中，如下所示。
- en: If a page “loses” its owning document or is being deleted itself, all of its
    currently existing annotations and links will be made unusable in Python, and
    their C-level counterparts will be deleted and deallocated.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果页面“失去”其所属的文档或者正在被删除本身，那么其当前存在的所有注释和链接在Python中将变得不可用，并且它们的C级别对应物将被删除和释放。
- en: 'If a document is closed (or deleted or set to *None*) or if its structure has
    changed, then similarly all currently existing pages and their children will be
    made unusable, and corresponding C-level deletions will take place. “Structure
    changes” include methods like *select()*, *delePage()*, *insert_page()*, *insert_pdf()*
    and so on: all of these will result in a cascade of object deletions.'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果文档被关闭（或删除或设置为 *None*），或者其结构发生变化，那么所有当前存在的页面及其子页面将变得不可用，并且相应的C级别删除将发生。“结构变化”包括方法如
    *select()*、*delete_page()*、*insert_page()*、*insert_pdf()* 等：所有这些操作都将导致对象删除的级联效应。
- en: The programmer will normally not realize any of this. If he, however, tries
    to access invalidated objects, exceptions will be raised.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 程序员通常不会意识到这些情况。但是，如果试图访问失效的对象，则会引发异常。
- en: Invalidated objects cannot be directly deleted as with Python statements like
    *del page* or *page = None*, etc. Instead, their *__del__* method must be invoked.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 无效的对象不能像Python语句 *del page* 或 *page = None* 等直接删除。而是必须调用它们的 *__del__* 方法。
- en: 'All pages, links and annotations have the property *parent*, which points to
    the owning object. This is the property that can be checked on the application
    level: if *obj.parent == None* then the object’s parent is gone, and any reference
    to its properties or methods will raise an exception informing about this “orphaned”
    state.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 所有页面、链接和注释都有属性 *parent*，指向拥有的对象。这是可以在应用程序级别检查的属性：如果 *obj.parent == None*，则对象的父对象已经不存在，对其属性或方法的任何引用都将引发异常，指示其处于“孤立”状态。
- en: 'A sample session:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 一个示例会话：
- en: '[PRE4]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This shows the cascading effect:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 这展示了级联效应：
- en: '[PRE5]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Note
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Objects outside the above relationship are not included in this mechanism. If
    you e.g. created a table of contents by *toc = doc.get_toc()*, and later close
    or change the document, then this cannot and does not change variable *toc* in
    any way. It is your responsibility to refresh such variables as required.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 不包括在上述关系之外的对象。例如，如果通过 *toc = doc.get_toc()* 创建目录，然后关闭或更改文档，则变量 *toc* 不能也不会以任何方式改变。您有责任根据需要刷新这些变量。
- en: '* * *  ## Design of Method [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page")'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *  ## 方法设计 [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")'
- en: Purpose and Capabilities
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 目的和能力
- en: The method displays an image of a (“source”) page of another PDF document within
    a specified rectangle of the current (“containing”, “target”) page.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 该方法在当前页面的指定矩形内显示另一PDF文档的（“源”）页面的图像。
- en: '**In contrast** to [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image"),
    this display is vector-based and hence remains accurate across zooming levels.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    **相反**，此显示为基于矢量的，因此在缩放级别上保持准确。'
- en: '**Just like** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image"),
    the size of the display is adjusted to the given rectangle.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**就像** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    **一样**，显示的尺寸根据给定的矩形进行调整。'
- en: 'The following variations of the display are currently supported:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 目前支持以下显示变体：
- en: Bool parameter `"keep_proportion"` controls whether to maintain the aspect ratio
    (default) or not.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布尔参数`"保持比例"`控制是否保持宽高比（默认）。
- en: Rectangle parameter `"clip"` restricts the visible part of the source page rectangle.
    Default is the full page.
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 矩形参数`"剪辑"`限制了源页面矩形的可见部分。默认为整个页面。
- en: float `"rotation"` rotates the display by an arbitrary angle (degrees). If the
    angle is not an integer multiple of 90, only 2 of the 4 corners may be positioned
    on the target border if also `"keep_proportion"` is true.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 浮点数`"旋转"`以任意角度（度数）旋转显示。如果角度不是90的整数倍，则如果`"保持比例"`也为真，则可能只有4个角中的2个位置在目标边界上。
- en: Bool parameter `"overlay"` controls whether to put the image on top (foreground,
    default) of current page content or not (background).
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布尔参数`"覆盖"`控制是否将图像放置在当前页面内容的顶部（前景，默认）或不（背景）。
- en: 'Use cases include (but are not limited to) the following:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 使用案例包括（但不限于）以下内容：
- en: “Stamp” a series of pages of the current document with the same image, like
    a company logo or a watermark.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用相同的图像“邮戳”公司logo或水印一系列当前文档页面。
- en: Combine arbitrary input pages into one output page to support “booklet” or double-sided
    printing (known as “4-up”, “n-up”).
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 组合任意输入页面到一个输出页面以支持“小册子”或双面打印（称为“4-up”，“n-up”）。
- en: Split up (large) input pages into several arbitrary pieces. This is also called
    “posterization”, because you e.g. can split an A4 page horizontally and vertically,
    print the 4 pieces enlarged to separate A4 pages, and end up with an A2 version
    of your original page.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将（大型）输入页面分割成多个任意片段。这也称为“海报化”，因为例如可以水平和垂直分割A4页面，将4个片段放大到单独的A4页面，从而得到原始页面的A2版本。
- en: Technical Implementation
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 技术实现
- en: 'This is done using PDF **“Form XObjects”**, see section 8.10 on page 217 of
    [Adobe PDF References](#adobemanual). On execution of a [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page"), the following things happen:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 这是使用PDF **“表单XObject”** 完成的，参见[Adobe PDF References](#adobemanual)第8.10节第217页。在执行[`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page")时，将执行以下操作：
- en: The [`resources`](glossary.html#resources "resources") and [`contents`](glossary.html#contents
    "contents") objects of source page in source document are copied over to the target
    document, jointly creating a new **Form XObject** with the following properties.
    The PDF [`xref`](glossary.html#xref "xref") number of this object is returned
    by the method.
  id: totrans-79
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 源文档中源页面的[`资源`](glossary.html#resources "resources")和[`内容`](glossary.html#contents
    "contents")对象被复制到目标文档，共同创建一个新的**表单XObject**，具有以下属性。该对象的PDF [`xref`](glossary.html#xref
    "xref")编号由该方法返回。
- en: ''
  id: totrans-80
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-81
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-82
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/BBox` equals `/Mediabox` of the source page'
  id: totrans-83
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/BBox` 等于源页面的`/Mediabox`。'
- en: ''
  id: totrans-84
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-85
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Matrix` equals the identity matrix.'
  id: totrans-86
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Matrix` 等于单位矩阵。'
- en: ''
  id: totrans-87
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-88
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Resources` equals that of the source page. This involves a “deep-copy” of
    hierarchically nested other objects (including fonts, images, etc.). The complexity
    involved here is covered by MuPDF’s grafting [[1]](#f1) technique functions.'
  id: totrans-89
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/资源` 等同于源页面的内容。这包括对层级嵌套的其他对象（包括字体、图像等）进行“深复制”。此处涉及的复杂性由MuPDF的嫁接技术函数[[1]](#f1)覆盖。'
- en: ''
  id: totrans-90
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-91
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: This is a stream object type, and its stream is an exact copy of the combined
    data of the source page’s [`contents`](glossary.html#contents "contents") objects.
  id: totrans-92
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这是一种流对象类型，其流是源页面[`内容`](glossary.html#contents "contents")对象的组合数据的精确副本。
- en: ''
  id: totrans-93
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-94
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-95
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: This Form XObject is only executed once per shown source page. Subsequent displays
    of the same source page will skip this step and only create “pointer” Form XObjects
    (done in next step) to this object.
  id: totrans-96
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 此表单XObject仅在显示源页面时执行一次。后续显示相同的源页面将跳过此步骤，并且仅为该对象创建“指针”形式的表单XObject（在下一步中完成）。
- en: ''
  id: totrans-97
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-98
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: 'A second **Form XObject** is then created which the target page uses to invoke
    the display. This object has the following properties:'
  id: totrans-99
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后创建第二个**表单XObject**，目标页面使用它来调用显示。这个对象具有以下属性：
- en: ''
  id: totrans-100
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-101
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-102
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/BBox` equals the `/CropBox` of the source page (or `"clip"`).'
  id: totrans-103
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/BBox` 等于源页面的 `/CropBox`（或 `"clip"`）。'
- en: ''
  id: totrans-104
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-105
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Matrix` represents the mapping of `/BBox` to the target rectangle.'
  id: totrans-106
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Matrix` 表示 `/BBox` 到目标矩形的映射。'
- en: ''
  id: totrans-107
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-108
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/XObject` references the previous Form XObject via the fixed name `fullpage`.'
  id: totrans-109
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/XObject` 通过固定名称 `fullpage` 引用前面的 Form XObject。'
- en: ''
  id: totrans-110
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-111
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The stream of this object contains exactly one fixed statement: `/fullpage
    Do`.'
  id: totrans-112
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这个对象的流包含一个固定的语句：`/fullpage Do`。
- en: ''
  id: totrans-113
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-114
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: If the method’s `"oc"` argument is given, its value is assigned to this Form
    XObject as `/OC`.
  id: totrans-115
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果方法的 `"oc"` 参数被指定，其值将被赋予此 Form XObject 作为 `/OC`。
- en: ''
  id: totrans-116
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-117
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: The [`resources`](glossary.html#resources "resources") and [`contents`](glossary.html#contents
    "contents") objects of the target page are now modified as follows.
  id: totrans-118
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在修改目标页面的 [`resources`](glossary.html#resources "resources") 和 [`contents`](glossary.html#contents
    "contents") 对象如下。
- en: ''
  id: totrans-119
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-120
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-121
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: Add an entry to the `/XObject` dictionary of `/Resources` with the name [`fzFrm`](colorspace.html#Colorspace.n
    "Colorspace.n") (with n chosen such that this entry is unique on the page).
  id: totrans-122
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `/Resources` 的 `/XObject` 字典中增加一个条目，名称为 [`fzFrm`](colorspace.html#Colorspace.n
    "Colorspace.n")（选择 n 使得此条目在页面上是唯一的）。
- en: ''
  id: totrans-123
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-124
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: Depending on `"overlay"`, prepend or append a new object to the page’s `/Contents`
    array, containing the statement `q /fzFrm<n> Do Q`.
  id: totrans-125
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据 `"overlay"`，在页面的 `/Contents` 数组之前或之后添加一个新对象，包含语句 `q /fzFrm<n> Do Q`。
- en: 'This design approach ensures that:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 这种设计方法确保：
- en: The (potentially large) source page is only copied once to the target PDF. Only
    small “pointer” Form XObjects objects are created per each target page to show
    the source page.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （潜在的大型）源页面只复制一次到目标 PDF。每个目标页面只创建小的 “指针” Form XObjects 对象来显示源页面。
- en: 'Each referring target page can have its own `"oc"` parameter to control the
    source page’s visibility individually.  ## Redirecting Error and Warning Messages'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '每个引用的目标页面可以有自己的 `"oc"` 参数，用于单独控制源页面的可见性。  ## 重定向错误和警告消息'
- en: Since MuPDF version 1.16 error and warning messages can be redirected via an
    official plugin.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 自 MuPDF 版本 1.16 起，错误和警告消息可以通过官方插件重定向。
- en: 'PyMuPDF will put error messages to `sys.stderr` prefixed with the string “mupdf:”.
    Warnings are internally stored and can be accessed via *pymupdf.TOOLS.mupdf_warnings()*.
    There also is a function to empty this store.  ## Coordinates'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 'PyMuPDF 会将错误消息放置在 `sys.stderr` 中，并以字符串 “mupdf:” 作为前缀。警告则会被内部存储，并可以通过 *pymupdf.TOOLS.mupdf_warnings()*
    访问。还有一个函数可以清空这个存储。  ## 坐标'
- en: This is one of the most frequently used terms in this documentation. A **coordinate**
    generally means a pair of numbers `(x, y)` referring to some location, like a
    corner of a rectangle ([Rect](rect.html#rect)), a [Point](point.html#point) and
    so forth. The two values usually are floats, but there a objects like images which
    only allow them to be integers.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 这是文档中最常用的术语之一。**坐标**通常指一对数字 `(x, y)`，用于表示某个位置，比如矩形的角落（[Rect](rect.html#rect)），一个
    [Point](point.html#point) 等等。这两个值通常是浮点数，但有些对象，比如图像，只允许它们为整数。
- en: To actually *find* a coordinate’s location, we also need to know the *reference*
    point for `x` and `y` - in other words, we must know where location `(0, 0)` is
    positioned. Once `(0, 0)` (the “origin”) is known, we speak of a “coordinate system”.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 要实际 *找到* 坐标的位置，我们还需要知道 `x` 和 `y` 的 *参考* 点 - 换句话说，我们必须知道 `(0, 0)` 的位置在哪里。一旦知道了
    `(0, 0)`（“原点”），我们称之为 “坐标系统”。
- en: Several coordinate systems exist in document processing. For instance, the coordinate
    systems of a PDF page and the image created from it are **different**. We therefore
    need ways to *transform* coordinates from one system to another (and also back
    occasionally). This is the task of a [Matrix](matrix.html#matrix). It is a mathematical
    function which works much like a factor that can be “multiplied” with a point
    or rectangle to give us the corresponding point / rectangle in another coordinate
    system. The inverse of a transformation matrix can be used to revert the transformation.
    Much like multiplying by some factor, say 3, can be reverted by dividing the result
    by 3 (or multiplying it with 1/3).
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 文档处理中存在多个坐标系统。例如，PDF 页面和由其创建的图像的坐标系统是**不同**的。因此，我们需要方法来*转换*一个坐标系统到另一个（偶尔也需要反向转换）。这就是
    [Matrix](matrix.html#matrix) 的任务。它是一个数学函数，类似于可以“乘”以点或矩形的因子，从而给出另一个坐标系统中相应的点/矩形。变换矩阵的逆矩阵可用于恢复变换。就像乘以某个因子，比如3，可以通过将结果除以3（或乘以1/3）来恢复。
- en: Coordinates and Images
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 坐标和图像
- en: Images have a coordinate system with integer coordinates. Origin `(0, 0)` is
    the top-left point. `x` values must be in `range(width)`, and `y` values in `range(height)`.
    Therefore, `y` values *increase* if we go *downwards*. For every image, there
    is only a **finite number** of coordinates, namely `width * height`. A location
    in an image is also called a “pixel”.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图像具有整数坐标的坐标系。原点 `(0, 0)` 是左上角。`x` 值必须在 `range(width)` 范围内，`y` 值必须在 `range(height)`
    范围内。因此，如果我们向下移动，`y` 值会*增加*。每个图像只有有限数量的坐标，即 `width * height`。图像中的位置也称为“像素”。
- en: 'How **large** an image will be (in centimeters or inches) when e.g. printed,
    depends on additional information: the “resolution”. This is measured in **DPI**
    (dots per inch, or pixels per inch). To find the printed size of some image, we
    therefore must divide its width and its height by the corresponding DPI values
    (there may separate ones for width and for height) and will get the respective
    number of inches.'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图像的**打印尺寸**（以厘米或英寸为单位）取决于附加信息：分辨率。分辨率以 **DPI**（每英寸点数或每英寸像素数）来衡量。因此，要找出某个图像的打印尺寸，我们必须将其宽度和高度分别除以相应的
    DPI 值（宽度和高度可能有单独的 DPI 值），得到相应的英寸数。
- en: Origin Point, Point Size and Y-Axis
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 原点、点大小和Y轴
- en: In **PDF**, the origin `(0, 0)` of a page is located at its **bottom-left point**.
    In **MuPDF**, the origin `(0, 0)` of a page is located at its **top-left point**.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在 **PDF** 中，页面的原点 `(0, 0)` 位于其 **左下角**。而在 **MuPDF** 中，页面的原点 `(0, 0)` 位于其 **左上角**。
- en: '![_images/img-coordinate-space.png](../Images/fdb4dc6f90fefd7f22efb8a073df53a2.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![_images/img-coordinate-space.png](../Images/fdb4dc6f90fefd7f22efb8a073df53a2.png)'
- en: 'Coordinates are float numbers and measured in **points**, where:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 坐标是浮点数，并以 **points** 为单位，其中：
- en: '**one point equals 1/72 inches**.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一点等于 1/72 英寸**。'
- en: Typical document page sizes are **ISO A4** and **Letter**. A **Letter** page
    has a size of **8.5 x 11 inches**, corresponding to **612 x 792 points**. In the
    **PDF** coordinate system, the top-left point of a **Letter** page hence has the
    coordinate `(0, 792)` as **the y-axis points upwards**. Now we know our document
    size the **MuPDF** coordinate system for the bottom right would be coordinate
    `(612, 792)` (and for **PDF** this coordinate would then be `(612,0)`).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 典型的文档页面大小包括 **ISO A4** 和 **Letter**。**Letter** 页面的尺寸为 **8.5 x 11 英寸**，对应 **612
    x 792 点**。在 **PDF** 坐标系统中，**Letter** 页面的左上角因此具有坐标 `(0, 792)`，因为**y轴向上**。现在我们知道我们的文档大小，**MuPDF**
    坐标系统的右下角坐标将是 `(612, 792)`（对于 **PDF**，此坐标将是 `(612, 0)`）。
- en: Theoretically, there are **infinitely many** coordinate positions on a **PDF**
    page. In practice however, at most the first 5 decimal places are sufficient for
    a reasonable precision.
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理论上，**PDF** 页面上有**无限多**的坐标位置。然而，实际上，前5位小数足以保证合理的精度。
- en: In **MuPDF**, multiple document formats are supported - **PDF** just being one
    among **over a dozen others**. Images are also supported as documents in **MuPDF**
    (therefore having one page usually). This is one of the reasons why **MuPDF**
    uses a coordinate system with the origin `(0, 0)` being the **top-left** point
    of any document page. **The y-axis points downwards**, like with images. Coordinates
    in **MuPDF** in any case are floats, like in **PDF**.
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 **MuPDF** 中，支持多种文档格式 - **PDF** 只是其中之一。图像也作为 **MuPDF** 中的文档进行支持（通常一页）。这也是为什么
    **MuPDF** 使用坐标系，其原点 `(0, 0)` 是任何文档页面的 **左上角** 点。**y轴向下**，与图像类似。在 **MuPDF** 中，坐标始终是浮点数，如
    **PDF** 中一样。
- en: 'A rectangle `Rect(0, 0, 100, 100)` for instance in **MuPDF** (and thus **PyMuPDF**)
    therefore is a square with edges of length 100 points (= 1.39 inches or 3.53 centimeters).
    Its top-left corner is the origin. To switch between the two coordinate systems
    **PDF** to **MuPDF**, every [Page](page.html#page) object has a [`Page.transformation_matrix`](page.html#Page.transformation_matrix
    "Page.transformation_matrix"). Its inverse can be used to compute a rectangle’s
    PDF coordinates. In this way we can conveniently find that `Rect(0, 0, 100, 100)`
    in **MuPDF** is the same as `Rect(0, 692, 100, 792)` in **PDF**. See this code
    snippet:'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，在 **MuPDF**（因此 **PyMuPDF**）中，矩形 `Rect(0, 0, 100, 100)` 是一个边长为 100 点的正方形（约为
    1.39 英寸或 3.53 厘米）。其左上角是原点。为了在 **PDF** 和 **MuPDF** 之间切换坐标系，每个 [Page](page.html#page)
    对象都有一个 [`Page.transformation_matrix`](page.html#Page.transformation_matrix "Page.transformation_matrix")。其逆矩阵可用于计算矩形的
    PDF 坐标。通过这种方式，我们可以方便地确定在 **MuPDF** 中的 `Rect(0, 0, 100, 100)` 与 **PDF** 中的 `Rect(0,
    692, 100, 792)` 是相同的。参见以下代码片段：
- en: '[PRE6]'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Footnotes
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 脚注
- en: Do you have any feedback on this page?
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 您对此页面有任何反馈意见吗？
- en: '* * *'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: This software is provided AS-IS with no warranty, either express or implied.
    This software is distributed under license and may not be copied, modified or
    distributed except as expressly authorized under the terms of that license. Refer
    to licensing information at [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA
    94129, United States for further information.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 本软件按原样提供，不附带任何明示或暗示的保证。本软件在许可下分发，并且未经授权不得复制、修改或分发。有关更多信息，请参阅许可信息 [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    或联系 Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA 94129,
    United States。
- en: This documentation covers all versions up to 1.24.4.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 本文档涵盖了所有版本直至 1.24.4。
- en: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)
    ## Image Transformation Matrix'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)
    ## 图像变换矩阵'
- en: 'Starting with version 1.18.11, the image transformation matrix is returned
    by some methods for text and image extraction: [`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") and [`Page.get_image_bbox()`](page.html#Page.get_image_bbox "Page.get_image_bbox").'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 从版本 1.18.11 开始，某些文本和图像提取方法返回图像变换矩阵：[`Page.get_text()`](page.html#Page.get_text
    "Page.get_text") 和 [`Page.get_image_bbox()`](page.html#Page.get_image_bbox "Page.get_image_bbox")。
- en: The transformation matrix contains information about how an image was transformed
    to fit into the rectangle (its “boundary box” = “bbox”) on some document page.
    By inspecting the image’s bbox on the page and this matrix, one can determine
    for example, whether and how the image is displayed scaled or rotated on a page.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 变换矩阵包含关于如何将图像变换以适应文档页面上的矩形（其“边界框” = “bbox”）的信息。通过检查页面上图像的bbox和此矩阵，可以确定例如图像是否以缩放或旋转的方式显示在页面上。
- en: 'The relationship between image dimension and its bbox on a page is the following:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 图像尺寸与其页面上的bbox之间的关系如下：
- en: Using the original image’s width and height,
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用原始图像的宽度和高度，
- en: define the image rectangle `imgrect = pymupdf.Rect(0, 0, width, height)`
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义图像矩形 `imgrect = pymupdf.Rect(0, 0, width, height)`
- en: define the “shrink matrix” `shrink = pymupdf.Matrix(1/width, 0, 0, 1/height,
    0, 0)`.
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义“缩放矩阵” `shrink = pymupdf.Matrix(1/width, 0, 0, 1/height, 0, 0)`。
- en: 'Transforming the image rectangle with its shrink matrix, will result in the
    unit rectangle: `imgrect * shrink = pymupdf.Rect(0, 0, 1, 1)`.'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用其缩放矩阵转换图像矩形，将得到单位矩形： `imgrect * shrink = pymupdf.Rect(0, 0, 1, 1)`。
- en: 'Using the image **transformation matrix** “transform”, the following steps
    will compute the bbox:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用图像的 **变换矩阵** “transform”，以下步骤将计算bbox：
- en: '[PRE7]'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Inspecting the matrix product `shrink * transform` will reveal all information
    about what happened to the image rectangle to make it fit into the bbox on the
    page: rotation, scaling of its sides and translation of its origin. Let us look
    at an example:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查矩阵乘积 `shrink * transform` 将显示有关将图像矩形调整到页面上的 bbox 的所有信息：旋转、其边缘的缩放和原点的平移。让我们看一个例子：
- en: '[PRE8]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '* * *'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '## PDF Base 14 Fonts'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '## PDF 基本 14 字体'
- en: 'The following 14 builtin font names **must be supported by every PDF viewer**
    application. They are available as a dictionary, which maps their full names amd
    their abbreviations in lower case to the full font basename. Wherever a **fontname**
    must be provided in PyMuPDF, any **key or value** from the dictionary may be used:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 下列 14 个内置字体名称 **必须由每个 PDF 查看器** 应用程序支持。它们可用作字典，将它们的全名和其缩写（小写）映射到完整的字体基本名称。在
    PyMuPDF 中需要提供 **字体名称** 时，可以使用字典中的任何 **键或值**：
- en: '[PRE9]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: In contrast to their obligation, not all PDF viewers support these fonts correctly
    and completely – this is especially true for Symbol and ZapfDingbats. Also, the
    glyph (visual) images will be specific to every reader.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 与他们的义务相反，不是所有的 PDF 查看器都正确和完全支持这些字体 – 这对于 Symbol 和 ZapfDingbats 尤其如此。此外，字形（视觉）图像将针对每个阅读器具体化。
- en: To see how these fonts can be used – including the **CJK built-in** fonts –
    look at the table in [`Page.insert_font()`](page.html#Page.insert_font "Page.insert_font").
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看这些字体如何使用，包括 **内置 CJK** 字体，请查看 [`Page.insert_font()`](page.html#Page.insert_font
    "Page.insert_font") 中的表格。
- en: '* * *'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '## Adobe PDF References'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '## Adobe PDF 参考'
- en: This PDF Reference manual published by Adobe is frequently quoted throughout
    this documentation. It can be viewed and downloaded from [here](https://opensource.adobe.com/dc-acrobat-sdk-docs/standards/pdfstandards/pdf/PDF32000_2008.pdf).
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: Adobe 发布的此 PDF 参考手册经常在本文档中引用。可以从 [此处](https://opensource.adobe.com/dc-acrobat-sdk-docs/standards/pdfstandards/pdf/PDF32000_2008.pdf)
    查看和下载。
- en: Note
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: For a long time, an older version was also available under [this](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)
    link. It seems to be taken off of the web site in October 2021\. Earlier (pre
    1.19.*) versions of the PyMuPDF documentation used to refer to this document.
    We have undertaken an effort to replace referrals to the current specification
    above.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 长期以来，旧版本还可以在 [此](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)
    链接下找到。看起来在 2021 年 10 月从网站上撤下了。早期（1.19.* 之前）版本的 PyMuPDF 文档曾参考过此文档。我们已经努力将对当前规范的引用替换为上面的规范。
- en: '* * *'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '## Using Python Sequences as Arguments in PyMuPDF'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '## 在 PyMuPDF 中使用 Python 序列作为参数'
- en: When PyMuPDF objects and methods require a Python **list** of numerical values,
    other Python **sequence types** are also allowed. Python classes are said to implement
    the **sequence protocol**, if they have a `__getitem__()` method.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 当 PyMuPDF 对象和方法需要一个 Python **列表** 的数值时，其他 Python **序列类型** 也是允许的。如果 Python 类有一个
    `__getitem__()` 方法，则称其实现了 **序列协议**。
- en: This basically means, you can interchangeably use Python *list* or *tuple* or
    even *array.array*, *numpy.array* and *bytearray* types in these cases.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 这基本上意味着，你可以在这些情况下可以互换使用 Python *列表* 或 *元组*，甚至 *array.array*、*numpy.array* 和
    *bytearray* 类型。
- en: For example, specifying a sequence `"s"` in any of the following ways
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '例如，在以下任何一种方式中指定序列 `"s"` '
- en: '`s = [1, 2]` – a list'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = [1, 2]` – 一个列表'
- en: '`s = (1, 2)` – a tuple'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = (1, 2)` – 一个元组'
- en: '`s = array.array("i", (1, 2))` – an array.array'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = array.array("i", (1, 2))` – 一个 array.array'
- en: '`s = numpy.array((1, 2))` – a numpy array'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = numpy.array((1, 2))` – 一个 numpy 数组'
- en: '`s = bytearray((1, 2))` – a bytearray'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s = bytearray((1, 2))` – 一个 bytearray'
- en: 'will make it usable in the following example expressions:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 将使其在以下示例表达式中可用：
- en: '`pymupdf.Point(s)`'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pymupdf.Point(s)`'
- en: '`pymupdf.Point(x, y) + s`'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pymupdf.Point(x, y) + s`'
- en: '`doc.select(s)`'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`doc.select(s)`'
- en: Similarly with all geometry objects [Rect](rect.html#rect), [IRect](irect.html#irect),
    [Matrix](matrix.html#matrix) and [Point](point.html#point).
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 同样地，所有几何对象 [Rect](rect.html#rect)、[IRect](irect.html#irect)、[Matrix](matrix.html#matrix)
    和 [Point](point.html#point) 也是如此。
- en: Because all PyMuPDF geometry classes themselves are special cases of sequences,
    they (with the exception of [Quad](quad.html#quad) – see below) can be freely
    used where numerical sequences can be used, e.g. as arguments for functions like
    *list()*, *tuple()*, *array.array()* or *numpy.array()*. Look at the following
    snippet to see this work.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 因为所有的 PyMuPDF 几何类本身都是序列的特殊情况，所以它们（除了 [Quad](quad.html#quad) – 见下文）可以自由地用在可以使用数值序列的地方，例如作为
    *list()*、*tuple()*、*array.array()* 或 *numpy.array()* 的参数。查看以下代码片段以查看其工作原理。
- en: '[PRE10]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Note
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: '[Quad](quad.html#quad) is a Python sequence object as well and has a length
    of 4\. Its items however are [`point_like`](glossary.html#point_like "point_like")
    – not numbers. Therefore, the above remarks do not apply.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '[四边形](quad.html#quad)也是Python序列对象，长度为4。然而，其项是[`point_like`](glossary.html#point_like
    "point_like")，而不是数字。因此，上述评论不适用。'
- en: '* * *'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '## Ensuring Consistency of Important Objects in PyMuPDF'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '## 确保PyMuPDF中重要对象的一致性'
- en: PyMuPDF is a Python binding for the C library MuPDF. While a lot of effort has
    been invested by MuPDF’s creators to approximate some sort of an object-oriented
    behavior, they certainly could not overcome basic shortcomings of the C language
    in that respect.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: PyMuPDF是C库MuPDF的Python绑定。尽管MuPDF的创建者已经付出了大量努力来模拟某种面向对象的行为，但他们确实无法克服C语言在这方面的基本缺陷。
- en: 'Python on the other hand implements the OO-model in a very clean way. The interface
    code between PyMuPDF and MuPDF consists of two basic files: *pymupdf.py* and *fitz_wrap.c*.
    They are created by the excellent SWIG tool for each new version.'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，Python非常清晰地实现了OO模型。PyMuPDF与MuPDF之间的接口代码由两个基本文件组成：*pymupdf.py*和*fitz_wrap.c*。每个新版本都由优秀的SWIG工具创建。
- en: When you use one of PyMuPDF’s objects or methods, this will result in execution
    of some code in *pymupdf.py*, which in turn will call some C code compiled with
    *fitz_wrap.c*.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 当您使用PyMuPDF的对象或方法时，这将导致在*pymupdf.py*中执行一些代码，然后调用一些在*fitz_wrap.c*中编译的C代码。
- en: 'Because SWIG goes a long way to keep the Python and the C level in sync, everything
    works fine, if a certain set of rules is being strictly followed. For example:
    **never access** a [Page](page.html#page) object, after you have closed (or deleted
    or set to *None*) the owning [Document](document.html#document). Or, less obvious:
    **never access** a page or any of its children (links or annotations) after you
    have executed one of the document methods *select()*, *delete_page()*, *insert_page()*
    … and more.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 因为SWIG在保持Python和C级别同步方面走了很长一段路，只要严格遵循一定的规则，一切都能正常工作。例如：**在关闭（或删除或设置为*None*）所属[文档](document.html#document)之后，永远不要访问**一个[页面](page.html#page)对象。或者，不那么明显的是：在执行文档方法*select()*、*delete_page()*、*insert_page()*等之后，永远不要访问页面或其任何子元素（链接或注释）。
- en: 'But just no longer accessing invalidated objects is actually not enough: They
    should rather be actively deleted entirely, to also free C-level resources (meaning
    allocated memory).'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 但是仅仅停止访问无效对象是不够的：它们应该被完全删除，以释放C级资源（即分配的内存）。
- en: The reason for these rules lies in the fact that there is a hierarchical 2-level
    one-to-many relationship between a document and its pages and also between a page
    and its links / annotations. To maintain a consistent situation, any of the above
    actions must lead to a complete reset – in **Python and, synchronously, in C**.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 这些规则的原因在于文档与其页面之间以及页面与其链接/注释之间存在层次化的二级一对多关系。为了保持一致的情况，上述任何操作都必须导致完全重置 - **在Python和C中同步进行**。
- en: SWIG cannot know about this and consequently does not do it.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: SWIG无法知道这一点，因此也不会执行。
- en: The required logic has therefore been built into PyMuPDF itself in the following
    way.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，所需的逻辑已经内置到PyMuPDF中，如下所示。
- en: If a page “loses” its owning document or is being deleted itself, all of its
    currently existing annotations and links will be made unusable in Python, and
    their C-level counterparts will be deleted and deallocated.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果页面“丢失”其所属文档或本身被删除，则Python中所有当前存在的注释和链接将变为不可用，并且它们的C级对应物将被删除和释放。
- en: 'If a document is closed (or deleted or set to *None*) or if its structure has
    changed, then similarly all currently existing pages and their children will be
    made unusable, and corresponding C-level deletions will take place. “Structure
    changes” include methods like *select()*, *delePage()*, *insert_page()*, *insert_pdf()*
    and so on: all of these will result in a cascade of object deletions.'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果文档已关闭（或删除或设置为*None*），或者其结构已更改，则当前存在的所有页面及其子页面将变为不可用，并且将进行相应的C级删除。 "结构更改"包括诸如*select()*、*delete_page()*、*insert_page()*、*insert_pdf()*等方法：所有这些方法都会导致级联的对象删除。
- en: The programmer will normally not realize any of this. If he, however, tries
    to access invalidated objects, exceptions will be raised.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 程序员通常不会意识到这一点。然而，如果他试图访问无效的对象，将会引发异常。
- en: Invalidated objects cannot be directly deleted as with Python statements like
    *del page* or *page = None*, etc. Instead, their *__del__* method must be invoked.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 无效的对象不能像使用Python语句*del page*或*page = None*等那样直接删除。相反，必须调用它们的*__del__*方法。
- en: 'All pages, links and annotations have the property *parent*, which points to
    the owning object. This is the property that can be checked on the application
    level: if *obj.parent == None* then the object’s parent is gone, and any reference
    to its properties or methods will raise an exception informing about this “orphaned”
    state.'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 所有页面、链接和注释都有属性*parent*，指向拥有的对象。这是可以在应用程序级别检查的属性：如果*obj.parent == None*，则对象的父项已丢失，并且对其属性或方法的任何引用都将引发异常，通知此“孤立”的状态。
- en: 'A sample session:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 一个示例会话：
- en: '[PRE11]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'This shows the cascading effect:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 这显示了级联效应：
- en: '[PRE12]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Note
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Objects outside the above relationship are not included in this mechanism. If
    you e.g. created a table of contents by *toc = doc.get_toc()*, and later close
    or change the document, then this cannot and does not change variable *toc* in
    any way. It is your responsibility to refresh such variables as required.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述关系之外的对象不包括在此机制中。例如，如果通过*toc = doc.get_toc()*创建了目录，然后关闭或更改文档，那么这不会也不能以任何方式更改变量*toc*。您有责任根据需要刷新此类变量。
- en: '* * *'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '## Design of Method [`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '## 方法设计[`Page.show_pdf_page()`](page.html#Page.show_pdf_page "Page.show_pdf_page")'
- en: Purpose and Capabilities
  id: totrans-217
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 目的和能力
- en: The method displays an image of a (“source”) page of another PDF document within
    a specified rectangle of the current (“containing”, “target”) page.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 该方法在当前（“包含”、“目标”）页面的指定矩形内显示另一个PDF文档的页面的图像。
- en: '**In contrast** to [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image"),
    this display is vector-based and hence remains accurate across zooming levels.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**相比**[`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")，此显示是基于矢量的，因此在缩放级别上保持准确。'
- en: '**Just like** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image"),
    the size of the display is adjusted to the given rectangle.'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**就像**[`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")一样，显示的大小根据给定的矩形调整。'
- en: 'The following variations of the display are currently supported:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 当前支持以下显示变体：
- en: Bool parameter `"keep_proportion"` controls whether to maintain the aspect ratio
    (default) or not.
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布尔参数`"keep_proportion"`控制是否保持纵横比（默认）。
- en: Rectangle parameter `"clip"` restricts the visible part of the source page rectangle.
    Default is the full page.
  id: totrans-223
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 矩形参数`"clip"`限制了源页面矩形的可见部分。默认为整个页面。
- en: float `"rotation"` rotates the display by an arbitrary angle (degrees). If the
    angle is not an integer multiple of 90, only 2 of the 4 corners may be positioned
    on the target border if also `"keep_proportion"` is true.
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 浮点数`"rotation"`将显示旋转一个任意角度（度）。如果角度不是90的整数倍，则如果也`"keep_proportion"`为真，则可能只有4个角中的2个位于目标边界上。
- en: Bool parameter `"overlay"` controls whether to put the image on top (foreground,
    default) of current page content or not (background).
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布尔参数`"overlay"`控制是否将图像放在当前页面内容的顶部（前景，默认）或不放置在顶部（背景）。
- en: 'Use cases include (but are not limited to) the following:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 用例包括（但不限于）以下内容：
- en: “Stamp” a series of pages of the current document with the same image, like
    a company logo or a watermark.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “盖章”一系列当前文档页面与相同的图像，如公司标志或水印。
- en: Combine arbitrary input pages into one output page to support “booklet” or double-sided
    printing (known as “4-up”, “n-up”).
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将任意输入页面组合成一个输出页面，以支持“手册”或双面打印（称为“4-up”、“n-up”）。
- en: Split up (large) input pages into several arbitrary pieces. This is also called
    “posterization”, because you e.g. can split an A4 page horizontally and vertically,
    print the 4 pieces enlarged to separate A4 pages, and end up with an A2 version
    of your original page.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将（大）输入页面分割成几个任意的片段。这也称为“海报化”，因为您可以将A4页面水平和垂直分割，并将4个片段放大到单独的A4页面上打印，最终得到您原始页面的A2版本。
- en: Technical Implementation
  id: totrans-230
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 技术实现
- en: 'This is done using PDF **“Form XObjects”**, see section 8.10 on page 217 of
    [Adobe PDF References](#adobemanual). On execution of a [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page"), the following things happen:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 这是使用PDF **“表单XObject”**完成的，请参阅[Adobe PDF参考手册](#adobemanual)第217页的8.10节。在执行[`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page")时，会发生以下事情：
- en: The [`resources`](glossary.html#resources "resources") and [`contents`](glossary.html#contents
    "contents") objects of source page in source document are copied over to the target
    document, jointly creating a new **Form XObject** with the following properties.
    The PDF [`xref`](glossary.html#xref "xref") number of this object is returned
    by the method.
  id: totrans-232
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 源文档中源页面的[`resources`](glossary.html#resources "resources")和[`contents`](glossary.html#contents
    "contents")对象与目标文档一起复制，共同创建一个新的**Form XObject**，具有以下属性。此对象的PDF [`xref`](glossary.html#xref
    "xref")编号由该方法返回。
- en: ''
  id: totrans-233
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-234
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-235
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/BBox` equals `/Mediabox` of the source page'
  id: totrans-236
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/BBox`等于源页面的`/Mediabox`'
- en: ''
  id: totrans-237
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-238
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Matrix` equals the identity matrix.'
  id: totrans-239
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Matrix`等于单位矩阵。'
- en: ''
  id: totrans-240
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-241
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Resources` equals that of the source page. This involves a “deep-copy” of
    hierarchically nested other objects (including fonts, images, etc.). The complexity
    involved here is covered by MuPDF’s grafting [[1]](#f1) technique functions.'
  id: totrans-242
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/资源` 等同于源页面。这涉及“深拷贝”层次嵌套的其他对象（包括字体、图像等）。这里涉及的复杂性由MuPDF的嫁接[[1]](#f1)技术函数来处理。'
- en: ''
  id: totrans-243
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-244
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: This is a stream object type, and its stream is an exact copy of the combined
    data of the source page’s [`contents`](glossary.html#contents "contents") objects.
  id: totrans-245
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这是一个流对象类型，其流是源页面[`contents`](glossary.html#contents "contents")对象的组合数据的精确副本。
- en: ''
  id: totrans-246
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-247
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-248
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: This Form XObject is only executed once per shown source page. Subsequent displays
    of the same source page will skip this step and only create “pointer” Form XObjects
    (done in next step) to this object.
  id: totrans-249
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个Form XObject仅在显示的源页面中执行一次。后续显示相同的源页面将跳过此步骤，仅为此对象创建“指针”Form XObjects（在下一步中完成）。
- en: ''
  id: totrans-250
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-251
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: 'A second **Form XObject** is then created which the target page uses to invoke
    the display. This object has the following properties:'
  id: totrans-252
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后创建第二个**Form XObject**，目标页面用于调用显示。此对象具有以下属性：
- en: ''
  id: totrans-253
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-254
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-255
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/BBox` equals the `/CropBox` of the source page (or `"clip"`).'
  id: totrans-256
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/BBox`等于源页面的`/CropBox`（或`"clip"`）。'
- en: ''
  id: totrans-257
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-258
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Matrix` represents the mapping of `/BBox` to the target rectangle.'
  id: totrans-259
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Matrix`表示将`/BBox`映射到目标矩形。'
- en: ''
  id: totrans-260
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-261
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/XObject` references the previous Form XObject via the fixed name `fullpage`.'
  id: totrans-262
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/XObject`通过固定名称`fullpage`引用前一个Form XObject。'
- en: ''
  id: totrans-263
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-264
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The stream of this object contains exactly one fixed statement: `/fullpage
    Do`.'
  id: totrans-265
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此对象的流正好包含一个固定语句：`/fullpage Do`。
- en: ''
  id: totrans-266
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-267
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: If the method’s `"oc"` argument is given, its value is assigned to this Form
    XObject as `/OC`.
  id: totrans-268
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果方法的`"oc"`参数已给出，则将其值分配给此Form XObject作为`/OC`。
- en: ''
  id: totrans-269
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-270
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: The [`resources`](glossary.html#resources "resources") and [`contents`](glossary.html#contents
    "contents") objects of the target page are now modified as follows.
  id: totrans-271
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在修改了目标页面的[`resources`](glossary.html#resources "resources")和[`contents`](glossary.html#contents
    "contents")对象如下。
- en: ''
  id: totrans-272
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-273
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-274
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: Add an entry to the `/XObject` dictionary of `/Resources` with the name [`fzFrm`](colorspace.html#Colorspace.n
    "Colorspace.n") (with n chosen such that this entry is unique on the page).
  id: totrans-275
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`/资源`的`/XObject`字典中添加一个条目，名称为[`fzFrm`](colorspace.html#Colorspace.n "Colorspace.n")（n选取得使该条目在页面上唯一）。
- en: ''
  id: totrans-276
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-277
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: Depending on `"overlay"`, prepend or append a new object to the page’s `/Contents`
    array, containing the statement `q /fzFrm<n> Do Q`.
  id: totrans-278
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据`"overlay"`，在页面的`/Contents`数组之前或之后添加一个新对象，其中包含语句`q /fzFrm<n> Do Q`。
- en: 'This design approach ensures that:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 此设计方法确保：
- en: The (potentially large) source page is only copied once to the target PDF. Only
    small “pointer” Form XObjects objects are created per each target page to show
    the source page.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 只将（可能很大的）源页面复制一次到目标PDF中。每个目标页面仅创建小的“指针”Form XObjects对象来显示源页面。
- en: Each referring target page can have its own `"oc"` parameter to control the
    source page’s visibility individually.
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每个引用的目标页面可以有自己的`"oc"`参数来单独控制源页面的可见性。
- en: Purpose and Capabilities
  id: totrans-282
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 目的和能力
- en: The method displays an image of a (“source”) page of another PDF document within
    a specified rectangle of the current (“containing”, “target”) page.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 该方法在当前页面的指定矩形内显示另一个PDF文档的（“源”）页面图像。
- en: '**In contrast** to [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image"),
    this display is vector-based and hence remains accurate across zooming levels.'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    **相比**，此显示是基于矢量的，因此在缩放级别上保持准确。'
- en: '**Just like** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image"),
    the size of the display is adjusted to the given rectangle.'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与** [`Page.insert_image()`](page.html#Page.insert_image "Page.insert_image")
    **类似**，显示的大小调整为给定的矩形。'
- en: 'The following variations of the display are currently supported:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 当前支持以下显示变体：
- en: Bool parameter `"keep_proportion"` controls whether to maintain the aspect ratio
    (default) or not.
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布尔参数`"keep_proportion"`控制是否保持纵横比（默认）。
- en: Rectangle parameter `"clip"` restricts the visible part of the source page rectangle.
    Default is the full page.
  id: totrans-288
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 矩形参数`"clip"`限制源页面矩形的可见部分。默认为整个页面。
- en: float `"rotation"` rotates the display by an arbitrary angle (degrees). If the
    angle is not an integer multiple of 90, only 2 of the 4 corners may be positioned
    on the target border if also `"keep_proportion"` is true.
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 浮点数`"rotation"`按任意角度（度）旋转显示。如果角度不是90的整数倍，则如果也设置了`"keep_proportion"`为真，则只有目标边框上的2个角可能会定位。
- en: Bool parameter `"overlay"` controls whether to put the image on top (foreground,
    default) of current page content or not (background).
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布尔参数`"overlay"`控制是否将图像放在当前页面内容的顶部（前景，默认）或不放置在其上（背景）。
- en: 'Use cases include (but are not limited to) the following:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 使用情况包括（但不限于）以下内容：
- en: “Stamp” a series of pages of the current document with the same image, like
    a company logo or a watermark.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “标记”当前文档的一系列页面与相同的图像，比如公司标志或水印。
- en: Combine arbitrary input pages into one output page to support “booklet” or double-sided
    printing (known as “4-up”, “n-up”).
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将任意输入页面合并为一个输出页面，支持“小册子”或双面打印（称为“4-up”，“n-up”）。
- en: Split up (large) input pages into several arbitrary pieces. This is also called
    “posterization”, because you e.g. can split an A4 page horizontally and vertically,
    print the 4 pieces enlarged to separate A4 pages, and end up with an A2 version
    of your original page.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将（大型）输入页面分割成多个任意的片段。这也称为“分幅”，例如可以水平和垂直地分割A4页面，将4个片段放大到单独的A4页面上打印，最终得到原始页面的A2版本。
- en: Technical Implementation
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 技术实施
- en: 'This is done using PDF **“Form XObjects”**, see section 8.10 on page 217 of
    [Adobe PDF References](#adobemanual). On execution of a [`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page"), the following things happen:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 这是使用PDF **“Form XObjects”**完成的，请参阅[Adobe PDF References](#adobemanual)第8.10节第217页。在执行[`Page.show_pdf_page()`](page.html#Page.show_pdf_page
    "Page.show_pdf_page")时，会发生以下事情：
- en: The [`resources`](glossary.html#resources "resources") and [`contents`](glossary.html#contents
    "contents") objects of source page in source document are copied over to the target
    document, jointly creating a new **Form XObject** with the following properties.
    The PDF [`xref`](glossary.html#xref "xref") number of this object is returned
    by the method.
  id: totrans-297
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 源文档中源页面的[`resources`](glossary.html#resources "资源")和[`contents`](glossary.html#contents
    "内容")对象被复制到目标文档，共同创建一个新的**Form XObject**，具有以下属性。此对象的PDF [`xref`](glossary.html#xref
    "交叉引用")编号由该方法返回。
- en: ''
  id: totrans-298
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-299
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-300
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/BBox` equals `/Mediabox` of the source page'
  id: totrans-301
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/BBox`等于源页面的`/Mediabox`。'
- en: ''
  id: totrans-302
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-303
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Matrix` equals the identity matrix.'
  id: totrans-304
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Matrix`等于单位矩阵。'
- en: ''
  id: totrans-305
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-306
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Resources` equals that of the source page. This involves a “deep-copy” of
    hierarchically nested other objects (including fonts, images, etc.). The complexity
    involved here is covered by MuPDF’s grafting [[1]](#f1) technique functions.'
  id: totrans-307
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Resources`等于源页面的资源。这涉及到层次嵌套的其他对象（包括字体、图像等）的“深复制”。这里涉及的复杂性由MuPDF的嫁接技术函数[[1]](#f1)覆盖。'
- en: ''
  id: totrans-308
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-309
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: This is a stream object type, and its stream is an exact copy of the combined
    data of the source page’s [`contents`](glossary.html#contents "contents") objects.
  id: totrans-310
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这是一个流对象类型，其流是源页面[`contents`](glossary.html#contents "内容")对象的组合数据的精确副本。
- en: ''
  id: totrans-311
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-312
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-313
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: This Form XObject is only executed once per shown source page. Subsequent displays
    of the same source page will skip this step and only create “pointer” Form XObjects
    (done in next step) to this object.
  id: totrans-314
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个Form XObject仅在每次显示源页面时执行一次。后续显示相同的源页面将跳过此步骤，并仅创建指向此对象的“指针”Form XObjects（在下一步完成）。
- en: ''
  id: totrans-315
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-316
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: 'A second **Form XObject** is then created which the target page uses to invoke
    the display. This object has the following properties:'
  id: totrans-317
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后创建第二个**Form XObject**，目标页面使用它来调用显示。此对象具有以下属性：
- en: ''
  id: totrans-318
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-319
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-320
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/BBox` equals the `/CropBox` of the source page (or `"clip"`).'
  id: totrans-321
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/BBox`等于源页面的`/CropBox`（或`"clip"`）。'
- en: ''
  id: totrans-322
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-323
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/Matrix` represents the mapping of `/BBox` to the target rectangle.'
  id: totrans-324
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Matrix`表示`/BBox`到目标矩形的映射。'
- en: ''
  id: totrans-325
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-326
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`/XObject` references the previous Form XObject via the fixed name `fullpage`.'
  id: totrans-327
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/XObject`通过固定名称`fullpage`引用前面的Form XObject。'
- en: ''
  id: totrans-328
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-329
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The stream of this object contains exactly one fixed statement: `/fullpage
    Do`.'
  id: totrans-330
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此对象的流包含一个固定语句：`/fullpage Do`。
- en: ''
  id: totrans-331
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-332
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: If the method’s `"oc"` argument is given, its value is assigned to this Form
    XObject as `/OC`.
  id: totrans-333
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果方法的`"oc"`参数给定，其值将分配给此Form XObject作为`/OC`。
- en: ''
  id: totrans-334
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-335
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: The [`resources`](glossary.html#resources "resources") and [`contents`](glossary.html#contents
    "contents") objects of the target page are now modified as follows.
  id: totrans-336
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 目标页面的 [`resources`](glossary.html#resources "resources") 和 [`contents`](glossary.html#contents
    "contents") 对象现在修改如下。
- en: ''
  id: totrans-337
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-338
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-339
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: Add an entry to the `/XObject` dictionary of `/Resources` with the name [`fzFrm`](colorspace.html#Colorspace.n
    "Colorspace.n") (with n chosen such that this entry is unique on the page).
  id: totrans-340
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `/Resources` 的 `/XObject` 字典中添加一个条目，名称为 [`fzFrm`](colorspace.html#Colorspace.n
    "Colorspace.n")（选择 n 使得此条目在页面上唯一）。
- en: ''
  id: totrans-341
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-342
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: Depending on `"overlay"`, prepend or append a new object to the page’s `/Contents`
    array, containing the statement `q /fzFrm<n> Do Q`.
  id: totrans-343
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据 `"overlay"`，在页面的 `/Contents` 数组前面或后面添加一个新对象，包含语句 `q /fzFrm<n> Do Q`。
- en: 'This design approach ensures that:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 这种设计方法确保了：
- en: The (potentially large) source page is only copied once to the target PDF. Only
    small “pointer” Form XObjects objects are created per each target page to show
    the source page.
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （可能很大的）源页面仅被复制一次到目标 PDF 中。每个目标页面只创建小的“指针”Form XObjects 对象来显示源页面。
- en: Each referring target page can have its own `"oc"` parameter to control the
    source page’s visibility individually.
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每个引用的目标页面可以有自己的 `"oc"` 参数，单独控制源页面的可见性。
- en: '## Redirecting Error and Warning Messages'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: '## 重定向错误和警告消息'
- en: Since MuPDF version 1.16 error and warning messages can be redirected via an
    official plugin.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 自 MuPDF 版本 1.16 起，错误和警告消息可以通过官方插件进行重定向。
- en: PyMuPDF will put error messages to `sys.stderr` prefixed with the string “mupdf:”.
    Warnings are internally stored and can be accessed via *pymupdf.TOOLS.mupdf_warnings()*.
    There also is a function to empty this store.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: PyMuPDF 会将错误消息输出到 `sys.stderr`，前缀为字符串 “mupdf:”。警告会被内部存储，并可通过 *pymupdf.TOOLS.mupdf_warnings()*
    访问。还存在一个函数可以清空此存储。
- en: '## Coordinates'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '## 坐标'
- en: This is one of the most frequently used terms in this documentation. A **coordinate**
    generally means a pair of numbers `(x, y)` referring to some location, like a
    corner of a rectangle ([Rect](rect.html#rect)), a [Point](point.html#point) and
    so forth. The two values usually are floats, but there a objects like images which
    only allow them to be integers.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 这是文档中最常用的术语之一。一个**坐标**通常指的是一对数字 `(x, y)`，表示某个位置，如矩形的角落（[Rect](rect.html#rect)）、[Point](point.html#point)
    等。两个值通常是浮点数，但也有像图像这样的对象只允许它们是整数。
- en: To actually *find* a coordinate’s location, we also need to know the *reference*
    point for `x` and `y` - in other words, we must know where location `(0, 0)` is
    positioned. Once `(0, 0)` (the “origin”) is known, we speak of a “coordinate system”.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 要实际*找到*坐标的位置，我们还需要知道 `x` 和 `y` 的*参考*点——换句话说，我们必须知道位置 `(0, 0)` 放置在哪里。一旦 `(0,
    0)`（“原点”）确定，我们就谈论一个“坐标系统”。
- en: Several coordinate systems exist in document processing. For instance, the coordinate
    systems of a PDF page and the image created from it are **different**. We therefore
    need ways to *transform* coordinates from one system to another (and also back
    occasionally). This is the task of a [Matrix](matrix.html#matrix). It is a mathematical
    function which works much like a factor that can be “multiplied” with a point
    or rectangle to give us the corresponding point / rectangle in another coordinate
    system. The inverse of a transformation matrix can be used to revert the transformation.
    Much like multiplying by some factor, say 3, can be reverted by dividing the result
    by 3 (or multiplying it with 1/3).
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 在文档处理过程中存在几种坐标系统。例如，PDF 页面和从中创建的图像的坐标系统是**不同的**。因此，我们需要方法来*转换*坐标，从一个系统到另一个系统（并且有时也需要反向转换）。这是一个[矩阵](matrix.html#matrix)的任务。它是一个数学函数，类似于一个因子，可以与一个点或矩形“相乘”，以给我们在另一个坐标系统中的对应点/矩形。变换矩阵的逆可以用来恢复变换。就像乘以某个因子，比如
    3，可以通过将结果除以 3（或与 1/3 相乘）来恢复一样。
- en: Coordinates and Images
  id: totrans-354
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 坐标和图像
- en: Images have a coordinate system with integer coordinates. Origin `(0, 0)` is
    the top-left point. `x` values must be in `range(width)`, and `y` values in `range(height)`.
    Therefore, `y` values *increase* if we go *downwards*. For every image, there
    is only a **finite number** of coordinates, namely `width * height`. A location
    in an image is also called a “pixel”.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 图像具有整数坐标的坐标系统。原点 `(0, 0)` 是左上角点。`x` 值必须在 `range(width)` 范围内，`y` 值在 `range(height)`
    范围内。因此，`y` 值*增加*，如果我们向*下*移动。每个图像只有一个**有限数量**的坐标，即 `width * height`。图像中的一个位置也称为“像素”。
- en: 'How **large** an image will be (in centimeters or inches) when e.g. printed,
    depends on additional information: the “resolution”. This is measured in **DPI**
    (dots per inch, or pixels per inch). To find the printed size of some image, we
    therefore must divide its width and its height by the corresponding DPI values
    (there may separate ones for width and for height) and will get the respective
    number of inches.'
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当图像被打印时，其大小（以厘米或英寸为单位）取决于附加信息：**分辨率**。这以**DPI**（每英寸点数，或每英寸像素数）来衡量。因此，为了找出某个图像的打印尺寸，我们必须将其宽度和高度分别除以相应的DPI值（宽度和高度可能有单独的值），从而得到相应的英寸数。
- en: Origin Point, Point Size and Y-Axis
  id: totrans-357
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 原点，点大小和Y轴
- en: In **PDF**, the origin `(0, 0)` of a page is located at its **bottom-left point**.
    In **MuPDF**, the origin `(0, 0)` of a page is located at its **top-left point**.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 在**PDF**中，页面的原点`(0, 0)`位于其**左下角**。在**MuPDF**中，页面的原点`(0, 0)`位于其**左上角**。
- en: '![_images/img-coordinate-space.png](../Images/fdb4dc6f90fefd7f22efb8a073df53a2.png)'
  id: totrans-359
  prefs: []
  type: TYPE_IMG
  zh: '![_images/img-coordinate-space.png](../Images/fdb4dc6f90fefd7f22efb8a073df53a2.png)'
- en: 'Coordinates are float numbers and measured in **points**, where:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 坐标是浮点数，以**点（points）**为单位，其中：
- en: '**one point equals 1/72 inches**.'
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一个点等于1/72英寸**。'
- en: Typical document page sizes are **ISO A4** and **Letter**. A **Letter** page
    has a size of **8.5 x 11 inches**, corresponding to **612 x 792 points**. In the
    **PDF** coordinate system, the top-left point of a **Letter** page hence has the
    coordinate `(0, 792)` as **the y-axis points upwards**. Now we know our document
    size the **MuPDF** coordinate system for the bottom right would be coordinate
    `(612, 792)` (and for **PDF** this coordinate would then be `(612,0)`).
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 典型的文档页面大小为**ISO A4**和**Letter**。**Letter**页面的大小为**8.5 x 11英寸**，对应**612 x 792点**。在**PDF**坐标系统中，**Letter**页面的左上角点的坐标因此是`(0,
    792)`，因为**Y轴向上**指向。现在我们知道我们文档的大小，在**MuPDF**中，右下角的坐标将是`(612, 792)`（对于**PDF**，这个坐标将是`(612,0)`）。
- en: Theoretically, there are **infinitely many** coordinate positions on a **PDF**
    page. In practice however, at most the first 5 decimal places are sufficient for
    a reasonable precision.
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从理论上讲，**PDF**页面上有**无限多个**坐标位置。然而，在实践中，至多前5位小数足以保证合理的精度。
- en: In **MuPDF**, multiple document formats are supported - **PDF** just being one
    among **over a dozen others**. Images are also supported as documents in **MuPDF**
    (therefore having one page usually). This is one of the reasons why **MuPDF**
    uses a coordinate system with the origin `(0, 0)` being the **top-left** point
    of any document page. **The y-axis points downwards**, like with images. Coordinates
    in **MuPDF** in any case are floats, like in **PDF**.
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**MuPDF**中，支持多种文档格式 - **PDF**只是其中之一，总共有**十几种其他格式**。图像在**MuPDF**中也作为文档支持（因此通常只有一页）。这也是为什么**MuPDF**使用以坐标系，原点`(0,
    0)`是任何文档页面的**左上角**点。**Y轴向下**指向，如同图像一样。**MuPDF**中的坐标无论如何都是浮点数，就像在**PDF**中一样。
- en: 'A rectangle `Rect(0, 0, 100, 100)` for instance in **MuPDF** (and thus **PyMuPDF**)
    therefore is a square with edges of length 100 points (= 1.39 inches or 3.53 centimeters).
    Its top-left corner is the origin. To switch between the two coordinate systems
    **PDF** to **MuPDF**, every [Page](page.html#page) object has a [`Page.transformation_matrix`](page.html#Page.transformation_matrix
    "Page.transformation_matrix"). Its inverse can be used to compute a rectangle’s
    PDF coordinates. In this way we can conveniently find that `Rect(0, 0, 100, 100)`
    in **MuPDF** is the same as `Rect(0, 692, 100, 792)` in **PDF**. See this code
    snippet:'
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，在**MuPDF**中的矩形`Rect(0, 0, 100, 100)`（因此也适用于**PyMuPDF**），因此是一个边长为100点（= 1.39英寸或3.53厘米）的正方形。它的左上角是原点。为了在**PDF**和**MuPDF**之间切换坐标系，每个[Page](page.html#page)对象都有一个[`Page.transformation_matrix`](page.html#Page.transformation_matrix
    "Page.transformation_matrix")。它的逆可以用来计算矩形的PDF坐标。通过这种方式，我们可以方便地发现在**MuPDF**中的`Rect(0,
    0, 100, 100)`等同于**PDF**中的`Rect(0, 692, 100, 792)`。请参阅以下代码片段：
- en: '[PRE13]'
  id: totrans-366
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Footnotes
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 脚注
- en: Do you have any feedback on this page?
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 这页有没有任何反馈？
- en: '* * *'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: This software is provided AS-IS with no warranty, either express or implied.
    This software is distributed under license and may not be copied, modified or
    distributed except as expressly authorized under the terms of that license. Refer
    to licensing information at [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA
    94129, United States for further information.
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 此软件按原样提供，不带任何明示或暗示的担保。此软件根据许可证分发，未经明确授权不得复制、修改或分发。有关详细信息，请参阅[artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)的许可信息或联系Artifex
    Software Inc.，美国加利福尼亚州旧金山Mesa街39号108A套房。
- en: This documentation covers all versions up to 1.24.4.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 本文档覆盖了所有版本直至1.24.4。
- en: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
- en: Coordinates and Images
  id: totrans-373
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 坐标与图像
- en: Images have a coordinate system with integer coordinates. Origin `(0, 0)` is
    the top-left point. `x` values must be in `range(width)`, and `y` values in `range(height)`.
    Therefore, `y` values *increase* if we go *downwards*. For every image, there
    is only a **finite number** of coordinates, namely `width * height`. A location
    in an image is also called a “pixel”.
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 图像具有整数坐标系。原点`(0, 0)`位于左上角。`x`值必须在`宽度范围`内，而`y`值在`高度范围`内。因此，如果我们向*下移动*，`y`值将*增加*。对于每个图像，坐标仅有**有限数量**，即`宽度
    * 高度`。图像中的位置也称为“像素”。
- en: 'How **large** an image will be (in centimeters or inches) when e.g. printed,
    depends on additional information: the “resolution”. This is measured in **DPI**
    (dots per inch, or pixels per inch). To find the printed size of some image, we
    therefore must divide its width and its height by the corresponding DPI values
    (there may separate ones for width and for height) and will get the respective
    number of inches.'
  id: totrans-375
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，打印时图像的**大小**（以厘米或英寸为单位）取决于附加信息：“分辨率”。这以**DPI**（每英寸点数或像素数）来衡量。因此，要找到某个图像的打印大小，我们必须将其宽度和高度分别除以相应的DPI值（宽度和高度可能有单独的DPI值），并得到相应的英寸数。
- en: Origin Point, Point Size and Y-Axis
  id: totrans-376
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 原点、点大小和Y轴
- en: In **PDF**, the origin `(0, 0)` of a page is located at its **bottom-left point**.
    In **MuPDF**, the origin `(0, 0)` of a page is located at its **top-left point**.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 在**PDF**中，页面的原点`(0, 0)`位于其**左下角**。在**MuPDF**中，页面的原点`(0, 0)`位于其**左上角**。
- en: '![_images/img-coordinate-space.png](../Images/fdb4dc6f90fefd7f22efb8a073df53a2.png)'
  id: totrans-378
  prefs: []
  type: TYPE_IMG
  zh: '![_images/img-coordinate-space.png](../Images/fdb4dc6f90fefd7f22efb8a073df53a2.png)'
- en: 'Coordinates are float numbers and measured in **points**, where:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 坐标是浮点数，以**点**为单位，其中：
- en: '**one point equals 1/72 inches**.'
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一个点等于1/72英寸**。'
- en: Typical document page sizes are **ISO A4** and **Letter**. A **Letter** page
    has a size of **8.5 x 11 inches**, corresponding to **612 x 792 points**. In the
    **PDF** coordinate system, the top-left point of a **Letter** page hence has the
    coordinate `(0, 792)` as **the y-axis points upwards**. Now we know our document
    size the **MuPDF** coordinate system for the bottom right would be coordinate
    `(612, 792)` (and for **PDF** this coordinate would then be `(612,0)`).
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 典型的文档页面尺寸包括**ISO A4**和**Letter**。**Letter**页面的尺寸为**8.5 x 11英寸**，对应**612 x 792点**。在**PDF**坐标系统中，**Letter**页面的左上角点的坐标为`(0,
    792)`，因为**y轴向上**。现在我们知道我们的文档大小，**MuPDF**中右下角的坐标将是`(612, 792)`（对于**PDF**，此坐标将为`(612,0)`）。
- en: Theoretically, there are **infinitely many** coordinate positions on a **PDF**
    page. In practice however, at most the first 5 decimal places are sufficient for
    a reasonable precision.
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理论上，**PDF**页面上有**无限多**的坐标位置。然而，在实践中，前5位小数通常足以达到合理的精度。
- en: In **MuPDF**, multiple document formats are supported - **PDF** just being one
    among **over a dozen others**. Images are also supported as documents in **MuPDF**
    (therefore having one page usually). This is one of the reasons why **MuPDF**
    uses a coordinate system with the origin `(0, 0)` being the **top-left** point
    of any document page. **The y-axis points downwards**, like with images. Coordinates
    in **MuPDF** in any case are floats, like in **PDF**.
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**MuPDF**中，支持多种文档格式 - **PDF**只是其中之一。图像也作为**MuPDF**中的文档被支持（通常每页一张）。这也是为什么**MuPDF**使用坐标系的原点`(0,
    0)`在任何文档页面上都是**左上角**的一个原因。**y轴向下**，就像图像一样。在**MuPDF**中，坐标始终是浮点数，就像**PDF**中一样。
- en: 'A rectangle `Rect(0, 0, 100, 100)` for instance in **MuPDF** (and thus **PyMuPDF**)
    therefore is a square with edges of length 100 points (= 1.39 inches or 3.53 centimeters).
    Its top-left corner is the origin. To switch between the two coordinate systems
    **PDF** to **MuPDF**, every [Page](page.html#page) object has a [`Page.transformation_matrix`](page.html#Page.transformation_matrix
    "Page.transformation_matrix"). Its inverse can be used to compute a rectangle’s
    PDF coordinates. In this way we can conveniently find that `Rect(0, 0, 100, 100)`
    in **MuPDF** is the same as `Rect(0, 692, 100, 792)` in **PDF**. See this code
    snippet:'
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，**MuPDF**（因此也是**PyMuPDF**）中的一个矩形 `Rect(0, 0, 100, 100)` 实际上是一个边长为 100 点（=
    1.39 英寸或 3.53 厘米）的正方形。其左上角是原点。要在 **PDF** 到 **MuPDF** 之间切换坐标系，每个 [Page](page.html#page)
    对象都有一个 [`Page.transformation_matrix`](page.html#Page.transformation_matrix "Page.transformation_matrix")。其逆矩阵可用于计算矩形的
    PDF 坐标。通过这种方式，我们可以方便地发现在 **MuPDF** 中 `Rect(0, 0, 100, 100)` 与 **PDF** 中的 `Rect(0,
    692, 100, 792)` 是相同的。参见以下代码片段：
- en: '[PRE14]'
  id: totrans-385
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Footnotes
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 脚注
- en: Do you have any feedback on this page?
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 你对本页面有任何反馈吗？
- en: '* * *'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: This software is provided AS-IS with no warranty, either express or implied.
    This software is distributed under license and may not be copied, modified or
    distributed except as expressly authorized under the terms of that license. Refer
    to licensing information at [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA
    94129, United States for further information.
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 本软件按原样提供，不附带任何明示或暗示的担保。本软件以许可方式分发，未经许可，不得复制、修改或分发。请参考 [artifex.com](https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link)
    获取许可信息，或联系美国加利福尼亚州旧金山市 Mesa 街 39 号 108A 套房，Artifex Software Inc. 获取更多信息。
- en: This documentation covers all versions up to 1.24.4.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 本文档涵盖了所有版本，直至 1.24.4。
- en: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: '[![Discord logo](../Images/66cbb5081103a580193aa66c87b90d9a.png)](https://discord.gg/TSpYGBW4eq)'
